<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="Author" content="Leslie Bondaryk" />
	<meta name="Owner" content="Pearson" />
	<meta name="Copyright" content="Copyright (c) 2013 Pearson. All rights reserved." />
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="Carmen Santiago, Demo Book" name="description" />

    <!-- Bootstrap -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">
	<link href="css/graphics_and_svg.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
	<link href="css/grey-thing.css" rel="stylesheet">
	<title class="setTitle"></title>
</head>

<body>
	
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span6 leftCol">
            	<h2 class="setTitle"></h2>
              	<p><b>Resistivity</b> is an electrical material property that specifies how difficult it is to pass current through the material. Every material has its own characteristic resistivity â€“ for example, rubber's resistivity is far larger than copper's. </p>
              <p>You can think of passing current through a low-resistivity material as pushing water through an empty pipe. Nothing impedes the water. In reality, it's actually the presence rather than abscence of free electrons to pass along the charge that lowers the resistivity. </p>
              <p>Resistivity is different from <b>resistance</b>, which is dependent on length and cross section of the physical object. A long, thin copper wire has a much larger resistance than a thick, short copper wire.  </p>
<p>Experiment with the effect on resistance of the physical properties of a wire, then make this statement correct for the variable you are changing: The greater the <span id="selectTerm"></span> the <span id="dropdown"></span> the resistance?
				</p>
			</div>
			<div class="span6 rightCol">
            <p>Resistance in a wire is defined by the expression 
                <div>
                <span id="resistance">R</span> = 
                <span id="resistivity">&rho;</span> &middot; <span id="length">L</span> /
                <span id="area">A</span> = <span id="resVal"></span>
                </div>
               
                <div id="defs"></div> 
              
				</p>
				
            	<div id="sliders">
                	<span id="rhoSlider"></span> 
                    <span id="LSlider"></span> 
                	<span id="ASlider"></span> 
					<span id="resVal"></span>
                </div>
				<div id="diagram"></div>
			</div>
		</div>
	</div>

	
    <script src="js/jquery-latest.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<!-- script src="js/jquery.touchSwipe.min.js"></script-->
	<script src="js/jquery-ui-1.10.2.custom.js"></script>
	<script src="js/toc-structure.js"></script>    
	<script src="js/eCourse-master.js"></script>    
	<script src="js/d3.v3.min.js"></script>

	<script src="js/widget-base.js"></script>
	<script src="js/widget-linegraph.js"></script>
    <script src="js/widget-slider.js"></script>
    <script src="js/widget-callouts.js"></script>
    <script src="js/widget-button.js"></script>
    <script src="js/widget-numeric.js"></script>
	<script src="js/eventmanager.js"></script>

	<script>



	//the eventManager is an object that is specific to this page.  A new one
	//is created for every page, and then passed to the widgets in that page
	//that must talk to it.
	var eventManager = new EventManager();
	
	
	// Create the callout array, which also emits events so you 
	//can click on the table row to highlight the labels.  
	/*var rowDefs = new Callouts({
		id: "varDefs",
		show: "all",
		//type: "numbered",
		headers: ["where" ],
		textBits: [
		{cols: ['<span class="math">R</span> is resistance,']},
		{cols:[ '<span class="math">&#961;</span> is resistivity, ']},
		{cols:[ '<span class="math">L</span> is length, and']},
		{cols:['<span class="math">A</span> is area.']}
		]
	},eventManager);
	
	rowDefs.draw(d3.select("#defs"));
	*/
	
		
	var rhoSlide = new Slider ({
			id: "rhoVal",
			startVal: 0.5,
			minVal: 0.01,
			maxVal: 1,
			stepVal: .01,
			unit: "&Omega;&nbsp;cm",
			label: "Resistivity"
		}, eventManager);
		
	rhoSlide.draw(d3.select("#rhoSlider"));

	var LSlide = new Slider ({
			id: "LVal",
			startVal: 5,
			minVal: 0,
			maxVal: 10,
			stepVal: .1,
			unit: "cm",
			label: "Length"
		}, eventManager);
		
	LSlide.draw(d3.select("#LSlider"));
	
	var ASlide = new Slider ({
			id: "AVal",
			startVal: 20,
			minVal: 1,
			maxVal: 50,
			stepVal: .1,
			unit: "cm<sup>2</sup>",
			label: "Area"
		}, eventManager);
		
	ASlide.draw(d3.select("#ASlider"));
	
	
	// Create the ee readout widget
	var resReadout = new Readout({
		node: d3.select("#resVal"),
        id: 'eeRead',
		startVal: resist(rhoSlide.getValue(),LSlide.getValue(),ASlide.getValue()),
		readOnly: true,
		size: 5,
		unit: "&Omega;", 
		label: "R ="
	}, eventManager);
	
	function resist(rho,len,area) {
		return rho*len/area;
	}
	
	//generate the random data based on the slider values
	
	function randomData(inputVals){
		
		var pts = inputVals.pts;
		var amplitudeX = inputVals.amplitudeX;
		var amplitudeY = inputVals.amplitudeY;
	
		var data = [];
	
		for(i=0;i<pts;i++){
		data[i] = {x: amplitudeX* Math.random(), y: amplitudeY*Math.random()};
		}
		
		return data;
	}
	var electrons = randomData({
		pts: Math.floor(200*rhoSlide.getValue()),
		amplitudeX: LSlide.getValue()*10,
		amplitudeY: ASlide.getValue()/50,
		
	});
	
	var cont1 = new SVGContainer({
			node: d3.select("#diagram"),
			maxWid: 450,
			maxHt: 200
		});
	var dots = new LineGraph({
			id: "lg0",
			Data: [electrons], 
			type: "points",
			xAxisFormat: { type: "linear",
						   ticks: 0,
						   orientation: "bottom",
						   label: "wire length" },
			yAxisFormat: { type: "linear",
						   orientation: "right",
						   label: "wire height"
						    },
		});		
	cont1.append(dots, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});

	
	
	
	
	// Modify the value of the data for the bar graph when the
	//numerical input changes.  So, subscribe to the event emitted by inputLevo,
	//or inputDextro,
	//and target whatever is identified by the handler in the second argument.
	//TODO: make these methods of the target widget?

	// Handle changes of the levo and dextro input values
	eventManager.subscribe(rhoSlide.changedValueEventId,
						   handleChangedValue);
	eventManager.subscribe(LSlide.changedValueEventId,
						   handleChangedValue);
	eventManager.subscribe(ASlide.changedValueEventId, handleChangedValue);
	

	/* **************************************************************************
	* handleInputValueChanged                                              *//**
	*
	* handleInputValueChanged is called from the event handler for one of
	* the input widgets when the user changes its value. It updates the
	* given matching input widget's value to match the new value and then
	* updates the bar chart.
	*
	* @param {NumericInput} otherInputWidget -This is the other input widget
	*                                         whose value needs to be updated
	*                                         to match the user changed widget.
	* @param {number} newValue - The value of the widget that was changed.
	*
	****************************************************************************/
	function handleChangedValue(newValue)
	{
		//get the values of all the sliders, calculate new resistance
		newRes = resist(rhoSlide.getValue(),LSlide.getValue(),ASlide.getValue());
		//write that resistance to the readout
		resReadout.setValue(newRes);
		//recalculate the data
		electrons = randomData({
		pts: Math.floor(500*rhoSlide.getValue()),
		amplitudeX: LSlide.getValue()*10,
		amplitudeY: ASlide.getValue()/50,
		});
		console.log(electrons.length);
		//redraw the dots
		dots.draw(dots.lastdrawn.container,dots.lastdrawn.size);

	
	}
	
	
	/* **************************************************************************
	 * handleNumericInputChanged                                            *//**
	 *
	* handleInputValueChanged is called from the event handler for one of
	* the input widgets when the user changes its value. It updates the
	* given matching input widget's value to match the new value and then
	* updates the bar chart.
	*
	* @param {NumericInput} Otherwidgetarray -These are the other widgets
	*                                         which need to be updated
	*                                         to match the user changed widget.
	* @param {number} newValue - The value of the widget that was changed.
	*
	****************************************************************************/
	function handleNumericInputChanged(WidgetList, newValue)
	{
		var diff = inputDextro.getValue() - inputLevo.getValue();
		//var angle = newValue * diff/10;
		//rot.setValue(newValue * diff/100);
		updatePieChart(diff);
	}

	/* **************************************************************************
	 * updateBarChart                                                       *//**
	 *
	 * updateBarChart updates the bar chart widget to match the current values
	 * of the levo and dextro input widgets.
	 *
	 ****************************************************************************/
	function updateBarChart()
	{
		console.log("TODO: fired updateBarChart log");
		levoData[0].x = inputLevo.getValue();
		dextroData[0].x = inputDextro.getValue();
		svg70.BarChart({
			Data: [dextroData, levoData],
			type: "linear" //ignored for anything but grouped
			});
		var newMark = (levoData[0].x > dextroData[0].x) ? dextroData[0] : levoData[0];
		svg70.LineMarkers( {
			xMarks: [newMark]
			});
		
		Bars.draw(Bars.lastdrawn.container,Bars.lastdrawn.size);

		
	}

	function updatePieChart(diff)
	{
		console.log("TODO: fired updatePieChart log");
		pieDish.Pie({
			Data: [{x: sl1.getValue() * diff/360}],
			xYPos: [0.5,0.5]
			});
		var newMark = {x:(1/2), label: d3.format("+0r2")(sl1.getValue() * diff/100) + "&deg;"};
		pieDish.LineMarkers( {
			xMarks: [newMark]
			});
		
	}
		
	
	</script>
</body>
</html>
