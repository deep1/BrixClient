// This is a JSON schema that is under development (it is expected to encapsulate the ideas
// in the sample instance below it. -mjl 9/16/2013
{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Pearson Brix Activity Configuration",
    "description": "A complete configuration used to create all the related brix and cement needed to perform an activity.",
    "type": "object"
	"required": ["sequenceNodeKey", "containerConfig"],
	"properties":
		{
			"sequenceNodeKey":
				{
					"description": "The sequence node key created from the sequence node id by the IPS for the PAF sequence node that this config has been extracted from. This should not exist in the config stored in PAF.",
					"type": "string"
				},
			"containerConfig":
				{
					"description": "Array of configuration objects each of which defines all the brix and cement that live together in a single element (or iframe), for all of the targets on a page.",
					"type": "array",
					"minItems": 1,
					"items": { "$ref": "#/definitions/containerConfig" }
				}
		},
	"definitions":
		{
			"containerConfig":
				{
					"description": "defines all the brix and cement that live together in a single element (or iframe).",
					"type": "object",
					"required": ["containerId", "brixConfig"],
					"properties":
						{
							"containerId":
								{
									"description": "Unique ID of page container, probably the ID on the div or iframe or object element that is the target of this configuration",
									"type": "string",
									"minLength": 1
								},
							"brixConfig":
								{
									"description": "Array of configuration for all of the brix in this container.",
									"type": "array",
									"items": { "$ref": "#/definitions/brixConfig" }
								},
							"cementConfig":
								{
									"description": "Array of configuration for all of the cement in this container.",
									"type": "array",
									"items": { "$ref": "#/definitions/cementConfig" }
								},
						}
				},
			"brixConfig":
				{
					"description": "configuration of a particular bric.",
					"type": "object",
					"required": ["bricId", "bricType", "config"],
					"properties":
						{
							"bricId":
								{
									"description": "",
									"type": "string",
									"minLength": 1
								},
							"bricType":
								{
									"description": "BricTypes enum name used to register the bric with the BricWorks",
									"enum":
										[
											"SvgContainer",
											"BarChart",
											"Button",
											"Callouts",
											"CaptionedImage",
											"Carousel",
											"CheckGroup",
											"Image",
											"ImageViewer",
											"LabelGroup",
											"Legend",
											"LineGraph",
											"MarkerGroup",
											"MultipleChoiceQuestion",
											"MultiSelectQuestion",
											"NumericInput",
											"NumericQuestion",
											"PieChart",
											"RadioGroup",
											"Readout",
											"SelectGroup",
											"Sketch",
											"Slider"
										],
								},
							"config":
								{
									"description": "config for the bric type specified",
									"type": "object",
								},
							"configFixup":
								{
									"description": "config for the bric type specified",
									<[optional] object describing runtime modifications to the config, perhaps
										adding properties referencing a previously created bric>
									"type": "string",
								},
						}
				},
			"cementConfig":
				{
					"description": "",
					"type": "object",
					"required": [],
					"properties":
						{
						}
				},
			"foo":
				{
					"description": "",
					"type": "object",
					"required": [],
					"properties":
						{
						}
				},
			"foo":
				{
					"description": "",
					"type": "object",
					"required": [],
					"properties":
						{
						}
				},
			"foo":
				{
					"description": "",
					"type": "object",
					"required": [],
					"properties":
						{
						}
				},
			"foo":
				{
					"description": "",
					"type": "object",
					"required": [],
					"properties":
						{
						}
				},
		}
}

{
	"activityId": <PAF activity guid>,
	"containerConfig":
		[
			{
				"containerId": <ID of page container, perhaps div or iframe or object element id that is the target of this configuration>,
				"brixConfig":
					[
						{
							"bricId": <unique id for this bric in this container>,
							"bricType": "Button"|"Linegraph"|"Callout"|"CaptionedImage"|"ImageViewer"|...etc,
							"config":
								{
									... config for bric type specified
								},
							"configFixup":
								{
									<[optional] object describing runtime modifications to the config, perhaps
										adding properties referencing a previously created bric>
								}
						},
						{
							"bricType": ...
							"config": ...
						},
						...
					],
				"cementConfig":
					[
						{
							"cementId": <unique id for this cement in this container>,
							"cementType": "BrixEventHandler"|"DataConverter"|"Action"|...etc,
							"config":
								{
									... config for cement type specified
								}
						},
						{
							"cementType": ...
							"config": ...
						},
						...
					]
				"hookupActions":
					[
						{
							"actionType": "method-call", /* the method-call handles a lot of the actions needed, but I expect there are other types of actions */
							"config":
								{
									"objectId": "Invoker-GUID",
									"methodName": "registerObject",
									"args":
										[
											{ "type": "static", "value": "barChart_GUID" }, /* static args use the value specified here */
											{ "type": "bric-obj-ref", "id": "barChart_GUID" } /* obj refs are replaced w/ the object created above w/ the specified id */
										]
								}
						},
						{
							"actionType": ...
							"config": ...
						},
						...
					]
			},
			{
				"containerId": ...
				"brixConfig": ...
				"cementConfig": ...
			},
			...
		]
}
