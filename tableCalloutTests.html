<!DOCTYPE html>
<html>
    <head>
 	<title class="setTitle"></title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="eCourses Author, Title" name="description">
    <!-- Bootstrap -->
    <link href="css/bootstrap_eCourses_customized.css" rel="stylesheet" media="screen">
	<link href="css/bootstrap_eCourses_responsive.css" rel="stylesheet" media="screen">
	<link href="css/graphics_and_svg.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
    </head>
	<body>
		<div class="titler">
			<span class='number setId'></span>
			<span class="setTitle">Test Cases for Labels Graph</span>
		</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span6 leftCol">
				<div id="table0"><p>0. Table of callouts: these use headers, multiple columns of arbitrary key, and the "table" type.</p>
                </div>
				<div id="singly"><p>1. Individual callout - only shows the first callout text from the table above, and headers if there are any. Typically used with selection events from labels or markers or carousels.</p>
                </div>
				<div id="optionsOff"><p>3. Degenerate: single column, no headers	
                					</p>
                </div>
                <div id="numbered"><p>4. autonumbered callouts, linked to #5</p>
                </div>
			</div>
			<div class="span6 rightCol">
				<div id="imgReactor"><p>5. Stepped image (auto numbered callouts - labels fire table, table fires labels)</p>
                </div>
				<div id="Endocrine"><p>6. Labels fire single callouts</p>
                </div>
			</div>
		</div>
	</div>
	</div>

	<script src="js/jquery-latest.js"></script>
	<script src="js/toc-structure.js"></script>    
	<script src="js/eCourse-master.js"></script>    
	<script src="js/d3.v3.min.js"></script>
	<script src="js/widgets.js"></script>
	<script src="js/bootstrap.min.js"></script>
    
    <script src="js/widget-callouts.js"></script>
	<script src="js/eventmanager.js"></script>
<script>

	var eventManager = new EventManager();
	var phaseData = [{col0:"Pre-development",
					   col1: "High birth and death rates offset each other, so the population grows slowly."
					   },
					  {col0:"Developing",
	 				   col1: "As a country's economy becomes stronger, medical care, clean water, and food are more available. The death rate declines and the birth rate remains high, so the population grows more rapidly."
					   },
					  {col0:"Modernizing",
	 				   col1: "Economic, educational, and social changes cause declines in the birth rate. Population growth starts to slow."
					   },
					  {col0:"Developed",
	 				   col1: "Birth and death rates fall to low levels, slowing population growth."
					   },
					  {col0:"Post-development",
					   col1: "In highly developed countries, the birth rate is falling while the death rate is relatively constant. The population growth rate is negative and the population declines."
					   }];
					   
	var reactorData = [{ 
		col0: "In a closed circuit, (green) water is pumped at high pressure to the reactor core."},
		{
		col0: "Heat is generated by fission in the fuel rods in the reactor core, which heats the circulating water. Thick layers of concrete and steel or lead contain the reactor core's radioactivity."},
		{
		col0: "In the steam generator, the energy from the heated water is used to boil water from a separate supply. The resulting steam moves through a pipe to a turbine."},
		{
		col0: "The steam turns the turbine, which is connected to an electricity generator. Power lines distribute the electricity. A typical reactor produces as much as a coal-fired power plant."},
		{ 
		col0: "A third supply of water is used to cool the steam so it condenses into water, which is pumped back to the steam generator."}
		];
	//<div id="widgetTarget0"><p>0. Table of callouts</p></div>
	
	var phases = new Callouts({
	id: "phaseTable",
	type: "table",
	textBits: {
			headers: ["Developmental Phase","Characteristics"],
			content: phaseData
				}
		});
	
	phases.draw(d3.select("#table0"));
	
	
//	<div id="widgetTarget1"><p>1. Graph with Labels</p></div>
	var onlyOne = new Callouts({
	id: "singleton",
	textBits: {
			headers: ["Developmental Phase","Characteristics"],
			content: phaseData
				}
		});
	
	onlyOne.draw(d3.select("#singly"));
	
	//	<div id="optionsOff"><p>3. single col, no heads</p></div>

	var textChunks = new Callouts (
		{id: "Earth",
		textBits: 	
		  {	content:
			[{content: "Chapter 2 LO: Describe Earth's orientation to and revolution around the Sun and explain how they cause seasons."
		},
			{content: "The thin veil of atmosphere includes relatively small percentages of gases such as carbon dioxide, methane, and water vapor absorb radiation emitted by Earth creating a greenhouse effect.",
			},
			{content: "The constant tilt and parallelism of Earth's axis as it revolves around the Sun creates the annual variation in day length and Earth's seasons.",
			},
			{content:"Heat is transferred by radiation, in the form of electromagnetic waves, conduction, which is caused by molecular collision, and convection, or molecular circulation. "	}
		  ]}
		});
		
textChunks.draw(d3.select("#optionsOff"));

		//	<div id="stepped"><p>Stepped Image</p></div>

var svgImg = new MakeSVGContainer(
		{
			node: d3.select("#imgReactor"),
			maxWid: 750,
			maxHt: 390
		});

svgImg.Axes( 
		{
			
			xPosPerc: 0, yPosPerc:0,
			xPerc: 1, yPerc: 1,
			xaxisType: "linear", yaxisType: "linear",
			xTicks: 0,
			xOrient: "bottom",
			yOrient: "left",
			xLabel: "Nuclear Reactor Schematic"
		});

		
svgImg.ScalableImage({
		images: [
		{URI: "img/reactor.jpg", caption: "Nuclear Reactor schematic"}
		],
		});//this doesn't have an eventmanager argument, because it isn't
	//emitting events in this page.  

svgImg.Labels (
		{type: "numbered",
		labels: 	
		  [
		{content: "1", xyPos: [.025,.17], width: 0},
		{content: "2", xyPos: [.08,.38], width: 0},
		{content: "3" , xyPos: [.325,.64], width: 0},
		{content: "4" , xyPos: [.645,.58], width: 0},
		{content: "5" , xyPos: [.69,.095], width: 0}
		]}, eventManager);

	
// Create the callout array.  
	var callEm = new Callouts({
		id: "callme",
		type: "table",
		
		textBits: {
			headers: ["Nuclear Reactor function" ],
			type: "numbered",
		content: reactorData}
	},eventManager);
	
	callEm.draw(d3.select("#numbered"));
	
 
	
	
	//	<div id="widgetTarget80"><p>6. labels fire callouts (events)</p></div>
	var svg5 = new MakeSVGContainer(
		{node: d3.select("#Endocrine"),
		maxWid: 550,
		maxHt:680
		}
	);
	svg5.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc:1, yPerc: 1,//full height and width
		xaxisType: "linear",
		xOrient: "bottom",
		xLabel: "caption",
		yaxisType: "linear",
		yOrient: "left",
	});
	
	
	svg5.ScalableImage(
		{images: [
				{URI:'img/endocrineSystem.jpg', caption: "Human Glands"}
				]});
	
	svg5.Labels(
		{labels: 	
		  [
		{content: "Hypothalamus", xyPos: [0,1], width: 100	},
		{key: "Pituitary", content: "Pituitary gland" , xyPos: [0,.8], width: 80	},
		{key: "Pineal", content: "Pineal gland (epiphysis)", xyPos: [.15,.75], width: 100	},
		{key: "Thyroid", content: "Thyroid gland", xyPos: [.5,.98], width: 100},
		{key: "Parathyroid", content: "Parathyroid gland", xyPos: [.8,.9], width: 90},
		{key: "Adrenal", content: "Adrenal (surparenal)", xyPos: [.82,.8], width: 80},
		{key: "Pancreas", content: "Pancreas", xyPos: [.85,.52], width: 100},
		{key: "Ovaries", content: "Ovaries", xyPos: [.65,.38], width: 70},
		{key: "Testes", content: "Testicles", xyPos: [.7,.02], width: 70}
		]
	}, eventManager);
	

	var endoCallouts = new Callouts ({
		id: "glandEffect",
		
		textBits: {
			content:[ 
				{key: "Adrenal",
	 			content: "Conserves sodium and encourages water retention, which increases blood pressure."},
				{key: "Testes",
	  			content: "Group of hormones responsible for male sexual characteristics.  Testosterone is the principal androgen." },
				{key: "Thyroid",
	 			content: "Reduces calcium levels in blood and regulates metabolism."},
	 			{key: "Placenta",
	 			content: "Acts as a temporary endocrine gland by secreting chorionic gonadotropin, which signals the womanâ€™s ovaries to continue producing progesterone.  Without this signal, the lining of the uterus would be shed during the menstrual cycle and the pregnancy would be terminated. *The placenta is not a gland but produces hormones."},
				{key: "Adrenal gland",
	 			content: "Related to stress response - increases blood glucose levels, suppresses the immune system, and aids metabolism."},
				{key: "Ovaries",
   	  			content: "Group of hormones responsible for female sex characteristics."},
	 			{key: "Stomach",
	 			content: "Stimulates the production of hydrochloric acid and pepsin - necessary for normal food digestion. *Stomach lining is not a gland but produces hormones."},
				{key: "Pancreas",
				content: "Raises glucose levels in the blood by triggering the liver to convert stored glycogen to glucose."},
	 			{key: "Pancreas",
	 			content: "Lowers glucose levels in the blood by encouraging cells to take in glucose from the blood."},
	 			{key: "Pineal gland",
	 			content: "Regulates sleep cycles and plays a role in the reproductive cycles of many animals, especially those that reproduce seasonally."},
	 			{key: "Adrenal gland",
 				content:  "Part of the body's <i>fight-or-flight</i> response - increases blood pressure, blood flow to the brain, and releases stored glucose for quick energy."},
	 			{key: "Parathyroid",
 	 			content:  "Increases calcium levels in the blood."},
	 			{key: "Ovaries",
 	 			content: "The 'pregnancy' hormone - progesterone causes the uterine lining to thicken in preparation for pregnancy and maintains the uterine lining during pregnancy."}
	 			]} 
		});

endoCallouts.draw(d3.select("#endoCall"));

		
//events
	
// Handle changes of the label selection
	eventManager.subscribe(svg5.selectedEventId,
						   handleSelectionChanged);

//Test: set the start highlight state of 0 index by calling the 
//handler with a hard-set index of 0.  This should result in the
//first label getting highlighted and the first callout being displayed.
	handleSelectionChanged({labelIndex: "Thyroid"});

	
	eventManager.subscribe(svgImg.selectedEventId,
						   handleSelectionChanged0);
	eventManager.subscribe(callEm.selectedEventId,
						   handleSelectionChanged0);

 
//TEST: set the start highlight state of 0 index by calling the 
//handler with a hard-set index of 0.  This should result in the
//first label getting highlighted and the first callout being displayed.
	handleSelectionChanged({labelIndex: 0});
/************************************************************************
* handleSelectionChanged0                                            *//**
*
* handleInputValueChanged is called from the event handler for one of
* the input widgets when the user changes its value. It updates the
* given matching input widget's value to match the new value and then
* updates the bar chart.
*
* @param eventDetails			These are the keyed values returned by 
*								the event, in this case, a selection
*								(click).
*************************************************************************/
	function handleSelectionChanged0(eventDetails)
	{
		//Handler needs to get written into each page, 
		//each widget will have it's own way of responding  
		//LabelLite should be a method of Labels, once Labels
		//is written as a constructor
		labelLite(svgImg,eventDetails.labelIndex);
		callEm.calloutSwap(eventDetails.labelIndex);
		
	}
	
		
	
/************************************************************************
* handleSelectionChanged                                            *//**
*
* handleInputValueChanged is called from the event handler for one of
* the input widgets when the user changes its value. It updates the
* given matching input widget's value to match the new value and then
* updates the bar chart.
*
* @param eventDetails			These are the keyed values returned by 
*								the event, in this case, a selection
*								(click).
*************************************************************************/
	function handleSelectionChanged(eventDetails)
	{
		//Handler needs to get written into each page, 
		//each widget will have it's own way of responding  
		//LabelLite should be a method of Labels, once Labels
		//is written as a constructor
		labelLite(svg5,eventDetails.labelIndex);
		endoCallouts.calloutSwap(eventDetails.labelIndex);
		
	}
</script>
</body>
</html>