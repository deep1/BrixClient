<!DOCTYPE html>
<html>
    <head>
 	<title class="setTitle"></title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="eCourses Author, Title" name="description">
    <!-- Bootstrap -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">
	<link href="css/graphics_and_svg.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
 	<link href="css/widgets.css" rel="stylesheet" media="screen">

    </head>
	<body>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span6 leftCol">
                <h2 class="setTitle"></h2>
				<div id="table0"><p>0. Table of callouts: these use headers, multiple columns, no key, no autonumbering, and the "all" type.</p>
                </div>
				<div id="singly"><p>1. Individual callout - only shows the first callout text from the table above, and headers if there are any. Typically used with selection events from labels or markers or carousels.</p>
                </div>
				<div id="optionsOff"><p>2. Degenerate: single column, no headers	
                					</p>
                </div>
                <div id="numbered"><p>3. autonumbered callouts, linked to #4</p>
                </div>
			</div>
			<div class="span6 rightCol">
				<div id="imgReactor"><p>4. Stepped image (auto numbered callouts - labels fire table, table fires labels)</p>
                </div>
				<div id="Endocrine"><p>5. Labels fire single callouts using Keys not numerical index (below image) <div style="color: 'red'">BUG: labels aren't highlighting at the moment since swapover to new framework</div></p>
                </div>
                <div id="endoCall">
                </div>
                <p> Thus endeth the lesson.... </p>
			</div>
		</div>
	</div>
	</div>
    <script src="js/jquery-latest.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.touchSwipe.min.js"></script>
	<script src="js/jquery-ui-1.10.2.custom.js"></script>
	<script src="js/toc-structure.js"></script>    
	<script src="js/eCourse-master.js"></script>    
	<script src="js/d3.v3.min.js"></script>
       
    <script src="js/widget-base.js"></script>
    <script src="js/widget-callouts.js"></script>
    <script src="js/widget-labelgroup.js"></script>
    <script src="js/widget-image.js"></script>
	<script src="js/eventmanager.js"></script>
<script>

	var eventManager = new EventManager();
	var phaseData = [
		{cols:["Pre-development",
		"High birth and death rates offset each other, so the population grows slowly."]
		},
		{cols:["Developing",
	 	"As a country's economy becomes stronger, medical care, clean water, and food are more available. The death rate declines and the birth rate remains high, so the population grows more rapidly."]
		},
		{cols:["Modernizing",
	 	"Economic, educational, and social changes cause declines in the birth rate. Population growth starts to slow."]
		},
		{cols:["Developed",
	 	"Birth and death rates fall to low levels, slowing population growth."]
		},
		{cols:["Post-development",
		"In highly developed countries, the birth rate is falling while the death rate is relatively constant. The population growth rate is negative and the population declines."]
		}];
					   
	var reactorData = [
	{cols:["In a closed circuit, (green) water is pumped at high pressure to the reactor core."]},
	{cols:[ "Heat is generated by fission in the fuel rods in the reactor core, which heats the circulating water. Thick layers of concrete and steel or lead contain the reactor core's radioactivity."]},
	{cols:["In the steam generator, the energy from the heated water is used to boil water from a separate supply. The resulting steam moves through a pipe to a turbine."]},
	{cols:[ "The steam turns the turbine, which is connected to an electricity generator. Power lines distribute the electricity. A typical reactor produces as much as a coal-fired power plant."]},
	{cols:["A third supply of water is used to cool the steam so it condenses into water, which is pumped back to the steam generator."]}
		];
	//<div id="widgetTarget0"><p>0. Table of callouts</p></div>
	
	var phases = new Callouts({
	id: "phaseTable",
	headers: ["Developmental Phase","Characteristics"],
	show: "all",
	textBits: phaseData
	});
	
	phases.draw(d3.select("#table0"));
	
	
//	<div id="widgetTarget1"><p>1. Graph with Labels</p></div>
	var onlyOne = new Callouts({
	id: "singleton",
	headers: ["Developmental Phase","Characteristics"],
	textBits: phaseData
	});
	
	onlyOne.draw(d3.select("#singly"));
	
	//	<div id="optionsOff"><p>3. single col, no heads</p></div>

	var textChunks = new Callouts (
		{id: "Earth",
		textBits: reactorData
		});
		
textChunks.draw(d3.select("#optionsOff"));

		//	<div id="stepped"><p>Stepped Image</p></div>

	var imgConfig0 =
		{
			id: "imgReactor",
			URI: 'img/reactor.jpg',
			caption: "Nuclear Reactor Schematic Diagram",
			actualSize: {height: 310, width: 680}
		};

	var cimgConfig0 =
		{
			id: "cimg0n",
			image: new Image(imgConfig0),
			captionPosition: "below"
		};
	
	var cntrSize = Size.matchRatioWithHeight(350 - 40, imgConfig0.actualSize);

	var cntrConfig0 = 
		{
			node: d3.select("#imgReactor"),
			maxSize: cntrSize,
			maxWid: cntrSize.width, //550,
			maxHt: 350
		};
		
	var cntr0 = new SVGContainer(cntrConfig0);
	var cimg0 = new CaptionedImage(cimgConfig0);
	
	cntr0.append(cimg0, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});


// Create the numbered label array.  

var newLabels = new LabelGroup(
		{id: "reactorNum",
		type: "numbered",
		labels: 	
		  [	
			{content: "1", xyPos: [.025,.25], width: 0},
			{content: "2", xyPos: [.08,.45], width: 0},
			{content: "3" , xyPos: [.325,.7], width: 0},
			{content: "4" , xyPos: [.645,.64], width: 0},
			{content: "5" , xyPos: [.69,.2], width: 0}
	  ]
		}, eventManager);
		
cntr0.append(newLabels, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
//cimg0.append(newLabels);
		
var callEm = new Callouts({
	id: "callme",
	show: "all",
	type: "numbered",
	headers: ["Nuclear Reactor function" ],
	textBits: reactorData
	},eventManager);
	
callEm.draw(d3.select("#numbered"));
	
 
	
	
	//	<div id="widgetTarget80"><p>5. labels fire callouts (events)</p></div>
var imgBodyCfg = {
				id: "endoBody",
				URI: 'img/endocrineSystem.jpg',
				caption: "Human Glands",
				actualSize: {height: 500, width: 430}
				};

var imgContBodyCfg =
		{
			id: "endoBody1",
			image: new Image(imgBodyCfg),
			captionPosition: "below"
		};
	
	var cntrSize1 = Size.matchRatioWithHeight(540 - 40, imgContBodyCfg.image.actualSize);
		
	var svg5 = new SVGContainer({
			node: d3.select("#Endocrine"),
			maxSize: cntrSize1,
			maxWid: cntrSize1.width, //550,
			maxHt: 540
		});
		
	var glands = new CaptionedImage(imgContBodyCfg);
	
	svg5.append(glands, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});


	var glandLabels = new LabelGroup(
		{id: "secrete",
		labels: 	
		  [
		{content: "Hypothalamus", xyPos: [0,1], width: 100	},
		{key: "Pituitary", content: "Pituitary gland" , xyPos: [0,.8], width: 80	},
		{key: "Pineal", content: "Pineal gland (epiphysis)", xyPos: [.15,.75], width: 100	},
		{key: "Thyroid", content: "Thyroid gland", xyPos: [.5,.98], width: 100},
		{key: "Parathyroid", content: "Parathyroid gland", xyPos: [.8,.9], width: 80},
		{key: "Adrenal", content: "Adrenal (surparenal)", xyPos: [.78,.8], width: 80},
		{key: "Pancreas", content: "Pancreas", xyPos: [.82,.6], width: 100},
		{key: "Ovaries", content: "Ovaries", xyPos: [.65,.45], width: 70},
		{key: "Testes", content: "Testicles", xyPos: [.7,.1], width: 70}
		]
	}, eventManager);
	
	
	svg5.append(glandLabels, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});


	var endoCallouts = new Callouts ({
		id: "glandEffect",
		textBits: [
		{key: "Adrenal",
		cols: ["Aldosterone",
	 			"Conserves sodium and encourages water retention, which increases blood pressure."]
		},
		{key: "Testes",
		cols: ["Androgens","Group of hormones responsible for male sexual characteristics.  Testosterone is the principal androgen." ]
		},
		{key: "Thyroid",
		cols: ["Calcitonin", "Reduces calcium levels in blood and regulates metabolism."]
		},
	 	{key: "Placenta",
		cols: ["Chorionic goadotropin", "Acts as a temporary endocrine gland by secreting chorionic gonadotropin, which signals the womanâ€™s ovaries to continue producing progesterone.  Without this signal, the lining of the uterus would be shed during the menstrual cycle and the pregnancy would be terminated. *The placenta is not a gland but produces hormones."]
		},
		{key: "Adrenal",
		cols: ["Cortisol", "Related to stress response - increases blood glucose levels, suppresses the immune system, and aids metabolism."]
		},
		{key: "Ovaries",
		cols: ["Estrogens", "Group of hormones responsible for female sex characteristics."]
		},
	 	{key: "Stomach",
		cols: ["Gastrin", "Stimulates the production of hydrochloric acid and pepsin - necessary for normal food digestion. *Stomach lining is not a gland but produces hormones."]
		},
		{key: "Pancreas",
		cols: ["Glucagon","Raises glucose levels in the blood by triggering the liver to convert stored glycogen to glucose."]
		},
	 	{key: "Pancreas",
		cols: ["Insulin","Lowers glucose levels in the blood by encouraging cells to take in glucose from the blood."]},
	 	{key: "Pineal",
		cols: ["Melatonin", "Regulates sleep cycles and plays a role in the reproductive cycles of many animals, especially those that reproduce seasonally."]},
	 	{key: "Adrenal",
		cols: ["Epinephrine","Part of the body's <i>fight-or-flight</i> response - increases blood pressure, blood flow to the brain, and releases stored glucose for quick energy."]},
	 	{key: "Parathyroid",
		cols: ["Increases calcium levels in the blood."]},
	 	{key: "Ovaries",
		cols: ["Progesterone","The 'pregnancy' hormone - progesterone causes the uterine lining to thicken in preparation for pregnancy and maintains the uterine lining during pregnancy."]}
	 	]
		});

endoCallouts.draw(d3.select("#endoCall"));

		
//events
	
// Handle changes of the label selection
	eventManager.subscribe(glandLabels.selectedEventId,
						   handleSelectionChanged);

//Test: set the start highlight state by calling the 
//handler with a hard-set index of Thyroid.  This should result in the
//label with key Thyroid getting highlighted and the first callout 
//being displayed.
	handleSelectionChanged({selectKey: "Thyroid"});

	
	eventManager.subscribe(newLabels.selectedEventId,
						   handleSelectionChanged0);
	eventManager.subscribe(callEm.selectedEventId,
						   handleSelectionChanged0);
						   
						   
//Test: set the start highlight state by calling the stepped diagram
//handler with a hard-set index of 0.  This should result in the
//label with key 0 getting highlighted and the first table line displayed.
	handleSelectionChanged0({selectKey: 0});
 

/************************************************************************
* handleSelectionChanged0                                            *//**
*
* handleInputValueChanged is called from the event handler for one of
* the input widgets when the user changes its value. It updates the
* given matching input widget's value to match the new value and then
* updates the bar chart.
*
* @param eventDetails			These are the keyed values returned by 
*								the event, in this case, a selection
*								(click).
*************************************************************************/
	function handleSelectionChanged0(eventDetails)
	{
		//Handler needs to get written into each page, 
		//each widget will have it's own way of responding  
		//LabelLite should be a method of Labels, once Labels
		//is written as a constructor
		newLabels.lite(eventDetails.selectKey);
		callEm.calloutSwap(eventDetails.selectKey);
		
	}
	
		
	
/************************************************************************
* handleSelectionChanged                                            *//**
*
* handleInputValueChanged is called from the event handler for one of
* the input widgets when the user changes its value. It updates the
* given matching input widget's value to match the new value and then
* updates the bar chart.
*
* @param eventDetails			These are the keyed values returned by 
*								the event, in this case, a selection
*								(click).
*************************************************************************/
	function handleSelectionChanged(eventDetails)
	{
		//Handler needs to get written into each page, 
		//each widget will have it's own way of responding  
		//LabelLite should be a method of Labels, once Labels
		//is written as a constructor
		glandLabels.lite(eventDetails.selectKey);
		endoCallouts.calloutSwap(eventDetails.selectKey);
		
	}
</script>
</body>
</html>