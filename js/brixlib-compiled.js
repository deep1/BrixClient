'use strict';var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";
goog.TRUSTED_SITE=!0;goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};/*
 (c) 2013 Pearson, All rights reserved.

*/
var pearson={brix:{}};pearson.brix.utils={};pearson.utils={};pearson.brix.utils.measure=function(a){if(!a)return{height:0,width:0};a=a.node().getBBox();return{height:a.height,width:a.width}};pearson.brix.utils.logFormat=function(a){var b=Math.log(a)/Math.log(10)+1E-6;return 0.1>Math.abs(b-Math.floor(b))&&0==Math.floor(b)%2?d3.round(Math.log(a)/Math.log(10)):""};pearson.brix.utils.sign=function(a){return a?0>a?-1:1:0};
pearson.brix.utils.attrFnVal=function(a,b){var c=Array.prototype.slice.call(arguments,1),c=a+"("+c.join(",");return c+=")"};pearson.brix.utils.getIdFromConfigOrAuto=function getIdFromConfigOrAuto(b,c){if(void 0!==b.id)return b.id;"autoIdCount"in c||(c.autoIdCount=0);if(!("autoIdPrefix"in c)){var d=++getIdFromConfigOrAuto.autoPrefixCount;c.autoIdPrefix="auto"+d+"_"}return c.autoIdPrefix+ ++c.autoIdCount};pearson.brix.utils.getIdFromConfigOrAuto.autoPrefixCount=0;
pearson.utils.randomizeArray=function(a){for(var b=[],c=a.length-1;0<=c;--c)b[c]={r:Math.random(),element:a[c]};b.sort(function(a,b){return a.r-b.r});for(c=a.length-1;0<=c;--c)a[c]=b[c].element};goog.exportSymbol("pearson.utils.randomizeArray",pearson.utils.randomizeArray);pearson.utils.Rect=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;this.top=b;this.left=a;this.bottom=this.top+d;this.right=this.left+c};goog.exportSymbol("pearson.utils.Rect",pearson.utils.Rect);
pearson.utils.Rect.prototype.getSize=function(){return{height:this.height,width:this.width}};goog.exportProperty(pearson.utils.Rect.prototype,"getSize",pearson.utils.Rect.prototype.getSize);
pearson.utils.Rect.makeRect=function(a){var b=0;if("t"in a){var c=!0;++b}if("b"in a){var d=!0;++b}"h"in a&&++b;var e=0;if("l"in a){var f=!0;++e}if("r"in a){var g=!0;++e}"w"in a&&++e;2>b&&window.console.log("Cannot define rect, not enough vertical values",a);2>e&&window.console.log("Cannot define rect, not enough horizontal values",a);c?(b=a.t,c=d?a.b:b+a.h,d=c-b):(c=a.b,d=a.h,b=c-d);f?(f=a.l,g=g?a.r:f+a.w,a=g-f):(g=a.r,a=a.w,f=g-a);return new pearson.utils.Rect(f,b,a,d)};
goog.exportProperty(pearson.utils.Rect,"makeRect",pearson.utils.Rect.makeRect);pearson.utils.Size=function(a,b){this.height=a;this.width=b};goog.exportSymbol("pearson.utils.Size",pearson.utils.Size);pearson.utils.Size.matchRatioWithHeight=function(a,b){return{height:a,width:b.width*a/b.height}};goog.exportProperty(pearson.utils.Size,"matchRatioWithHeight",pearson.utils.Size.matchRatioWithHeight);pearson.utils.Size.matchRatioWithWidth=function(a,b){return{height:b.height*a/b.width,width:a}};
goog.exportProperty(pearson.utils.Size,"matchRatioWithWidth",pearson.utils.Size.matchRatioWithWidth);pearson.brix.IWidget=function(){};pearson.brix.IWidget.prototype.draw=function(a,b){};pearson.brix.IWidget.prototype.redraw=function(){};pearson.brix.IWidget.prototype.setScale=function(a,b){};pearson.brix.IWidget.prototype.lite=function(a){};pearson.brix.IWidget.prototype.xScale=function(a){};pearson.brix.IWidget.prototype.yScale=function(a){};
pearson.brix.SVGContainerConfig=function(){this.node=d3.select("html");this.maxHt=this.maxWid=0};pearson.brix.Bric=function(){};pearson.brix.HtmlBric=function(){pearson.brix.Bric.call(this)};goog.inherits(pearson.brix.HtmlBric,pearson.brix.Bric);pearson.brix.SvgBric=function(){pearson.brix.Bric.call(this)};goog.inherits(pearson.brix.SvgBric,pearson.brix.Bric);pearson.brix.SvgBric.prototype.draw=function(a,b){};
pearson.brix.SVGContainer=function(a){pearson.brix.Bric.call(this);this.parentNode=a.node;this.maxWid=a.maxWid;this.maxHt=a.maxHt;if(this.parentNode.empty())return alert("SVGContainer parent node doesn't exist."),null;this.svgObj=this.parentNode.append("svg").attr("viewBox","0 0 "+this.maxWid+" "+this.maxHt).attr("preserveAspectRatio","xMinYMin meet").style("max-width",this.maxWid+"px").style("max-height",this.maxHt+"px")};goog.inherits(pearson.brix.SVGContainer,pearson.brix.Bric);
goog.exportSymbol("pearson.brix.SVGContainer",pearson.brix.SVGContainer);pearson.brix.SVGContainer.prototype.append=function(a,b){if(Array.isArray(a))for(var c=0;c<a.length;++c)0<c&&a[c].setScale(a[0].xScale,a[0].yScale),this.append_one_(a[c],b);else this.append_one_(a,b)};goog.exportProperty(pearson.brix.SVGContainer.prototype,"append",pearson.brix.SVGContainer.prototype.append);
pearson.brix.SVGContainer.prototype.append_one_=function(a,b){void 0===b&&(b={topPercentOffset:0,leftPercentOffset:0,heightPercent:1,widthPercent:1});var c=this.svgObj.append("g").attr("class","widget"),d=d3.round(b.heightPercent*this.maxHt),e=d3.round(b.widthPercent*this.maxWid);a.draw(c,{height:d,width:e});d=d3.round(b.topPercentOffset*this.maxHt);e=d3.round(b.leftPercentOffset*this.maxWid);0===d&&0===e||c.attr("transform","translate("+e+","+d+")")};pearson.utils.IEventManager=function(){};pearson.utils.IEventManager.prototype.publish=function(a,b){};pearson.utils.IEventManager.prototype.subscribe=function(a,b){};pearson.utils.IEventManager.prototype.unsubscribe=function(a,b){};pearson.utils.IEventManager.dummyEventManager={publish:function(){},subscribe:function(){},unsubscribe:function(){}};pearson.utils.EventManager=function(a){this.events_={};this.publishToBroker_=void 0===a?!1:a};goog.exportSymbol("pearson.utils.EventManager",pearson.utils.EventManager);
pearson.utils.EventManager.prototype.enablePublishToBroker=function(a){this.publishToBroker_=a};goog.exportProperty(pearson.utils.EventManager.prototype,"enablePublishToBroker",pearson.utils.EventManager.prototype.enablePublishToBroker);
pearson.utils.EventManager.prototype.subscribe=function(a,b){a in this.events_||(this.events_[a]={handlers:[]});for(var c=this.events_[a],d=0,e=c.handlers.length;d<e;d++)if(c.handlers[d]===b)return;c.handlers.push(b);this.publishToBroker_&&(window.parent.postMessage({type:"message",method:"subscribe",payload:{topic:a}},"*"),window.console.log("["+location.href+"] EventManager: subscription of topic '"+a+"' propagated to MessageBroker"))};
goog.exportProperty(pearson.utils.EventManager.prototype,"subscribe",pearson.utils.EventManager.prototype.subscribe);
pearson.utils.EventManager.prototype.unsubscribe=function(a,b){var c=this.events_[a];if(c){for(var d=0,e=c.handlers.length;d<e;d++)c.handlers[d]===b&&(c.handlers.splice(d,1),d--,e--);this.publishToBroker_&&0==c.handlers.length&&(window.parent.postMessage({type:"message",method:"unsubscribe",payload:{topic:a}},"*"),window.console.log("["+location.href+"] EventManager: unsubscription of topic '"+a+"' propagated to MessageBroker"))}};
goog.exportProperty(pearson.utils.EventManager.prototype,"unsubscribe",pearson.utils.EventManager.prototype.unsubscribe);pearson.utils.EventManager.prototype.publishLocal_=function(a,b){if(a in this.events_)for(var c=this.events_[a],d=0;d<c.handlers.length;++d)(0,c.handlers[d])(b)};pearson.utils.EventManager.prototype.publish=function(a,b){this.publishLocal_(a,b);this.publishToBroker_&&window.parent.postMessage({type:"message",method:"publish",payload:{topic:a,message:b}},"*")};
goog.exportProperty(pearson.utils.EventManager.prototype,"publish",pearson.utils.EventManager.prototype.publish);pearson.utils.EventManager.prototype.listenBroker=function(){var a=this;window.addEventListener("message",function(b){b=b.data;var c=location.href;"message"===b.type&&"publish"===b.method&&(window.console.log("["+c+"] EventManager: Handling "+b.type+" message:"+JSON.stringify(b)),a.publishLocal_(b.payload.topic,b.payload.message))},!1)};
goog.exportProperty(pearson.utils.EventManager.prototype,"listenBroker",pearson.utils.EventManager.prototype.listenBroker);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.Sketch=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Sketch);this.drawShape=a.drawShape;this.type=a.type;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_sketchSelected";this.explicitScales_={xScale:null,yScale:null};this.lastdrawn={container:null,size:{height:0,width:0},sketchId:this.id+"_sketch",xScale:null,yScale:null}};goog.inherits(pearson.brix.Sketch,pearson.brix.SvgBric);
goog.exportSymbol("pearson.brix.Sketch",pearson.brix.Sketch);pearson.brix.Sketch.autoIdPrefix="skch_auto_";
pearson.brix.Sketch.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.lastdrawn.xScale=null!==this.explicitScales_.xScale?this.explicitScales_.xScale:d3.scale.linear().rangeRound([0,b.width]);this.lastdrawn.yScale=null!==this.explicitScales_.yScale?this.explicitScales_.yScale:d3.scale.linear().rangeRound([b.height,0]);var c=a.append("g").attr("id",this.lastdrawn.sketchId).attr("class","widgetSketch");c.append("defs").append("marker").attr("id","triangle").attr("viewBox",
"0 0 10 10").attr("refX","0").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","4").attr("markerHeight","3").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z");this.lastdrawn.widgetGroup=c;this.redraw()};goog.exportProperty(pearson.brix.Sketch.prototype,"draw",pearson.brix.Sketch.prototype.draw);pearson.brix.Sketch.prototype.setScale=function(a,b){this.explicitScales_.xScale=a;this.explicitScales_.yScale=b};
pearson.brix.Sketch.prototype.move=function(a,b,c,d){var e=this.lastdrawn.xScale,f=this.lastdrawn.yScale,g=this.lastdrawn.widgetGroup,h=g.selectAll("g.shape");h.selectAll("rect").transition().attr("x",function(b){b.xyPos[0]+=a;return e(b.xyPos[0])}).attr("y",function(a){a.xyPos[1]+=b;return f(a.xyPos[1])}).duration(c).delay(d);h.selectAll("circle").transition().attr("cx",function(b){b.xyPos[0]+=a;return e(b.xyPos[0])}).attr("cy",function(a){a.xyPos[1]+=b;return f(a.xyPos[1])}).duration(c).delay(d);
h.selectAll("polygon").transition().attr("points",function(c){c.xyPos[0]+=a;c.xyPos[1]+=b;var d;for(d=0;d<c.points.length;d++)c.points[d][0]+=a,c.points[d][1]+=b;return pearson.brix.Sketch.pointString(c.points,e,f)}).duration(c).delay(d);h.selectAll("polygon.wedge").each(function(a){if("hash"==a.type){var b=0.9;g.select("#"+a.maskid).selectAll("line").each(function(){d3.select(this).transition().attr("x1",function(){return e(a.xyPos[0]+b*a.length*Math.cos(a.angle)+a.width/2*Math.cos(a.angle+Math.PI/
2))}).attr("y1",function(){return f(a.xyPos[1]+b*a.length*Math.sin(a.angle)+a.width/2*Math.sin(a.angle+Math.PI/2))}).attr("x2",function(){return e(a.xyPos[0]+b*a.length*Math.cos(a.angle)+a.width/2*Math.cos(a.angle-Math.PI/2))}).attr("y2",function(){return f(a.xyPos[1]+b*a.length*Math.sin(a.angle)+a.width/2*Math.sin(a.angle-Math.PI/2))}).attr("stroke-width","4px").attr("stroke","white").attr("opacity",1).duration(c).delay(d);b-=0.33})}});h.selectAll("line").transition().attr("x1",function(b){b.xyPos[0]+=
a;return e(b.xyPos[0])}).attr("y1",function(a){a.xyPos[1]+=b;return f(a.xyPos[1])}).attr("x2",function(a){return e(a.length*Math.cos(a.angle)+a.xyPos[0])}).attr("y2",function(a){return f(a.length*Math.sin(a.angle)+a.xyPos[1])}).duration(c).delay(d);h.selectAll("text").transition().attr("x",function(b){b.xyPos[0]+=a;return e(b.xyPos[0])}).attr("y",function(a){a.xyPos[1]+=b;return f(a.xyPos[1])}).duration(c).delay(d);this.lastdrawn.drawCollection=g.selectAll("g.shape")};
goog.exportProperty(pearson.brix.Sketch.prototype,"move",pearson.brix.Sketch.prototype.move);
pearson.brix.Sketch.prototype.reflect=function(a,b,c,d){var e=this.lastdrawn.xScale,f=this.lastdrawn.yScale,g=this.lastdrawn.widgetGroup,h=g.selectAll("g.shape");h.selectAll("rect").transition().attr("x",function(b){null!=a&&(b.xyPos[0]=pearson.brix.Sketch.reflectValue(b.xyPos[0]+b.width/2,a)-b.width/2);return e(b.xyPos[0])}).attr("y",function(a){null!=b&&(a.xyPos[1]=pearson.brix.Sketch.reflectValue(a.xyPos[1]-a.height/2,b)+a.height/2);return f(a.xyPos[1])}).duration(c).delay(d);h.selectAll("circle").transition().attr("cx",
function(b){null!=a&&(b.xyPos[0]=pearson.brix.Sketch.reflectValue(b.xyPos[0],a));return e(b.xyPos[0])}).attr("cy",function(a){null!=b&&(a.xyPos[1]=pearson.brix.Sketch.reflectValue(a.xyPos[1],b));return f(a.xyPos[1])}).duration(c).delay(d);h.selectAll("polygon").transition().attr("points",function(c){null!=a&&(c.xyPos[0]=pearson.brix.Sketch.reflectValue(c.xyPos[0],a));null!=b&&(c.xyPos[1]=pearson.brix.Sketch.reflectValue(c.xyPos[1],b));var d;for(d=0;d<c.points.length;d++)null!=a&&(c.points[d][0]=pearson.brix.Sketch.reflectValue(c.points[d][0],
a)),null!=b&&(c.points[d][1]=pearson.brix.Sketch.reflectValue(c.points[d][1],b));return pearson.brix.Sketch.pointString(c.points,e,f)}).duration(c).delay(d);h.selectAll("polygon.wedge").each(function(h){null!=a&&(h.angle=pearson.brix.Sketch.reflectValue(h.angle,Math.PI/2));null!=b&&(h.angle=pearson.brix.Sketch.reflectValue(h.angle,Math.PI));if("hash"==h.type){var l=0.9;g.select("#"+h.maskid).selectAll("line").each(function(){d3.select(this).transition().attr("x1",function(){return e(h.xyPos[0]+l*
h.length*Math.cos(h.angle)+h.width/2*Math.cos(h.angle+Math.PI/2))}).attr("y1",function(){return f(h.xyPos[1]+l*h.length*Math.sin(h.angle)+h.width/2*Math.sin(h.angle+Math.PI/2))}).attr("x2",function(){return e(h.xyPos[0]+l*h.length*Math.cos(h.angle)+h.width/2*Math.cos(h.angle-Math.PI/2))}).attr("y2",function(){return f(h.xyPos[1]+l*h.length*Math.sin(h.angle)+h.width/2*Math.sin(h.angle-Math.PI/2))}).attr("stroke-width","4px").attr("stroke","white").attr("opacity",1).duration(c).delay(d);l-=0.33})}});
h.selectAll("line").transition().attr("x1",function(b){null!=a&&(b.xyPos[0]=pearson.brix.Sketch.reflectValue(b.xyPos[0],a));return e(b.xyPos[0])}).attr("y1",function(a){null!=b&&(a.xyPos[1]=pearson.brix.Sketch.reflectValue(a.xyPos[1],b));return f(a.xyPos[1])}).attr("x2",function(b){null!=a&&(b.angle=Math.PI-b.angle);return e(b.length*Math.cos(b.angle)+b.xyPos[0])}).attr("y2",function(a){null!=b&&(a.angle=2*Math.PI-a.angle);return f(a.length*Math.sin(a.angle)+a.xyPos[1])}).duration(c).delay(d);h.selectAll("text").transition().attr("x",
function(b){null!=a&&(b.xyPos[0]=pearson.brix.Sketch.reflectValue(b.xyPos[0],a));return e(b.xyPos[0])}).attr("y",function(a){null!=b&&(a.xyPos[1]=pearson.brix.Sketch.reflectValue(a.xyPos[1],b));return f(a.xyPos[1])}).duration(c).delay(d);this.lastdrawn.drawCollection=g.selectAll("g.shape")};goog.exportProperty(pearson.brix.Sketch.prototype,"reflect",pearson.brix.Sketch.prototype.reflect);
pearson.brix.Sketch.prototype.setOpacity=function(a,b,c){this.lastdrawn.widgetGroup.selectAll("g.shape").transition().style("opacity",a).duration(b).delay(c)};goog.exportProperty(pearson.brix.Sketch.prototype,"setOpacity",pearson.brix.Sketch.prototype.setOpacity);
pearson.brix.Sketch.prototype.setColor=function(a,b,c){var d=this.lastdrawn.widgetGroup,e=d.selectAll("g.shape");e.transition().style("stroke",a).duration(b).delay(c);e.selectAll("polygon.wedge").transition().style("fill",a).duration(b).delay(c);e.selectAll("text").transition().style("fill",a).duration(b).delay(c);this.lastdrawn.drawCollection=d.selectAll("g.shape")};goog.exportProperty(pearson.brix.Sketch.prototype,"setColor",pearson.brix.Sketch.prototype.setColor);
pearson.brix.Sketch.prototype.redraw=function(){var a=this.lastdrawn.widgetGroup,b=this,c=this.lastdrawn.xScale,d=this.lastdrawn.yScale,e=a.selectAll("g.shape").data(this.drawShape);e.enter().append("g").attr("class",function(a){return"shape fill"+("fill"in a?a.fill:"None")});e.exit().remove();"hot"==this.type&&e.classed("hot",!0);e.each(function(a,b){a.key="key"in a?a.key:b.toString()});var f=e.selectAll("rect").data(function(a,b){return"rectangle"==a.shape?a.data:[]});f.enter().append("rect");f.exit().remove();
f.attr("width",function(a){return c(a.width)}).attr("height",function(a){return d(0)-d(a.height)}).attr("x",function(a){return c(a.xyPos[0])}).attr("y",function(a){return d(a.xyPos[1])});f=e.selectAll("circle").data(function(a,b){return"circle"==a.shape?a.data:[]});f.enter().append("circle");f.exit().remove();f.attr("r",function(a){return Math.abs(c(a.radius)-c(0))}).attr("cx",function(a){return c(a.xyPos[0])}).attr("cy",function(a){return d(a.xyPos[1])});f=e.selectAll("polygon.hex").data(function(a){return"hexagon"==
a.shape?a.data:[]});f.enter().append("polygon").attr("class","hex");f.exit().remove();f.attr("points",function(a){a.points=pearson.brix.Sketch.createHexagon(a.xyPos[0],a.xyPos[1],a.side);return pearson.brix.Sketch.pointString(a.points,c,d)});f=e.selectAll("polygon.tri").data(function(a){return"triangle"==a.shape?a.data:[]});f.enter().append("polygon").attr("class","tri");f.exit().remove();f.attr("points",function(a){a.points=pearson.brix.Sketch.createTriangle(a.xyPos[0],a.xyPos[1],a.side);return pearson.brix.Sketch.pointString(a.points,
c,d)});f=e.selectAll("polygon.wedge").data(function(a){return"wedge"==a.shape?a.data:[]});f.enter().append("polygon").attr("class","wedge");f.exit().remove();f.attr("points",function(a){a.points=pearson.brix.Sketch.createWedge(a.xyPos[0],a.xyPos[1],a.width,a.length,a.angle);return pearson.brix.Sketch.pointString(a.points,c,d)}).style("fill","grey");var g=this.id,h=0;f.each(function(b){h++;if("hash"==b.type){var e=d3.select(this);e.style("stroke-width","0px");b.maskid=g+h.toString()+"hashmask";var f=
a.select("defs").append("mask").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id",b.maskid),k,m=0.9;for(k=0;3>k;k++)f.append("line").attr("x1",function(){return c(b.xyPos[0]+m*b.length*Math.cos(b.angle)+b.width/2*Math.cos(b.angle+Math.PI/2))}).attr("y1",function(){return d(b.xyPos[1]+m*b.length*Math.sin(b.angle)+b.width/2*Math.sin(b.angle+Math.PI/2))}).attr("x2",function(){return c(b.xyPos[0]+m*b.length*Math.cos(b.angle)+b.width/2*Math.cos(b.angle-Math.PI/2))}).attr("y2",function(){return d(b.xyPos[1]+
m*b.length*Math.sin(b.angle)+b.width/2*Math.sin(b.angle-Math.PI/2))}).attr("stroke-width","4px").attr("stroke","white").attr("opacity",1),m-=0.33;e.style("mask","url(#"+b.maskid+")")}});var k=e.selectAll("line").data(function(a){return"line"==a.shape?a.data:[]});k.enter().append("line");k.exit().remove();k.attr("x1",function(a){return c(a.xyPos[0])}).attr("y1",function(a){return d(a.xyPos[1])}).attr("x2",function(a){return c(a.length*Math.cos(a.angle)+a.xyPos[0])}).attr("y2",function(a){return d(a.length*
Math.sin(a.angle)+a.xyPos[1])});k.each(function(a,b){"vector"==a.type&&k.attr("marker-end","url(#triangle)")});d3.svg.line().x(function(a){return c(a.x)}).y(function(a){return d(a.y)});f=e.selectAll("path").data(function(a){return"path"==a.shape?a.data:[]});f.enter().append("path");f.exit().remove();f.attr("d",function(a){return a.d});f=e.selectAll("text").data(function(a){return"textBit"==a.shape?a.data:[]});f.enter().append("text");f.exit().remove();f.attr("x",function(a){return c(a.xyPos[0])}).attr("y",
function(a){return d(a.xyPos[1])}).each(function(a){var b=d3.select(this);a=pearson.brix.Sketch.splitOnNumbers(a.text);var c;for(c=1;c<a.length;c+=2)a[c-1]&&b.append("tspan").text(a[c-1]).attr("font-size","14px").attr("text-anchor","middle"),b.append("tspan").attr("baseline-shift","sub").text(a[c]).attr("font-size","10px").attr("text-anchor","middle");(a=a[a.length-1])&&b.append("tspan").text(a).attr("font-size","14px").attr("text-anchor","middle")});e.on("click",function(a,c){b.eventManager.publish(b.selectedEventId,
{selectKey:a.key})});this.lastdrawn.drawCollection=a.selectAll("g.shape")};goog.exportProperty(pearson.brix.Sketch.prototype,"redraw",pearson.brix.Sketch.prototype.redraw);pearson.brix.Sketch.createHexagon=function(a,b,c){var d=Math.PI/6,e=b+c*(0.5+Math.sin(d)),f=b+c/2,g=b-c/2;b-=c*(0.5+Math.sin(d));var h=a-c*Math.cos(d);c=a+c*Math.cos(d);return[[h,g],[a,b],[c,g],[c,f],[a,e],[h,f]]};
pearson.brix.Sketch.createTriangle=function(a,b,c){var d=Math.PI/3,e=a-c/2,f=a+c/2,g=b-c*Math.sin(d)/2;b+=c*Math.sin(d)/2;return[[e,g],[f,g],[a,b]]};pearson.brix.Sketch.createWedge=function(a,b,c,d,e){var f=d*Math.cos(e)+a;d=d*Math.sin(e)+b;var g=e+Math.PI/2;e=f+c/2*Math.cos(g);var h=d+c/2*Math.sin(g),f=f-c/2*Math.cos(g);c=d-c/2*Math.sin(g);return[[e,h],[a,b],[f,c]]};pearson.brix.Sketch.reflectValue=function(a,b){return b+(b-a)};
pearson.brix.Sketch.splitOnNumbers=function(a){"number"===typeof a&&(a=a.toString());var b=[],c=/([^0-9]*)([0-9]+)/g,d,e=c.lastIndex;for(d=c.exec(a);null!==d;d=c.exec(a))b.push(d[1],d[2]),e=c.lastIndex;b.push(a.slice(e));return b};pearson.brix.Sketch.pointString=function(a,b,c){var d=d3.format("2f"),e="",f;for(f=0;f<a.length;f++)e=e+d(b(a[f][0]))+","+d(c(a[f][1]))+" ";return e=e.substring(0,e.length-1)};
pearson.brix.Sketch.prototype.lite=function(a){window.console.log("TODO: Log fired Sketch Select "+a);this.lastdrawn.drawCollection.classed("lit",!1);var b=this.lastdrawn.drawCollection.filter(function(b,d){return b.key===a});b[0][0]?b.classed("lit",!0):window.console.log("No key '"+a+"' in Sketch group "+this.id)};/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.CheckGroup=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.CheckGroup);this.maxSelects=a.maxSelects;this.choices=a.choices;this.numberFormat=a.numberFormat||"none";this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_itemSelected";this.exceedSelectionEventId=this.id+"_exceedSelection";this.lastdrawn={container:null,widgetGroup:null,choiceSelected:null}};
goog.inherits(pearson.brix.CheckGroup,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.CheckGroup",pearson.brix.CheckGroup);pearson.brix.CheckGroup.autoIdPrefix="cg_auto_";
pearson.brix.CheckGroup.prototype.draw=function(a){this.lastdrawn.container=a;var b=this;a=a.append("div").attr("class","widgetCheckGroup").attr("id",this.id);var c=a.append("table").attr("class","questionTable").append("tbody").selectAll("tr").data(this.choices);c.enter().append("tr");var d=function(a,c){return b.id+"_btn"+c},e=c.append("td");if("none"!==this.numberFormat){var f=this.getChoiceNumberToDisplayFn_();e.text(function(a,b){return f(b)+") "})}e.append("input").attr("id",d).attr("type",
"checkbox").attr("name",this.id).attr("value",function(a){return a.answerKey});c.append("td").append("label").attr("for",d).text(function(a){return a.content});a.selectAll("div.widgetCheckGroup input[name='"+this.id+"']").on("click",function(a){var c=b.selectedInputs_()[0],d=c?c.length:0;c&&c.length>b.maxSelects?(b.eventManager.publish(b.exceedSelectionEventId,{max:b.maxSelects}),d3.event.preventDefault()):d3.event.target.checked?b.eventManager.publish(b.selectedEventId,{selectKey:a.answerKey,numSelected:d}):
b.eventManager.publish(b.selectedEventId,{unselectKey:a.answerKey,numSelected:d})});this.lastdrawn.widgetGroup=a};pearson.brix.CheckGroup.prototype.selectedInputs_=function(){return this.lastdrawn.widgetGroup.selectAll("div.widgetCheckGroup input[name='"+this.id+"']:checked")};pearson.brix.CheckGroup.prototype.selectedItems=function(){var a=this.selectedInputs_();return a.empty()?null:a.data()};
pearson.brix.CheckGroup.prototype.selectItemAtIndex=function(a){var b=this.selectedInputs_()[0],b=b?b.length:0;b>=this.maxSelects?this.eventManager.publish(this.exceedSelectionEventId,{max:this.maxSelects}):(a=this.lastdrawn.widgetGroup.selectAll("div.widgetCheckGroup input")[0][a],a.checked||(a.checked=!0,a=d3.select(a).datum(),this.eventManager.publish(this.selectedEventId,{selectKey:a.answerKey,numSelected:b})))};
pearson.brix.CheckGroup.prototype.unselectItemAtIndex=function(a){a=this.lastdrawn.widgetGroup.selectAll("div.widgetCheckGroup input")[0][a];a.checked&&(a.checked=!1,a=d3.select(a).datum(),this.eventManager.publish(this.selectedEventId,{unselectKey:a.answerKey}))};
pearson.brix.CheckGroup.prototype.getChoiceNumberToDisplayFn_=function(){var a={none:function(a){return""},"latin-upper":function(a){return String.fromCharCode(65+a)},"latin-lower":function(a){return String.fromCharCode(97+a)},number:function(a){return(a+1).toString()}};return this.numberFormat in a?a[this.numberFormat]:a.none};goog.object={};goog.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};goog.object.filter=function(a,b,c){var d={},e;for(e in a)b.call(c,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,b,c){var d={},e;for(e in a)d[e]=b.call(c,a[e],e,a);return d};goog.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1};goog.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0};
goog.object.getCount=function(a){var b=0,c;for(c in a)b++;return b};goog.object.getAnyKey=function(a){for(var b in a)return b};goog.object.getAnyValue=function(a){for(var b in a)return a[b]};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};goog.object.getValues=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};goog.object.getKeys=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};
goog.object.getValueByKeys=function(a,b){for(var c=goog.isArrayLike(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],goog.isDef(a));c++);return a};goog.object.containsKey=function(a,b){return b in a};goog.object.containsValue=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};goog.object.findKey=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d};goog.object.findValue=function(a,b,c){return(b=goog.object.findKey(a,b,c))&&a[b]};
goog.object.isEmpty=function(a){for(var b in a)return!1;return!0};goog.object.clear=function(a){for(var b in a)delete a[b]};goog.object.remove=function(a,b){var c;(c=b in a)&&delete a[b];return c};goog.object.add=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');goog.object.set(a,b,c)};goog.object.get=function(a,b,c){return b in a?a[b]:c};goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};
goog.object.clone=function(a){var b={},c;for(c in a)b[c]=a[c];return b};goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.object.unsafeClone(a[c]);return b}return a};goog.object.transpose=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)c=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};
goog.object.create=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};goog.object.createSet=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};
goog.object.createImmutableView=function(a){var b=a;Object.isFrozen&&!Object.isFrozen(a)&&(b=Object.create(a),Object.freeze(b));return b};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.test={};pearson.brix.test.extendActivityDb=function(a){goog.object.extend(pearson.brix.test.activities,a)};goog.exportSymbol("pearson.brix.test.extendActivityDb",pearson.brix.test.extendActivityDb);
pearson.brix.test.activities={louder:{question:"How high does it go?","001":{correctValue:11,score:1,response:"It's one louder."}},co2Decrease:{question:"What is the average seasonal decrease in CO2 concentration for these three years (high &minus; low)?","001":{correctValue:15.6,score:1,response:"For example, in 1972, the difference was 335.5 &minus; 318.77 = 16.73."}},co2Increase:{question:"What is the average seasonal increase in CO2 concentration for these three years (high &minus; low)?","001":{correctValue:17.3,
score:1,response:"For example, between 1972 and 1973, the difference was 336.95 &minus; 318.77 = 18.18."}},co2Yr:{question:"What is the average seasonal increase in CO2 concentration for these three years (high &minus; low)?","001":{correctValue:1.7,score:1,response:""}},bWarmA:{question:"Why is B (Atlantic) warmer than A (Pacific)",answer000:{content:"Because the gulf stream warms to water on the Atlantic coast",score:1,response:""},answer001:{content:"Because it's shallower",score:0,response:""},
answer002:{content:"Because it's deeper",score:0,response:""},answer003:{content:"Because it's saltier",score:0,response:""}},oceanRegion:{question:"Which region stands out as having either the lowest or the highest overall value for each of the data shown?",a01:{content:"Region A, upper Pacific Ocean",score:0,response:"While dissolved oxygen and nitrate are extremes, tempeature and salinity are ganged tightly with other values."},a02:{content:"Region B, upper Atlantic Ocean",score:1,response:"Temperature, salinity, and oxygen are all higher than the others for most depths, and nitrate is substantially lower."},
a03:{content:"Region C, equatorial Pacific Ocean",score:0,response:""},a04:{content:"Region D, lower Atlantic Ocean",score:0,response:""},a05:{content:"Region E, South Polar oceans",score:0,response:""}},cOxyE:{question:"Why does C (Pacific) have less oxygent than E (by the South Pole)?",answer000:{content:"It's colder",score:1,response:""},answer001:{content:"It's shallower",score:0,response:""},answer002:{content:"It's saltier",score:0,response:""},answer003:{content:"Air currents bring more oxygen to the South Pole",
score:0,response:""}},bSaltyA:{question:"Why is B (Atlantic) warmer than A (Pacific)",answer000:{content:"The gulf stream carries salt to the mid Atlantic",score:0,response:""},answer001:{content:"Minimal rainfall and a lot of evaporation occur in the Atlantic",score:1,response:"This area, the saltiest anywhere in the open ocean, is analogous to deserts on land, where little rainfall and a lot of evaporation occur. "},answer002:{content:"Because it's shallower than the Pacific",score:0,response:""},
answer003:{content:"Because it's more oxygenated",score:0,response:""}},cWarmE:{question:"In what month is the CO2 concentration usually the lowest?",answer000:{content:"Because it is more oxygenated",score:0,response:""},answer001:{content:"Because it is in the Pacific Ocean",score:0,response:""},answer002:{content:"Because the equator is exposed to more sunlight during the year",score:1,response:""},answer003:{content:"It is not warmer",score:0,response:""}},lowMonth:{question:"In what month is the CO2 concentration usually the lowest?",
answer000:{content:"August",score:1,response:"When plants are in leaf and performing photosynthesis, CO<sub>2</sub> drops."},answer001:{content:"May",score:0,response:"You're looking for the lowest concentration, which will occur at the end of the vegitation growth season."},answer002:{content:"January",score:0,response:"The concentration has little to do with the calendar."},answer003:{content:"June-July",score:0,response:"You are close, but read the graph more carefully."}},highMonth:{question:"In what month is the CO2 concentration usually the highest?",
answer000:{content:"August",score:0,response:"When plants are in leaf and performing photosynthesis, CO<sub>2</sub> drops."},answer001:{content:"May",score:1,response:"When plants are just starting their growth season, CO<sub>2</sub> is elevated."},answer002:{content:"January",score:0,response:"The concentration has little to do with the calendar."},answer003:{content:"June-July",score:0,response:"You are close, but read the graph more carefully."}},SanVan001:{question:"Why does it take less and less time to add each additional billion people to the planet?",
answer000:{content:"Because as the population increases, the absolute number of births increases even though the growth rate stays constant.",score:1,response:"Growth rate stays constant."},answer001:{content:"Because the growth rate increases as the population rises.",score:0,response:"Does the growth rate change with population size?"},answer002:{content:"Because the total fertility rate increases with population.",score:0,response:"This might happen, but is it necessarily true?"},answer003:{content:"Because social behaviors change and people decide to have more children.",
score:0,response:"This might happen, but is it necessarily true?"}},SanVan002:{question:"If a tree falls in the forest, and no one is there to hear it, does it make a sound?",answer000:{content:"True",score:1,response:"Very practical."},answer001:{content:"False",score:0,response:"Philosophically interesting, but not strictly true."}},SanVan003:{question:"It's important to rock. Set the volume to the appropriate level using the slider below.",answer000:{content:"0",score:0,response:"That's no way to rock."},
answer011:{content:"11",score:1,response:"It's one louder."}},SanVan004:{question:"How do you *know* she's a witch?",newt:{content:"Because she turned me into a newt.",score:0,response:"You're not a newt now."},nose:{content:"Because she has a long nose.",score:0,response:"Do not judge a witch by the length of their nose!"},floats:{content:"Because she floats on water.",score:1,response:"Witches are lighter than water."},daylight:{content:"Because she's afraid of daylight.",score:0,response:"I believe you are thinking of vampires."}},
ThrowTheBall:{question:"Set the initial velocity and angle of the throw such that the player makes the basket.",notright:{content:"",score:0,response:"That velocity and angle will miss the basket."},right:{content:"v<sub>i</sub> = 7.3, &theta; = 59&deg;",score:1,response:"Right on target."}},LabelsMC:{question:"Which of these is on top.",top:{content:"A",score:1,response:"Glad you know which end is up."},middle:{content:"B",score:0.5,response:"Try going all the way up."},bottom:{content:"C",score:0,
response:"You seem to be upside down."}},Resist1:{question:"What is the change in resistance for a wire of greater cross-section?",smaller:{content:"smaller resistance",score:1,response:"More area allows more room for electrons to move and pass charge."},greater:{content:"greater resistance",score:0,response:"More area allows more room for electrons to move and pass charge."},same:{content:"the same resistance",score:0,response:"More area allows more room for electrons to move and pass charge."}},
Resist2:{question:"What is the change in resistance for a wire of shorter length?",smaller:{content:"smaller resistance",score:1,response:"More length impedes electrons, making it harder to pass charge."},greater:{content:"greater resistance",score:0,response:"More length impedes electrons, making it harder to pass charge."},same:{content:"the same resistance",score:0,response:"More length impedes electrons, making it harder to pass charge."}},pop200:{question:"Based on the graph, what average population growth rate looks like the best predictor of population increases over the past 200 years",
answer000:{content:"0.5%",score:0,response:"That is not correct."},answer001:{content:"1.0%",score:1,response:"Good guess..."},answer002:{content:"1.5%",score:0,response:"That is not correct."},answer003:{content:"2.0%",score:0,response:"That is not correct."},answer004:{content:"2.5%",score:0,response:"That is not correct."}},"http://hub.paf.pearson.com/resources/sequences/123/nodes/1":{1:{content:"1",score:1,response:"There can be only 1"}}};/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.AnswerMan=function(){};goog.exportSymbol("pearson.brix.AnswerMan",pearson.brix.AnswerMan);pearson.brix.AnswerMan.prototype.submitAnswer=function(a,b,c){var d=pearson.brix.test.activities;a=a in d?d[a]:"activity not found";a=b in a?a[b]:"solution key not found";d=a.response;c?(b=c!=a.correctValue?0:1,a.content=c):b=a.score;c={submission:a.content,response:d};switch(b){case 1:c.score=1;break;case 0:c.score=0;break;case void 0:c.score=-1;break;default:c.score=2}return c};
goog.exportProperty(pearson.brix.AnswerMan.prototype,"submitAnswer",pearson.brix.AnswerMan.prototype.submitAnswer);/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.paf={};pearson.brix.SubmitManager=function(a,b){this.answerMan=b||new pearson.brix.AnswerMan;this.eventManager=a;this.requestsAwaitingResponse_={}};pearson.brix.SubmitManager.prototype.handleRequestsFrom=function(a){var b=this;this.eventManager.subscribe(a.submitScoreRequestEventId,function(a){b.handleScoreRequest_(a)})};goog.exportSymbol("pearson.brix.SubmitManager.prototype.handleRequestsFrom",pearson.brix.SubmitManager.prototype.handleRequestsFrom);
pearson.brix.SubmitManager.prototype.handleScoreRequest_=function(a){a={sequenceNodeId:a.questionId,answer:a.answerKey,value:a.submissionValue,responseCallback:a.responseCallback,requestDetails:a};void 0!==this.requestsAwaitingResponse_[a.sequenceNodeId]&&alert("there's already an outstanding submission request for the sequenceNode: "+a.sequenceNodeId);this.requestsAwaitingResponse_[a.sequenceNodeId]=a;this.submitForScoring_(a)};
pearson.brix.SubmitManager.prototype.submitForScoring_=function(a){var b=this.answerMan.submitAnswer(a.sequenceNodeId,a.answer,a.value),c=this.requestsAwaitingResponse_[a.sequenceNodeId];delete this.requestsAwaitingResponse_[a.sequenceNodeId];"function"===typeof c.responseCallback&&(b.submitDetails=c.requestDetails,c.responseCallback(b))};
pearson.brix.SubmitManager.appendResponseWithDefaultFormatting=function(a,b){var c={correct:{icon:"icon-ok-sign",answerPrefix:"Congratulations, your answer, ",answerSuffix:", is correct. ",responseClass:"alert-success"},incorrect:{icon:"icon-remove",answerPrefix:"Sorry, your answer, ",answerSuffix:", is not correct. ",responseClass:"alert-error"},partial:{icon:"icon-adjust",answerPrefix:"Your answer, ",answerSuffix:", is partially correct. ",responseClass:"alert-info"},unknown:{icon:"icon-adjust",
answerPrefix:"something has gone horribly awry - we can't score this answer.",responseClass:""}},d=["unknown","incorrect","correct","partial"],e="unknown";"number"===typeof b.score&&(e=d[b.score+1]);d="<i class='"+c[e].icon+"'></i> "+c[e].answerPrefix+(b.submission||"")+(c[e].answerSuffix||"")+" "+(b.response||"");a.append("div").attr("class",["alert",c[e].responseClass].join(" ")).html(d)};goog.exportSymbol("pearson.brix.SubmitManager.appendResponseWithDefaultFormatting",pearson.brix.SubmitManager.appendResponseWithDefaultFormatting);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.PieChart=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.PieChart);this.data=a.Data;this.explicitScales_={xScale:null,yScale:null};var c={type:"box",xPos:"left",yPos:"top",labels:this.getLegendLabels_()};this.legend=new pearson.brix.Legend(c,this.eventManager);this.childWidgets={beforeData:[],afterData:[]};this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_wedgeSelected";this.lastdrawn=
{container:null,size:{height:0,width:0},dataRect:new pearson.utils.Rect(0,0,0,0),wedgeId:"wedge",widgetGroup:null,axesR:null,axes:{group:null,dataRect:new pearson.utils.Rect(0,0,0,0)},xScale:null,yScale:null,wedges:null,graph:null}};goog.inherits(pearson.brix.PieChart,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.PieChart",pearson.brix.PieChart);pearson.brix.PieChart.autoIdPrefix="pie_auto_";
pearson.brix.PieChart.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.setLastdrawnScaleFns2ExplicitOrDefault_(b);var c=b.height>b.width?b.width/2-20:b.height/2-20,d=20+c;this.lastdrawn.axes.dataRect=new pearson.utils.Rect(0,0,2*d,2*d);this.lastdrawn.dataRect=this.lastdrawn.axes.dataRect;this.lastdrawn.axesR=c;var e=a.append("g").attr("class","bricPie").attr("id",this.id).attr("transform","translate("+2*d+",0)");this.lastdrawn.axes.group=e.append("g").attr("transform",
"translate("+-d+","+d+")");this.lastdrawn.axes.group.append("circle").attr("class","axis").attr("cx",0).attr("cy",0).attr("r",c);this.lastdrawn.widgetGroup=e;this.legend.draw(this.lastdrawn.widgetGroup,b);this.childWidgets.beforeData.forEach(this.drawWidget_,this);this.drawData_();this.childWidgets.afterData.forEach(this.drawWidget_,this)};goog.exportProperty(pearson.brix.PieChart.prototype,"draw",pearson.brix.PieChart.prototype.draw);
pearson.brix.PieChart.prototype.redraw=function(){this.childWidgets.beforeData.forEach(this.redrawWidget_,this);this.drawData_();this.legend.labels=this.getLegendLabels_();this.legend.redraw();this.childWidgets.afterData.forEach(this.redrawWidget_,this)};goog.exportProperty(pearson.brix.PieChart.prototype,"redraw",pearson.brix.PieChart.prototype.redraw);
pearson.brix.PieChart.prototype.drawWidget_=function(a){a.setScale(this.lastdrawn.xScale,this.lastdrawn.yScale);a.draw(this.lastdrawn.axes.group,this.lastdrawn.dataRect.getSize())};pearson.brix.PieChart.prototype.redrawWidget_=function(a){a.redraw()};pearson.brix.PieChart.prototype.getLegendLabels_=function(){var a=[];this.data.forEach(function(b,c){a[c]={content:b.y+" "+b.x+"%"}});return a};
pearson.brix.PieChart.prototype.setScale=function(a,b){this.explicitScales_.xScale=a;this.explicitScales_.yScale=b};
pearson.brix.PieChart.prototype.drawData_=function(){var a=this,b=this.lastdrawn.axes.group,c=0,d=this.data.length;this.data.forEach(function(a,b){c+=Math.abs(a.x)});100>c&&this.data.push({x:100-c,y:"white"});0>this.data[0].x&&(this.data[0].x=-this.data[0].x,this.data.reverse(),d=0);var e=d3.svg.arc().outerRadius(this.lastdrawn.axesR),f=d3.layout.pie().value(function(a){return a.x}).sort(null),f=b.selectAll("g.wedge").data(f(this.data));f.enter().append("g").attr("class",function(a,b){return"slice fill"+
(b==d?"White":b)});f.append("path").attr("d",e);f.exit().remove();f.each(function(a,b){a.key="key"in a?a.key:b.toString()});f.on("click",function(b,c){a.eventManager.publish(a.selectedEventId,{selectKey:b.key})});this.lastdrawn.wedges=b.selectAll("g.wedges")};
pearson.brix.PieChart.prototype.append=function(a,b){Array.isArray(a)?a.forEach(function(a){this.append_one_(a,b)},this):this.append_one_(a,b);if("before"===b&&null!=this.lastdrawn.container){var c=this.lastdrawn.container,d=this.lastdrawn.size,e=this.lastdrawn.axes;this.clearLastdrawn_();e.group.remove();this.draw(c,d)}};goog.exportProperty(pearson.brix.PieChart.prototype,"append",pearson.brix.PieChart.prototype.append);
pearson.brix.PieChart.prototype.append_one_=function(a,b){"before"===b?this.childWidgets.beforeData.push(a):(this.childWidgets.afterData.push(a),null!==this.lastdrawn.container&&this.drawWidget_(a))};
pearson.brix.PieChart.prototype.setLastdrawnScaleFns2ExplicitOrDefault_=function(a){this.lastdrawn.xScale=null!==this.explicitScales_.xScale?this.explicitScales_.xScale:d3.scale.linear().rangeRound([20,2*this.axesR]);this.lastdrawn.yScale=null!==this.explicitScales_.yScale?this.explicitScales_.yScale:d3.scale.linear().rangeRound([2*this.axesR,20])};
pearson.brix.PieChart.prototype.lite=function(a){window.console.log("TODO: log fired PieChart highlite "+a);var b=this.lastdrawn.wedges;b.classed("lit",!1);b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in pie chart "+this.id)};goog.exportProperty(pearson.brix.PieChart.prototype,"lite",pearson.brix.PieChart.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.MultipleChoiceQuestion=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.MultipleChoiceQuestion);this.questionId=a.questionId;this.question=a.question;var c=a.widgetConfig;c.id=this.id+"_wdgt";var d=a.choices;this.svgSize=a.svgSize;this.svgBaseBrix=a.svgBaseBrix;if(void 0===a.order||"randomized"===a.order)d=d.slice(0),pearson.utils.randomizeArray(d);c.choices=d;this.choiceWidget=new a.widget(c,b);this.submitButton=new pearson.brix.Button({id:this.id+
"_sbmtBtn",text:"Select an answer",enabled:!1},b);this.responses=[];this.eventManager=b;this.selectedEventId=this.choiceWidget.selectedEventId;this.submitScoreRequestEventId=this.id+"_submitAnswerRequest";b.subscribe(this.submitButton.pressedEventId,goog.bind(this.handleSubmitRequested_,this));b.subscribe(this.choiceWidget.selectedEventId,goog.bind(this.handleAnswerSelected_,this));this.lastdrawn={container:null,widgetGroup:null}};goog.inherits(pearson.brix.MultipleChoiceQuestion,pearson.brix.HtmlBric);
goog.exportSymbol("pearson.brix.MultipleChoiceQuestion",pearson.brix.MultipleChoiceQuestion);pearson.brix.MultipleChoiceQuestion.autoIdPrefix="mcQ_auto_";pearson.brix.MultipleChoiceQuestion.prototype.handleSubmitRequested_=function(){var a={question:this,questionId:this.questionId,answerKey:this.choiceWidget.selectedItem().answerKey,responseCallback:goog.bind(this.handleSubmitResponse_,this)};this.eventManager.publish(this.submitScoreRequestEventId,a)};
pearson.brix.MultipleChoiceQuestion.prototype.handleAnswerSelected_=function(){this.submitButton.setText("Submit Answer");this.submitButton.setEnabled(!0)};pearson.brix.MultipleChoiceQuestion.prototype.handleSubmitResponse_=function(a){this.responses.push(a);var b=this.lastdrawn.widgetGroup.select("div.responses");pearson.brix.SubmitManager.appendResponseWithDefaultFormatting(b,a)};
pearson.brix.MultipleChoiceQuestion.prototype.draw=function(a){this.lastdrawn.container=a;a=a.append("div").attr("class","brixMultipleChoiceQuestion").attr("id",this.id);a.append("p").attr("class","question").text(this.question);var b=a.append("div").attr("class","choices").attr("id",this.id+"_choice_id");Array.isArray(this.svgSize)?(b=new pearson.brix.SVGContainer({node:b,maxWid:this.svgSize[0],maxHt:this.svgSize[1]}),this.svgBaseBrix?(this.svgBaseBrix.append(this.choiceWidget),b.append(this.svgBaseBrix)):
b.append(this.choiceWidget)):this.choiceWidget.draw(b);a.append("div").attr("class","responses");b=a.append("div").attr("class","submit");this.submitButton.draw(b);this.lastdrawn.widgetGroup=a};goog.exportProperty(pearson.brix.MultipleChoiceQuestion.prototype,"draw",pearson.brix.MultipleChoiceQuestion.prototype.draw);pearson.brix.MultipleChoiceQuestion.prototype.selectedItem=function(){return this.choiceWidget.selectedItem()};
goog.exportProperty(pearson.brix.MultipleChoiceQuestion.prototype,"selectedItem",pearson.brix.MultipleChoiceQuestion.prototype.selectedItem);pearson.brix.MultipleChoiceQuestion.prototype.selectItemAtIndex=function(a){this.choiceWidget.selectItemAtIndex(a)};goog.exportProperty(pearson.brix.MultipleChoiceQuestion.prototype,"selectItemAtIndex",pearson.brix.MultipleChoiceQuestion.prototype.selectItemAtIndex);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.LabelSelector=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.LabelSelector);this.items=a.labels;this.layout=a.layout;this.itemMargin=a.itemMargin;this.type=a.type;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.labelItems=new pearson.brix.LabelGroup({id:this.id+"_labels",type:this.type,labels:[]},this.eventManager);this.selectedEventId=this.labelItems.selectedEventId;this.lastdrawn={container:null,size:{height:0,
width:0},widgetGroup:null}};goog.inherits(pearson.brix.LabelSelector,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.LabelSelector",pearson.brix.LabelSelector);pearson.brix.LabelSelector.autoIdPrefix="labSel_auto_";
pearson.brix.LabelSelector.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c=this.itemMargin,d=this.items.length,e=(b.width-20)/(d?d:1)-(c.left+c.right),f=this.labelItems.labels;this.items.forEach(function(a,d){f[d]={content:a,xyPos:[(10+c.left+d*(c.left+e+c.right))/b.width,1-c.top/b.height],width:e}});this.labelItems.draw(a,b);this.lastdrawn.widgetGroup=d3.select(this.id)};goog.exportProperty(pearson.brix.LabelSelector.prototype,"draw",pearson.brix.LabelSelector.prototype.draw);
pearson.brix.LabelSelector.prototype.redraw=function(){};goog.exportProperty(pearson.brix.LabelSelector.prototype,"redraw",pearson.brix.LabelSelector.prototype.redraw);pearson.brix.LabelSelector.prototype.selectItemAtIndex=function(a){this.labelItems.lite(a.toString());this.eventManager.publish(this.selectedEventId,{index:a,selectKey:a.toString()})};goog.exportProperty(pearson.brix.LabelSelector.prototype,"selectItemAtIndex",pearson.brix.LabelSelector.prototype.selectItemAtIndex);
pearson.brix.LabelSelector.prototype.itemKeyToIndex=function(a){for(var b=0;b<this.items.length;++b)if(this.items[b].key===a)return b;return null};goog.exportProperty(pearson.brix.LabelSelector.prototype,"itemKeyToIndex",pearson.brix.LabelSelector.prototype.itemKeyToIndex);pearson.brix.LabelSelector.prototype.assignMissingItemKeys_=function(){this.items.forEach(function(a,b){a.key||(a.key=b.toString())})};
pearson.brix.LabelSelector.prototype.lite=function(a){window.console.log("called Carousel.lite( "+a+" )");this.labelItems.lite(a)};goog.exportProperty(pearson.brix.LabelSelector.prototype,"lite",pearson.brix.LabelSelector.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.Image=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Image);this.URI=a.URI;this.caption=a.caption;this.preserveAspectRatio=a.preserveAspectRatio||"xMinYMin meet";this.actualSize=a.actualSize;this.key=a.key;this.childBrix=[];this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.explicitScales_={xScale:null,yScale:null};this.lastdrawn={container:null,size:{height:0,width:0},widgetGroup:null}};
goog.inherits(pearson.brix.Image,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.Image",pearson.brix.Image);pearson.brix.Image.autoIdPrefix="img_auto_";
pearson.brix.Image.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.lastdrawn.URI=this.URI;this.lastdrawn.caption=this.caption;this.setLastdrawnScaleFns2ExplicitOrDefault_(b);var c=a.append("g").attr("class","brixImage").attr("id",this.id);c.append("image").attr("xlink:href",this.URI).attr("preserveAspectRatio",this.preserveAspectRatio).attr("width",b.width).attr("height",b.height).append("desc").text(this.caption);c.append("rect").attr("class","highlight").attr("width",
b.width-6).attr("height",b.height-6).attr("stroke-width",6).attr("x",3).attr("y",3);this.lastdrawn.widgetGroup=c;this.childBrix.forEach(this.drawBric_,this)};goog.exportProperty(pearson.brix.Image.prototype,"draw",pearson.brix.Image.prototype.draw);pearson.brix.Image.prototype.redraw=function(){var a=this.lastdrawn.widgetGroup.select("image");a.attr("xlink:href",this.URI);a.select("desc").text(this.caption);this.childBrix.forEach(this.redrawBric_,this)};
goog.exportProperty(pearson.brix.Image.prototype,"redraw",pearson.brix.Image.prototype.redraw);pearson.brix.Image.prototype.drawBric_=function(a){a.setScale(this.lastdrawn.xScale,this.lastdrawn.yScale);a.draw(this.lastdrawn.widgetGroup,this.lastdrawn.size)};pearson.brix.Image.prototype.redrawBric_=function(a){a.redraw()};pearson.brix.Image.prototype.changeImage=function(a,b){a&&(this.URI=a);void 0!==b&&(this.caption=b)};goog.exportProperty(pearson.brix.Image.prototype,"changeImage",pearson.brix.Image.prototype.changeImage);
pearson.brix.Image.prototype.setScale=function(a,b){this.explicitScales_.xScale=a;this.explicitScales_.yScale=b};pearson.brix.Image.prototype.append=function(a){goog.isArray(a)?a.forEach(this.append_one_,this):this.append_one_(a)};goog.exportProperty(pearson.brix.Image.prototype,"append",pearson.brix.Image.prototype.append);pearson.brix.Image.prototype.append_one_=function(a){this.childBrix.push(a);null!==this.lastdrawn.container&&this.drawBric_(a)};
pearson.brix.Image.prototype.lite=function(a){this.lastdrawn.widgetGroup.classed("lit",a===this.key)};goog.exportProperty(pearson.brix.Image.prototype,"lite",pearson.brix.Image.prototype.lite);
pearson.brix.Image.prototype.setLastdrawnScaleFns2ExplicitOrDefault_=function(a){this.lastdrawn.xScale=null!==this.explicitScales_.xScale?this.explicitScales_.xScale:d3.scale.linear().rangeRound([0,a.width]);this.lastdrawn.yScale=null!==this.explicitScales_.yScale?this.explicitScales_.yScale:d3.scale.linear().rangeRound([a.height,0])};
pearson.brix.CaptionedImage=function(a,b){this.captioned_id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.CaptionedImage);a.id=this.captioned_id+"_base";pearson.brix.Image.call(this,a,b);this.captionPosition=a.captionPosition;this.captioned_lastdrawn={container:null,size:{height:0,width:0},widgetGroup:null,URI:null,caption:null}};goog.inherits(pearson.brix.CaptionedImage,pearson.brix.Image);goog.exportSymbol("pearson.brix.CaptionedImage",pearson.brix.CaptionedImage);
pearson.brix.CaptionedImage.autoIdPrefix="cimg_auto_";
pearson.brix.CaptionedImage.prototype.draw=function(a,b){this.captioned_lastdrawn.container=a;this.captioned_lastdrawn.size=b;this.captioned_lastdrawn.URI=this.URI;this.captioned_lastdrawn.caption=this.caption;var c=pearson.brix.utils.attrFnVal,d=a.append("g").attr("class","brixCaptionedImage").attr("transform",c("translate",10,0)).attr("id",this.captioned_id),e=b.width,f={height:d3.round(b.height-40),width:d3.round(b.width-20)},g=d.append("g");pearson.brix.CaptionedImage.superClass_.draw.call(this,
g,f);var h=d.append("g");h.append("foreignObject").attr("width",e).attr("height",40).append("xhtml:body").style("margin","0px").append("div").attr("class","brixCaption").html(this.caption);"above"===this.captionPosition?g.attr("transform",c("translate",0,40)):h.attr("transform",c("translate",0,f.height));this.captioned_lastdrawn.widgetGroup=d};goog.exportProperty(pearson.brix.CaptionedImage.prototype,"draw",pearson.brix.CaptionedImage.prototype.draw);
pearson.brix.CaptionedImage.prototype.redraw=function(){pearson.brix.CaptionedImage.superClass_.redraw.call(this);this.captioned_lastdrawn.widgetGroup.select("g body div").html(this.caption)};goog.exportProperty(pearson.brix.CaptionedImage.prototype,"redraw",pearson.brix.CaptionedImage.prototype.redraw);pearson.brix.CaptionedImage.prototype.changeImage=function(a,b){pearson.brix.CaptionedImage.superClass_.changeImage.call(this,a,b)};
goog.exportProperty(pearson.brix.CaptionedImage.prototype,"changeImage",pearson.brix.CaptionedImage.prototype.changeImage);pearson.brix.CaptionedImage.prototype.setScale=function(a,b){pearson.brix.CaptionedImage.superClass_.setScale.call(this,a,b)};pearson.brix.CaptionedImage.prototype.append=function(a){pearson.brix.CaptionedImage.superClass_.append.call(this,a)};goog.exportProperty(pearson.brix.CaptionedImage.prototype,"append",pearson.brix.CaptionedImage.prototype.append);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.LabelCarousel=function(a,b){pearson.brix.SvgBric.call(this);var c=this;this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.LabelCarousel);this.imagesInfo=a.images;this.assignMissingItemKeys_();var d={id:this.id+"_labels",labels:a.images.map(function(a){return a.selectorLabel||"&nbsp;"}),layout:"horizontal",type:"numbered",itemMargin:{top:0,bottom:0,left:2,right:2}};this.labelSelector=new pearson.brix.LabelSelector(d,b);this.image=new pearson.brix.CaptionedImage({id:this.id+"_cimg",
URI:this.imagesInfo[0].URI,caption:this.imagesInfo[0].caption,actualSize:a.imagesActualSize,captionPosition:"below"});this.eventManager=b;this.selectedEventId=this.labelSelector.selectedEventId;b.subscribe(this.labelSelector.selectedEventId,function(a){c.image.changeImage(c.imagesInfo[a.index].URI,c.imagesInfo[a.index].caption);c.image.redraw()});this.lastdrawn={container:null,size:{height:0,width:0},widgetGroup:null}};goog.inherits(pearson.brix.LabelCarousel,pearson.brix.SvgBric);
goog.exportSymbol("pearson.brix.LabelCarousel",pearson.brix.LabelCarousel);pearson.brix.LabelCarousel.autoIdPrefix="labCrsl_";
pearson.brix.LabelCarousel.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c=pearson.brix.utils.attrFnVal,d=a.append("g").attr("class","brixLabelCarousel").attr("id",this.id);d.append("rect").attr("class","background").attr("width",b.width).attr("height",b.height);var e=d.append("g");this.labelSelector.draw(e,{height:44,width:b.width});c=d.append("g").attr("transform",c("translate",0,54));this.image.draw(c,{height:b.height-44-10,width:b.width});this.lastdrawn.widgetGroup=
d;this.selectItemAtIndex(0)};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"draw",pearson.brix.LabelCarousel.prototype.draw);pearson.brix.LabelCarousel.prototype.redraw=function(){};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"redraw",pearson.brix.LabelCarousel.prototype.redraw);pearson.brix.LabelCarousel.prototype.selectedItem=function(){return{}};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"selectedItem",pearson.brix.LabelCarousel.prototype.selectedItem);
pearson.brix.LabelCarousel.prototype.selectItemAtIndex=function(a){this.labelSelector.selectItemAtIndex(a)};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"selectItemAtIndex",pearson.brix.LabelCarousel.prototype.selectItemAtIndex);pearson.brix.LabelCarousel.prototype.itemKeyToIndex=function(a){return this.labelSelector.itemKeyToIndex(a)};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"itemKeyToIndex",pearson.brix.LabelCarousel.prototype.itemKeyToIndex);
pearson.brix.LabelCarousel.prototype.assignMissingItemKeys_=function(){};pearson.brix.LabelCarousel.prototype.lite=function(a){window.console.log("called LabelCarousel.lite( "+a+" )");var b=this.itemKeyToIndex(a);null!==b&&this.selectItemAtIndex(b);this.labelSelector.lite(a)};goog.exportProperty(pearson.brix.LabelCarousel.prototype,"lite",pearson.brix.LabelCarousel.prototype.lite);pearson.brix.AnswerManPolling=function(){};goog.exportSymbol("pearson.brix.AnswerManPolling",pearson.brix.AnswerManPolling);pearson.brix.AnswerManPolling.prototype.submitAnswer=function(a,b,c){b in this.statData||(this.statData[b]=0);++this.statData[b];return{submission:b,feedback:"<div class='alert alert-success'><i class='icon-ok-sign'></i> OK "+b+" selected "+this.statData[b]+" times. </div>"}};goog.exportProperty(pearson.brix.AnswerManPolling.prototype,"submitAnswer",pearson.brix.AnswerManPolling.prototype.submitAnswer);
pearson.brix.AnswerManPolling.prototype.statData={};/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.Readout=function(a){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Readout);this.node=a.node;this.startVal=a.startVal;this.unit=a.unit;this.label=a.label;this.rootEl=this.node.append("span");this.rootEl.html(this.label?this.label:"").attr("role","label");this.rootEl.append("span").attr("class","dataLabel").attr("id",this.id).text(this.startVal);this.rootEl.append("span").html("&nbsp;"+(this.unit?this.unit:""));window.console.log("text is the startVal:",
d3.select("#"+this.id).text()==this.startVal,d3.select("#"+this.id).text())};goog.inherits(pearson.brix.Readout,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.Readout",pearson.brix.Readout);pearson.brix.Readout.autoIdPrefix="readout_auto_";pearson.brix.Readout.prototype.setValue=function(a){window.console.log("TODO: called setReadoutValue log",this.id,a);d3.select("#"+this.id).text(a)};pearson.brix.Readout.prototype.getValue=function(){return d3.select("#"+this.id).text()};
pearson.brix.NumericInput=function(a,b){pearson.brix.HtmlBric.call(this);this.id=a.id;this.node=a.node;this.startVal=a.startVal;var c=a.minVal,d=a.maxVal;this.unit=a.unit;this.label=a.label;this.changedValueEventId=this.id+"Number";this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.rootEl=this.node.append("span");this.rootEl.append("span").html(this.label?this.label:"").attr("role","label");this.rootEl.append("input").attr("type","number").attr("min",c).attr("max",d).attr("value",
this.startVal).attr("id",this.id).attr("class","dataLabel");this.rootEl.append("span").html(this.unit?this.unit:"");this.rootEl.on("change",function(){e.eventManager.publish(this.changedValueEventId,{value:d3.select("#"+this.id)[0][0].value})});var e=this;b.subscribe(this.changedValueEventId,function(a){e.setValue(a.value)})};goog.inherits(pearson.brix.NumericInput,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.NumericInput",pearson.brix.NumericInput);
pearson.brix.NumericInput.prototype.getValue=function(){return d3.select("#"+this.id)[0][0].value};pearson.brix.NumericInput.prototype.setValue=function(a){window.console.log("TODO: called setNumericInputValue log",this.id,a);d3.select("#"+this.id)[0][0].value=a};/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.AxisFormatOldDef=function(){this.type="linear";this.ticks=5;this.extent=[0,1];this.orientation="right";this.label="Labels can have extended chars (&mu;m)"};
pearson.brix.PrototypeAxes=function(a,b){this.id=b.id;this.container=a;this.xFmt=b.xAxisFormat;this.yFmt=b.yAxisFormat;"extent"in this.xFmt||(this.xFmt.extent=[1E-10,1]);"extent"in this.yFmt||(this.yFmt.extent=[0,1]);this.margin={top:10,bottom:0,left:10,right:20};var c=this.xFmt.ticks,d=this.yFmt.ticks,e=this.xFmt.orientation,f=this.yFmt.orientation,g="label"in this.yFmt;"label"in this.xFmt&&("top"==e?(this.margin.top+=40,window.console.log("top margin increased for top label")):this.margin.bottom+=
50);g&&("left"===f?(this.margin.left+=50,window.console.log("left margin increased for y label")):(this.margin.right+=40,window.console.log("right margin increased for y label")));var h=b.size.width-this.margin.left-this.margin.right,k=b.size.height-this.margin.top-this.margin.bottom;this.group=this.container.append("g").attr("id",this.id);if(this.xFmt.type){"ordinal"==this.yFmt.type&&(this.xFmt.extent.push(0),this.xFmt.extent=d3.extent(this.xFmt.extent));var l=Array.isArray(c)&&"ordinal"!=this.xFmt.type?
d3.extent(c):this.xFmt.extent;"ordinal"==this.xFmt.type&&(this.xScale=d3.scale.ordinal().domain(l).rangePoints([0,h],0.4));"linear"==this.xFmt.type&&("reverse"===this.xFmt.mode&&l.reverse(),this.xScale=d3.scale.linear().domain(l).rangeRound([0,h]));if("log"==this.xFmt.type){var t=Math.floor(Math.log(l[0])/Math.log(10)),u=Math.ceil(Math.log(l[1])/Math.log(10));this.xScale=d3.scale.log().domain([0.99*Math.pow(10,t),Math.pow(10,u)]).rangeRound([0,h])}"time"==this.xFmt.type&&(this.xScale=d3.time.scale().domain(l).rangeRound([0,
h]));if("double positive"==this.xFmt.type){this.xScale=d3.scale.linear().domain(l).rangeRound([0,h]);var q=[],m=[];Array.isArray(c)&&c.forEach(function(a){0>a?q.push(Math.abs(a)):m.push(a)});var v=d3.scale.linear().domain([Math.abs(l[0]),0]).rangeRound([0,this.xScale(0)]),w=d3.scale.linear().domain([0,l[1]]).rangeRound([this.xScale(0),h])}l=d3.format(".1");this.xAxis=d3.svg.axis().scale(this.xScale).orient(e).tickSize(10,0).tickPadding(3);"time"==this.xFmt.type?Array.isArray(c)?this.xAxis.ticks(d3.time.years):
this.xAxis.ticks(c):"log"==this.xFmt.type?(this.xAxis.tickFormat(pearson.brix.utils.logFormat),Array.isArray(c)?this.xAxis.tickValues(c):this.xAxis.ticks(c)):"double positive"==this.xFmt.type?(this.leftXAxis=d3.svg.axis().scale(v).orient(e).tickSize(10,0).tickPadding(3).tickFormat(l),this.xAxis=d3.svg.axis().scale(w).orient(e).tickSize(10,0).tickPadding(3).tickFormat(l),Array.isArray(c)?this.xAxis.tickValues(m)&&this.leftXAxis.tickValues(q):this.xAxis.ticks(c-2)&&this.leftXAxis.ticks(2)):Array.isArray(c)?
this.xAxis.tickValues(c):this.xAxis.ticks(c);this.xaxis=this.group.append("g").call(this.xAxis).attr("transform","translate(0,"+("bottom"==e?k:0)+")").attr("class","x axis");"double positive"==this.xFmt.type&&this.xaxis.append("g").call(this.leftXAxis).attr("transform","translate(0,"+("bottom"==e?k:0)+")").attr("class","x axis");if(this.xFmt.label){var r=this.xaxis.node().getBBox();this.xLabelObj=this.xaxis.append("foreignObject").attr("x",0).attr("y",("top"==e?-1.5:1)*(r.height+2)).attr("width",
h).attr("height",40);this.xLabelObj.append("xhtml:body").style("margin","0px").append("div").attr("class","axisLabel").html(this.xFmt.label)}d3.round(this.group.select(".x.axis").node().getBBox().height)}if(this.yFmt.type){if("ordinal"==this.yFmt.type)this.yScale=d3.scale.ordinal().domain(d).rangeRoundBands([k,0],0.4);else{0<this.yFmt.extent[0]&&(this.yFmt.extent[0]=0);var n=Array.isArray(d)?d3.extent(d):this.yFmt.extent;"linear"==this.yFmt.type&&("reverse"===this.yFmt.mode?n.reverse():null,this.yScale=
d3.scale.linear().domain(n).rangeRound([k,0]))}this.yAxis=d3.svg.axis().scale(this.yScale).orient(f).tickSize(10,0).tickPadding(3);Array.isArray(d)?this.yAxis.tickValues(d):this.yAxis.ticks(d);this.yaxis=this.group.append("g").attr("transform","translate("+("right"==f?h:0)+",0)").call(this.yAxis).attr("class","y axis");if(g){var s=this.yaxis.node().getBBox(),p=this.yaxis.append("foreignObject").attr("transform","translate("+(("left"==f?-1.1:1.1)*s.width+("left"==f?-20:0))+","+k+") rotate(-90)").attr("width",
k).attr("height",40);p.append("xhtml:body").style("margin","0px").append("div").attr("id","label"+this.id).attr("class","axisLabel").html(this.yFmt.label)}n=d3.round(this.group.select(".y.axis").node().getBBox().width)}d=this.group.node().getBBox();d.width>b.size.width&&(g=d3.round(d.width-b.size.width),g=g>n?g:n,"right"===f?this.margin.right+=g:this.margin.left+=g,h=h-this.margin.right-this.margin.left,"ordinal"==this.xFmt.type?this.xScale.rangePoints([0,h],0.4):this.xScale.rangeRound([0,h]),this.xAxis.scale(this.xScale),
window.console.log("x margins increased, new inner width is ",h," margin ",this.margin.left,this.margin.right),this.xaxis.call(this.xAxis),this.yaxis&&this.yaxis.attr("transform","translate("+("right"==f?h:0)+",0)"),this.xLabelObj&&this.xLabelObj.attr("y",d3.round(("top"==e?-1.4:1)*(r.height+5))).attr("width",h).attr("height",50));d.height>b.size.height&&(g=d3.round(d.height-b.size.height),"top"===e?this.margin.top+=g:this.margin.bottom+=g,k=k-this.margin.top-this.margin.bottom,"ordinal"==this.yFmt.type?
this.yScale.rangeRoundBands([k,0],0.3):this.yScale.rangeRound([k,0]),this.yAxis.scale(this.yScale),window.console.log("y margins increased, new inner height is ",k," margin: ",this.margin.top,this.margin.bottom),this.yaxis.call(this.yAxis),this.xaxis&&this.xaxis.attr("transform","translate(0,"+("bottom"==e?k:0)+")"),p&&p.attr("transform","translate("+d3.round(("left"==f?-1.1:1.1)*s.width+("left"==f?-19:0))+","+k+") rotate(-90)").attr("width",k));this.dataRect=pearson.utils.Rect.makeRect({t:this.margin.top,
l:this.margin.left,h:k,w:h});this.group.attr("transform","translate("+this.margin.left+","+this.margin.top+")")};goog.exportSymbol("pearson.brix.PrototypeAxes",pearson.brix.PrototypeAxes);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.Button=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Button);this.text_=a.text||"";this.enabled_=!1===a.enabled?!1:!0;this.eventManager=b;this.pressedEventId=this.id+"_Pressed";this.lastdrawn={container:null,widgetGroup:null}};goog.inherits(pearson.brix.Button,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.Button",pearson.brix.Button);
pearson.brix.Button.prototype.draw=function(a){this.lastdrawn.container=a;var b=this;a=a.append("div").attr("class","widgetButton").attr("id",this.id);a.append("button").attr("type","button").attr("disabled",this.enabled_?null:"disabled").text(this.text_).on("click",function(){b.eventManager.publish(b.pressedEventId)});this.lastdrawn.widgetGroup=a};goog.exportProperty(pearson.brix.Button.prototype,"draw",pearson.brix.Button.prototype.draw);
pearson.brix.Button.prototype.redraw=function(){this.lastdrawn.container.select("button").attr("disabled",this.enabled_?null:"disabled").text(this.text_)};goog.exportProperty(pearson.brix.Button.prototype,"redraw",pearson.brix.Button.prototype.redraw);pearson.brix.Button.prototype.setText=function(a){var b=this.text_!==a;this.text_=a;b&&this.lastdrawn.widgetGroup&&this.redraw()};goog.exportProperty(pearson.brix.Button.prototype,"setText",pearson.brix.Button.prototype.setText);
pearson.brix.Button.prototype.getText=function(){return this.text_};goog.exportProperty(pearson.brix.Button.prototype,"getText",pearson.brix.Button.prototype.getText);pearson.brix.Button.prototype.setEnabled=function(a){a=!0===a;var b=this.enabled_!==a;this.enabled_=a;b&&this.lastdrawn.widgetGroup&&this.redraw()};goog.exportProperty(pearson.brix.Button.prototype,"setEnabled",pearson.brix.Button.prototype.setEnabled);pearson.brix.Button.prototype.getEnabled=function(){return this.enabled_};
goog.exportProperty(pearson.brix.Button.prototype,"getEnabled",pearson.brix.Button.prototype.getEnabled);/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.callouts={};(function(){});pearson.brix.Callouts=function(a,b){this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Callouts);this.textBits=a.textBits;this.headers=a.headers;this.type=a.type;this.show=a.show;this.eventManager=b;this.selectedEventId=this.id+"_Callout"};goog.exportSymbol("pearson.brix.Callouts",pearson.brix.Callouts);pearson.brix.Callouts.autoIdPrefix="callout_";
pearson.brix.Callouts.prototype.draw=function(a){this.node=a;var b=this;this.rootEl=this.node.append("div").attr("id",this.id);a=this.rootEl.append("table").attr("class","widgetCallout");this.headers&&a.append("thead").append("tr").selectAll("td").data(this.headers).enter().append("td").html(function(a){return a});this.calloutCollection=a.append("tbody").selectAll("tr.widgetCallout").data(this.textBits);this.rows=this.calloutCollection.enter().append("tr").attr("class","widgetCallout");this.calloutCollection.each(function(a,
b){a.key="key"in a?a.key:b.toString()});this.rows.selectAll("td").data(function(a,b){return a.cols}).enter().append("td").html(function(a,d,e){d="";"numbered"==b.type&&(d='<span class="stepBadge">'+(e+1)+"</span>");return d+a});"all"!=this.show&&(this.calloutCollection.style("display","none"),d3.select("#"+b.id+(b.textBits[0].key?b.textBits[0].key:0)).style("display",null));window.console.log("Callouts made");this.calloutCollection.on("click",function(a,d){b.eventManager.publish(b.selectedEventId,
{selectKey:a.key})})};goog.exportProperty(pearson.brix.Callouts.prototype,"draw",pearson.brix.Callouts.prototype.draw);pearson.brix.Callouts.prototype.lite=function(a){window.console.log("TODO: log fired callout highlight/swap",a);var b=this.calloutCollection;b.classed("lit",!1);"all"!=this.show&&b.style("display","none");b=this.calloutCollection.filter(function(b,d){return b.key===a});b.style("display",null);b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in Labels group "+this.id)};
goog.exportProperty(pearson.brix.Callouts.prototype,"lite",pearson.brix.Callouts.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.BrixWorks={};pearson.brix.BricWorks=function(a,b){this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.bricCatalogue_={}};pearson.brix.BricWorks.prototype.registerMold=function(a,b){this.bricCatalogue_[a]=b};pearson.brix.BricWorks.prototype.createBric=function(a,b){return new this.bricCatalogue_[a](b,this.eventManager)};/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.BarChart=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.BarChart);this.data=a.Data;this.type=a.type;this.xAxisFormat=a.xAxisFormat;this.yAxisFormat=a.yAxisFormat;this.childBrix={beforeData:[],afterData:[]};this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_barSelected";this.sortedEventId=this.id+"_barSortChanged";this.lastdrawn={container:null,size:{height:0,width:0},dataRect:new pearson.utils.Rect(0,
0,0,0),axes:null,xScale:null,yScale:null,groupScale:null,bandsize:null,bars:null,graph:null}};goog.inherits(pearson.brix.BarChart,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.BarChart",pearson.brix.BarChart);pearson.brix.BarChart.autoIdPrefix="bar_auto_";
pearson.brix.BarChart.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c={id:this.id+"_axes",size:this.lastdrawn.size,xAxisFormat:this.xAxisFormat,yAxisFormat:this.yAxisFormat},d=d3.merge(this.data);c.xAxisFormat.extent=d3.extent(d,function(a){return a.x});c.yAxisFormat.extent=d3.extent(d,function(a){return a.y});if("ordinal"==c.xAxisFormat.type&&!Array.isArray(c.xAxisFormat.ticks)){var e=d3.set(d.map(function(a){return a.x}));c.xAxisFormat.ticks=e.values()}"ordinal"!=
c.yAxisFormat.type||Array.isArray(c.yAxisFormat.ticks)||(e=d3.set(d.map(function(a){return a.y})),c.yAxisFormat.ticks=e.values());this.lastdrawn.axes=new pearson.brix.PrototypeAxes(this.lastdrawn.container,c);this.lastdrawn.dataRect=this.lastdrawn.axes.dataRect;c=this.lastdrawn.axes;this.lastdrawn.xScale=c.xScale;this.lastdrawn.yScale=c.yScale;this.lastdrawn.barsId=this.id+"_bars";this.lastdrawn.bandsize=c.yScale.rangeBand();d=this.lastdrawn.bandsize;if("grouped"==this.type){for(var f=[],e=0;e<this.data.length;e++)f.push(e);
f=d3.scale.ordinal().domain(f).rangeRoundBands([d,0]);window.console.log("Grouped barChart last bar mapped to 0 offset: ",0==f(this.data.length-1))}this.childBrix.beforeData.forEach(this.drawBric_,this);c=c.group.append("g").attr("class","widgetBarChart").attr("id",this.id);this.lastdrawn.graph=c;this.lastdrawn.groupScale=f;this.drawData_();this.childBrix.afterData.forEach(this.drawBric_,this)};goog.exportProperty(pearson.brix.BarChart.prototype,"draw",pearson.brix.BarChart.prototype.draw);
pearson.brix.BarChart.prototype.redraw=function(){this.childBrix.beforeData.forEach(this.redrawBric_,this);this.drawData_();this.childBrix.afterData.forEach(this.redrawBric_,this)};goog.exportProperty(pearson.brix.BarChart.prototype,"redraw",pearson.brix.BarChart.prototype.redraw);pearson.brix.BarChart.prototype.drawBric_=function(a){a.setScale(this.lastdrawn.xScale,this.lastdrawn.yScale);a.draw(this.lastdrawn.axes.group,this.lastdrawn.dataRect.getSize())};
pearson.brix.BarChart.prototype.redrawBric_=function(a){a.redraw()};
pearson.brix.BarChart.prototype.drawData_=function(){var a=this.lastdrawn.xScale,b=this.lastdrawn.yScale,c=this.lastdrawn.bandsize,d=this.lastdrawn.groupScale,e=this,f=this.lastdrawn.graph,g=f.selectAll("g.series").data(this.data);g.enter().append("g").attr("class",function(a,b){return"series fill"+b});g.exit().remove();g.each(function(a,b){a.key="key"in a?a.key:b.toString()});"grouped"==this.type&&g.attr("transform",function(a,b){return"translate(0,"+d(b)+")"});g=g.selectAll("g.bar").data(function(a){return a});
g.exit().remove();g.enter().append("g").attr("class","bar").append("rect");g.attr("transform",function(c){var d=0>c.x||"reverse"===e.lastdrawn.axes.xFmt.mode?a(c.x):a(0);c=b(c.y);return"translate("+d+","+c+")"});g.select("rect").attr("height","grouped"==this.type?c/(this.data.length+1):c).attr("width",function(b){return Math.abs(a(0)-a(b.x))});g.on("click",function(a,b){e.eventManager.publish(e.selectedEventId,{selectKey:a.key})});this.lastdrawn.bars=f.selectAll("g.series")};
pearson.brix.BarChart.prototype.append=function(a,b){Array.isArray(a)?a.forEach(function(a){this.append_one_(a,b)},this):this.append_one_(a,b);if("before"===b&&null!=this.lastdrawn.container){var c=this.lastdrawn.container,d=this.lastdrawn.size,e=this.lastdrawn.axes;this.clearLastdrawn_();e.group.remove();this.draw(c,d)}};goog.exportProperty(pearson.brix.BarChart.prototype,"append",pearson.brix.BarChart.prototype.append);
pearson.brix.BarChart.prototype.append_one_=function(a,b){"before"===b?this.childBrix.beforeData.push(a):(this.childBrix.afterData.push(a),null!==this.lastdrawn.container&&this.drawBric_(a))};pearson.brix.BarChart.prototype.lite=function(a){window.console.log("TODO: log fired BarChart highlite "+a);var b=this.lastdrawn.bars;b.classed("lit",!1);b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in bar chart "+this.id)};
goog.exportProperty(pearson.brix.BarChart.prototype,"lite",pearson.brix.BarChart.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){d3.format(String.fromCharCode(8199)+">5.2f")});
pearson.brix.Slider=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Slider);this.startVal=a.startVal;this.minVal=a.minVal;this.maxVal=a.maxVal;this.stepVal=a.stepVal;this.unit=a.unit;this.label=a.label;this.format=a.format;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.changedValueEventId=this.id+"_valueChanged";this.lastdrawn={container:null,widgetGroup:null,value:null}};goog.inherits(pearson.brix.Slider,pearson.brix.HtmlBric);
goog.exportSymbol("pearson.brix.Slider",pearson.brix.Slider);pearson.brix.Slider.autoIdPrefix="sldr_auto_";
pearson.brix.Slider.prototype.draw=function(a){this.lastdrawn.container=a;var b=this;a=a.node();var c=$("<span class='readout'>"+this.format(this.startVal)+"</span>"),d=$("<span />").addClass("widgetSlider");$(a).append(d);d.append($("<span role='label' />").html(this.label?this.label:"")).append("&nbsp;&nbsp;&nbsp;").append(c).append($("<span class='range'/>").html(" &nbsp;&nbsp;&nbsp;"+this.minVal)).append($("<span class='slider' style='display:inline-block; min-width: 100px;' />").slider({max:this.maxVal,step:this.stepVal,
value:this.startVal,min:this.minVal,slide:function(a,d){var g=d.value;c.text(b.format(g));var h=b.lastdrawn.value;b.lastdrawn.value=g;b.eventManager.publish(b.changedValueEventId,{oldValue:h,newValue:g})}})).append($("<span class='range'/>").text(this.maxVal));this.lastdrawn.value=this.startVal;this.lastdrawn.widgetGroup=d.get(0)};goog.exportProperty(pearson.brix.Slider.prototype,"draw",pearson.brix.Slider.prototype.draw);pearson.brix.Slider.prototype.getValue=function(){return this.lastdrawn.value};
goog.exportProperty(pearson.brix.Slider.prototype,"getValue",pearson.brix.Slider.prototype.getValue);pearson.brix.Slider.prototype.setValue=function(a){var b=this.lastdrawn.value;if(a===b)return b;var c=$("span.slider",this.lastdrawn.widgetGroup),d=$("span.readout",this.lastdrawn.widgetGroup);this.lastdrawn.value=a;c.slider("value",a);d.text(this.format(a));return b};goog.exportProperty(pearson.brix.Slider.prototype,"setValue",pearson.brix.Slider.prototype.setValue);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.LineGraph=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.LineGraph);this.data=a.Data;this.type=a.type;this.xAxisFormat=a.xAxisFormat;this.yAxisFormat=a.yAxisFormat;this.childBrix={beforeData:[],afterData:[]};this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_lineSelected";this.lastdrawn={container:null,size:{height:0,width:0},dataRect:new pearson.utils.Rect(0,0,0,0),linesId:this.id+
"_lines",axes:null,xScale:null,yScale:null,graph:null,traces:null,series:null}};goog.inherits(pearson.brix.LineGraph,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.LineGraph",pearson.brix.LineGraph);pearson.brix.LineGraph.autoIdPrefix="lgrf_auto_";
pearson.brix.LineGraph.prototype.clearLastdrawn_=function(){this.lastdrawn.container=null;this.lastdrawn.size={height:0,width:0};this.lastdrawn.dataRect=new pearson.utils.Rect(0,0,0,0);this.lastdrawn.linesId=this.id+"_lines";this.lastdrawn.axes=null;this.lastdrawn.xScale=null;this.lastdrawn.yScale=null;this.lastdrawn.graph=null;this.lastdrawn.traces=null;this.lastdrawn.series=null};
pearson.brix.LineGraph.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c={id:this.id+"_axes",size:this.lastdrawn.size,xAxisFormat:this.xAxisFormat,yAxisFormat:this.yAxisFormat},d=d3.merge(this.data);c.xAxisFormat.extent=d3.extent(d,function(a){return a.x});c.yAxisFormat.extent=d3.extent(d,function(a){return a.y});if("ordinal"==c.xAxisFormat.type){var e=d3.set(d.map(function(a){return a.x}));c.xAxisFormat.extent=e.values();if(!Array.isArray(c.xAxisFormat.ticks)){for(var e=
c.xAxisFormat.extent.length,f=d3.round(e/(c.xAxisFormat.ticks-1)),g=[],h=0;h<e;)g.push(c.xAxisFormat.extent[h]),h+=f;g.push(c.xAxisFormat.extent[c.xAxisFormat.extent.length-1]);c.xAxisFormat.ticks=g}}"ordinal"!=c.yAxisFormat.type||Array.isArray(c.yAxisFormat.ticks)||(e=d3.set(d.map(function(a){return a.y})),c.yAxisFormat.ticks=e.values());"time"==c.xAxisFormat.type&&(Array.isArray(c.xAxisFormat.ticks)&&(c.xAxisFormat.ticks=c.xAxisFormat.ticks.map(function(a){return new Date(a)})),d=d3.set(d.map(function(a){return new Date(a.x)})).values(),
d=c.xAxisFormat.extent,c.xAxisFormat.extent=[new Date(d[0]),new Date(d[1])]);this.lastdrawn.axes=new pearson.brix.PrototypeAxes(this.lastdrawn.container,c);this.lastdrawn.dataRect=this.lastdrawn.axes.dataRect;c=this.lastdrawn.axes;this.lastdrawn.xScale=c.xScale;this.lastdrawn.yScale=c.yScale;e=this.lastdrawn.linesId;d=e+"_clip";this.childBrix.beforeData.forEach(this.drawBric_,this);e=c.group.append("g").attr("class","widgetLineGraph").attr("id",e);e.append("defs").append("clipPath").attr("id",d).append("rect").attr("width",
c.dataRect.width).attr("height",c.dataRect.height);this.lastdrawn.graph=e;this.drawData_();this.childBrix.afterData.forEach(this.drawBric_,this)};goog.exportProperty(pearson.brix.LineGraph.prototype,"draw",pearson.brix.LineGraph.prototype.draw);pearson.brix.LineGraph.prototype.redraw=function(){this.childBrix.beforeData.forEach(this.redrawBric_,this);this.drawData_();this.childBrix.afterData.forEach(this.redrawBric_,this)};goog.exportProperty(pearson.brix.LineGraph.prototype,"redraw",pearson.brix.LineGraph.prototype.redraw);
pearson.brix.LineGraph.prototype.drawBric_=function(a){a.setScale(this.lastdrawn.xScale,this.lastdrawn.yScale);a.draw(this.lastdrawn.axes.group,this.lastdrawn.dataRect.getSize())};pearson.brix.LineGraph.prototype.redrawBric_=function(a){a.redraw()};
pearson.brix.LineGraph.prototype.drawData_=function(){var a=this.lastdrawn.xScale,b=this.lastdrawn.yScale,c=this,d=this.lastdrawn.graph,e=this.lastdrawn.linesId+"_clip";if("lines"==this.type||"lines+points"==this.type){var f=d3.svg.line().interpolate("basis").x(function(b){return a("time"==c.xAxisFormat.type?new Date(b.x):b.x)}).y(function(a){return b(a.y)}),g=d.selectAll("g.traces").data(this.data);g.exit().remove();g.enter().append("g").attr("class",function(a,b){return"traces stroke"+b}).append("path").attr("clip-path",
"url(#"+e+")");g.select("path").attr("d",function(a){return f(a)});g.each(function(a,b){a.key="key"in a?a.key:b.toString()});this.lastdrawn.traces=d.selectAll("g.traces");g.on("click",function(a,b){c.eventManager.publish(c.selectedEventId,{selectKey:a.key})})}if("points"==this.type||"lines+points"==this.type)g=d.selectAll("g.series").data(this.data),g.exit().remove(),g.enter().append("g").attr("class",function(a,b){return"series fill"+b}).attr("clip-path","url(#"+e+")"),g.each(function(a,b){a.key=
"key"in a?a.key:b.toString()}),this.lastdrawn.series=d.selectAll("g.series"),d=g.selectAll("g.points").data(function(a){return a}),d.exit().remove(),d.enter().append("g").attr("class","points"),d.attr("transform",function(d){return"translate("+a("time"==c.xAxisFormat.type?new Date(d.x):d.x)+","+b(d.y)+")"}).append("path").attr("d",function(a,b,c){return d3.svg.symbol().type(d3.svg.symbolTypes[c])()}),g.on("click",function(a,b){c.eventManager.publish(c.selectedEventId,{selectKey:a.key})})};
pearson.brix.LineGraph.prototype.append=function(a,b){Array.isArray(a)?a.forEach(function(a){this.append_one_(a,b)},this):this.append_one_(a,b);if("before"===b&&null!=this.lastdrawn.container){var c=this.lastdrawn.container,d=this.lastdrawn.size,e=this.lastdrawn.axes;this.clearLastdrawn_();e.group.remove();this.draw(c,d)}};goog.exportProperty(pearson.brix.LineGraph.prototype,"append",pearson.brix.LineGraph.prototype.append);
pearson.brix.LineGraph.prototype.append_one_=function(a,b){"before"===b?this.childBrix.beforeData.push(a):(this.childBrix.afterData.push(a),null!==this.lastdrawn.container&&this.drawBric_(a))};pearson.brix.LineGraph.prototype.lite=function(a){window.console.log("TODO: log fired LineGraph highlite "+a);var b=this.lastdrawn.traces;b.classed("lit",!1);b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in line graph "+this.id)};
goog.exportProperty(pearson.brix.LineGraph.prototype,"lite",pearson.brix.LineGraph.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.MultiSelectQuestion=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.MultiSelectQuestion);this.questionId=a.questionId;this.question=a.question;this.maxSelects=a.maxSelects;var c=a.widgetConfig;c.id=this.id+"_wdgt";var d=a.choices;if(void 0===a.order||"randomized"===a.order)d=d.slice(0),pearson.utils.randomizeArray(d);c.choices=d;c.maxSelects=this.maxSelects;this.choiceWidget=new a.widget(c,b);this.buttonPromptText="Select an answer above";
this.buttonSubmitText="Submit Answer";this.submitButton=new pearson.brix.Button({id:this.id+"_sbmtBtn",text:this.buttonPromptText,enabled:!1},b);this.responses=[];this.eventManager=b;this.selectedEventId=this.choiceWidget.selectedEventId;this.submitScoreRequestEventId=this.id+"_submitAnswerRequest";b.subscribe(this.submitButton.pressedEventId,goog.bind(this.handleSubmitRequested_,this));b.subscribe(this.choiceWidget.selectedEventId,goog.bind(this.handleAnswerSelected_,this));b.subscribe(this.choiceWidget.exceedSelectionEventId,
goog.bind(this.handleExceedSelection_,this));this.lastdrawn={container:null,widgetGroup:null}};goog.inherits(pearson.brix.MultiSelectQuestion,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.MultiSelectQuestion",pearson.brix.MultiSelectQuestion);pearson.brix.MultiSelectQuestion.autoIdPrefix="msQ_auto_";
pearson.brix.MultiSelectQuestion.prototype.handleSubmitRequested_=function(){var a=this,b=[].map.call(this.choiceWidget.selectedItems(),function(a){return a.answerKey});this.eventManager.publish(this.submitScoreRequestEventId,{question:this,questionId:this.questionId,answerKey:b,responseCallback:function(b){a.handleSubmitResponse_(b)}})};
pearson.brix.MultiSelectQuestion.prototype.handleAnswerSelected_=function(a){0<a.numSelected?(this.submitButton.setText(this.buttonSubmitText),this.submitButton.setEnabled(!0)):(this.submitButton.setText(this.buttonPromptText),this.submitButton.setEnabled(!1))};pearson.brix.MultiSelectQuestion.prototype.handleExceedSelection_=function(){this.lastdrawn.widgetGroup.select("div.responses").append("div").html("Maximum number of options have been selected.")};
pearson.brix.MultiSelectQuestion.prototype.handleSubmitResponse_=function(a){this.responses.push(a);this.lastdrawn.widgetGroup.select("div.responses").append("div").html(a.feedback)};
pearson.brix.MultiSelectQuestion.prototype.draw=function(a){this.lastdrawn.container=a;a=a.append("div").attr("class","widgetMultiSelectQuestion widgetMultipleChoiceQuestion").attr("id",this.id);a.append("p").attr("class","question").text(this.question);var b=a.append("div").attr("class","choices");this.choiceWidget.draw(b);b=a.append("div").attr("class","submit");this.submitButton.draw(b);a.append("div").attr("class","responses");this.lastdrawn.widgetGroup=a};
goog.exportProperty(pearson.brix.MultiSelectQuestion.prototype,"draw",pearson.brix.MultiSelectQuestion.prototype.draw);pearson.brix.MultiSelectQuestion.prototype.selectedItems=function(){return this.choiceWidget.selectedItems()};goog.exportProperty(pearson.brix.MultiSelectQuestion.prototype,"selectedItems",pearson.brix.MultiSelectQuestion.prototype.selectedItems);pearson.brix.MultiSelectQuestion.prototype.selectItemAtIndex=function(a){this.choiceWidget.selectItemAtIndex(a)};
goog.exportProperty(pearson.brix.MultiSelectQuestion.prototype,"selectItemAtIndex",pearson.brix.MultiSelectQuestion.prototype.selectItemAtIndex);pearson.brix.MultiSelectQuestion.prototype.unselectItemAtIndex=function(a){this.choiceWidget.unselectItemAtIndex(a)};goog.exportProperty(pearson.brix.MultiSelectQuestion.prototype,"unselectItemAtIndex",pearson.brix.MultiSelectQuestion.prototype.unselectItemAtIndex);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){d3.format("5.1f")});
pearson.brix.NumericQuestion=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.NumericQuestion);this.questionId=a.questionId;this.question=a.question;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;var c=a.widgetConfig;c.id=this.id+"_wdgt";this.svgSize=a.svgSize;this.choiceWidget=new a.widget(c,this.eventManager);this.submitButton=new pearson.brix.Button({id:this.id+"_sbmtBtn",text:"Select an answer",enabled:!1},this.eventManager);
this.responses=[];this.selectedEventId=this.choiceWidget.selectedEventId;this.submitScoreRequestEventId=this.id+"_submitAnswerRequest";var d=this;b.subscribe(this.submitButton.pressedEventId,function(){d.handleSubmitRequested_()});b.subscribe(this.choiceWidget.changedValueEventId,function(){d.handleAnswerSelected_()});this.lastdrawn={container:null,widgetGroup:null}};goog.inherits(pearson.brix.NumericQuestion,pearson.brix.HtmlBric);goog.exportSymbol("pearson.brix.NumericQuestion",pearson.brix.NumericQuestion);
pearson.brix.NumericQuestion.autoIdPrefix="numQ_auto_";pearson.brix.NumericQuestion.prototype.handleSubmitRequested_=function(){var a=this,b={question:this,questionId:this.questionId,answerKey:"001",submissionValue:this.choiceWidget.selectedItem(),responseCallback:function(b){a.handleSubmitResponse_(b)}};this.eventManager.publish(this.submitScoreRequestEventId,b)};pearson.brix.NumericQuestion.prototype.handleAnswerSelected_=function(){this.submitButton.setText("Submit Answer");this.submitButton.setEnabled(!0)};
pearson.brix.NumericQuestion.prototype.handleSubmitResponse_=function(a){this.responses.push(a);var b=this.lastdrawn.widgetGroup.select("div.responses");pearson.brix.SubmitManager.appendResponseWithDefaultFormatting(b,a)};
pearson.brix.NumericQuestion.prototype.draw=function(a){this.lastdrawn.container=a;a=a.append("div").attr("class","widgetnumericquestion").attr("id",this.id);a.append("p").attr("class","question").html(this.question);var b=a.append("div").attr("class","choices").attr("id","choice_id");Array.isArray(this.svgSize)?(new pearson.brix.SVGContainer({node:d3.select("#choice_id"),maxWid:this.svgSize[0],maxHt:this.svgSize[1]})).append(this.choiceWidget):this.choiceWidget.draw(b);this.submitButton.draw(b);
a.append("div").attr("class","responses");this.lastdrawn.widgetGroup=a};goog.exportProperty(pearson.brix.NumericQuestion.prototype,"draw",pearson.brix.NumericQuestion.prototype.draw);pearson.brix.NumericQuestion.prototype.selectedItem=function(){return this.choiceWidget.selectedItem()};goog.exportProperty(pearson.brix.NumericQuestion.prototype,"selectedItem",pearson.brix.NumericQuestion.prototype.selectedItem);pearson.brix.NumericQuestion.prototype.selectItemAtIndex=function(a){this.choiceWidget.selectItemAtIndex(a)};
goog.exportProperty(pearson.brix.NumericQuestion.prototype,"selectItemAtIndex",pearson.brix.NumericQuestion.prototype.selectItemAtIndex);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.Carousel=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Carousel);this.items=a.items;this.assignMissingItemKeys_();this.layout=a.layout;this.itemMargin=a.itemMargin;this.presentation=a.presentation;this.scrollMode=a.scrollMode;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_itemSelected";this.lastdrawn={container:null,size:{height:0,width:0},widgetGroup:null}};
goog.inherits(pearson.brix.Carousel,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.Carousel",pearson.brix.Carousel);pearson.brix.Carousel.autoIdPrefix="crsl_auto_";
pearson.brix.Carousel.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c=pearson.brix.utils.attrFnVal,d=this,e=this.itemMargin,f=this.items.length,f=(b.width-20)/(f?f:1)-(e.left+e.right),g={height:f*(this.items[0].actualSize.height/this.items[0].actualSize.width),width:f},f=a.append("g").attr("class","widgetCarousel").attr("id",this.id);f.append("rect").attr("class","background").attr("width",b.width).attr("height",b.height);var h=f.selectAll("g.widgetItem").data(this.items),
k=(e.left+e.right)/2,l=(e.top+e.bottom)/2;h.enter().append("g").attr("class","widgetItem").each(function(a){a.draw(d3.select(this),g)}).append("rect").attr("class","selection").attr("width",g.width+k).attr("height",g.height+l).attr("stroke-width",1).attr("x",-k/2).attr("y",-l/2);h.attr("transform",function(a,b){return c("translate",10+e.left+b*(e.left+g.width+e.right),e.top)});h.on("click",function(a,b){d.selectItemAtIndex(b)});this.lastdrawn.widgetGroup=f};
goog.exportProperty(pearson.brix.Carousel.prototype,"draw",pearson.brix.Carousel.prototype.draw);pearson.brix.Carousel.prototype.redraw=function(){var a=this.widgetGroup.select("image");a.attr("xlink:href",this.URI);a.select("desc").text(this.caption)};goog.exportProperty(pearson.brix.Carousel.prototype,"redraw",pearson.brix.Carousel.prototype.redraw);pearson.brix.Carousel.prototype.selectedItem=function(){return this.lastdrawn.widgetGroup.select("g.widgetItem.selected").datum()};
goog.exportProperty(pearson.brix.Carousel.prototype,"selectedItem",pearson.brix.Carousel.prototype.selectedItem);pearson.brix.Carousel.prototype.selectItemAtIndex=function(a){var b=this.lastdrawn.widgetGroup.selectAll("g.widgetItem"),c=d3.select(b[0][a]);c.classed("selected")||(b.classed("selected",!1),c.classed("selected",!0),this.eventManager.publish(this.selectedEventId,{index:a,selectKey:c.datum().key}))};goog.exportProperty(pearson.brix.Carousel.prototype,"selectItemAtIndex",pearson.brix.Carousel.prototype.selectItemAtIndex);
pearson.brix.Carousel.prototype.itemKeyToIndex=function(a){for(var b=0;b<this.items.length;++b)if(this.items[b].key===a)return b;return null};goog.exportProperty(pearson.brix.Carousel.prototype,"itemKeyToIndex",pearson.brix.Carousel.prototype.itemKeyToIndex);
pearson.brix.Carousel.prototype.calcOptimumHeightForWidth=function(a){var b=this.items.length;return(a/(b?b:1)-(this.itemMargin.left+this.itemMargin.right))*(this.items[0].actualSize.height/this.items[0].actualSize.width)+this.itemMargin.top+this.itemMargin.bottom};goog.exportProperty(pearson.brix.Carousel.prototype,"calcOptimumHeightForWidth",pearson.brix.Carousel.prototype.calcOptimumHeightForWidth);
pearson.brix.Carousel.prototype.assignMissingItemKeys_=function(){this.items.forEach(function(a,b){a.key||(a.key=b.toString())})};pearson.brix.Carousel.prototype.lite=function(a){window.console.log("called Carousel.lite( "+a+" )");this.items.forEach(function(b){b.lite(a)})};goog.exportProperty(pearson.brix.Carousel.prototype,"lite",pearson.brix.Carousel.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.MarkerGroup=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.MarkerGroup);this.marks=a.marks;this.type=a.type;this.mode=a.mode;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_markerSelected";this.explicitScales_={xScale:null,yScale:null,axisType:null};this.lastdrawn={container:null,size:{height:0,width:0},markerGroup:null,xScale:null,yScale:null,axisType:null,markerCollection:null}};
goog.inherits(pearson.brix.MarkerGroup,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.MarkerGroup",pearson.brix.MarkerGroup);pearson.brix.MarkerGroup.autoIdPrefix="marker_auto_";pearson.brix.MarkerGroup.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.setLastdrawnScaleFns2ExplicitOrDefault_(b);var c=a.append("g").attr("class","bricMarkers").attr("id",this.id);this.lastdrawn.markerGroup=c;this.drawData_()};
goog.exportProperty(pearson.brix.MarkerGroup.prototype,"draw",pearson.brix.MarkerGroup.prototype.draw);pearson.brix.MarkerGroup.prototype.redraw=function(){this.drawData_()};
pearson.brix.MarkerGroup.prototype.drawData_=function(){var a=this.lastdrawn.size,b=this.lastdrawn.xScale,c=this.lastdrawn.markerGroup,d=this,e=d3.round(0.25*a.height),f=a.width/(this.marks.length+1),g=c.selectAll("g.marker").data(this.marks);g.enter().append("g").attr("class","marker");g.exit().remove();g.attr("transform",function(a){var b=d3.round(d.lastdrawn.xScale("y"===d.type?0:"time"==d.axisType?new Date(a.x):a.x));a=d3.round("y"===d.type?d.lastdrawn.yScale(a.y):0);return pearson.brix.utils.attrFnVal("translate",
b,a)});g.append("line").attr("class","markers").attr("x1",0).attr("x2","y"===this.type?a.width:0).attr("y1",0).attr("y2","y"===this.type?0:a.height);g.append("circle").attr("cx",function(b){return b.x?d3.round(d.lastdrawn.xScale("y"===d.type?"time"==d.axisType?new Date(b.x):b.x:0)):-a.width}).attr("cy",function(b){return b.y?d3.round(d.lastdrawn.yScale("y"===d.type?0:b.y)):-a.height}).attr("r",6);g.append("polygon").attr("points","y"===this.type?"8,-8 8,8 -8,0":"-8, -8 8, -8 0,6");g.append("rect").attr("width",
f).attr("height",e).attr("y",-e-8+1).attr("x",-8);g.append("foreignObject").attr("x","y"===this.type?a.width:-8).attr("y","y"===this.type?0:-e-5).attr("width",f).attr("height",e).append("xhtml:body").style("margin","2px").append("div").attr("class","markerLabel").html(function(a,b){return("x"in a?"x: "+("time"==d.axisType?d3.time.format("%b %Y")(new Date(a.x)):a.x)+"<br>":"")+("y"in a?"y: "+a.y+"<br>":"")+("label"in a?a.label:"")});g.each(function(a,b){a.key="key"in a?a.key:b.toString()});"drags"==
this.mode&&(e=d3.behavior.drag().on("drag",function(a,c){var e=b.invert(d3.event.x);a.x="time"==d.axisType?e.toString():d3.round(e,2);d.redraw()}).on("dragend",function(a,b){window.console.log("TODO: log fired marker "+a.key+" to position "+a.x)}),g.call(e));g.on("click",function(a,b){d.eventManager.publish(d.selectedEventId,{selectKey:a.key});d.lite(a.key)});this.lastdrawn.markerCollection=c.selectAll("g.marker")};
pearson.brix.MarkerGroup.prototype.setScale=function(a,b){this.explicitScales_.xScale=a;this.axisType=a.domain()[0]instanceof Date?"time":"linear";this.explicitScales_.yScale=b};pearson.brix.MarkerGroup.prototype.lite=function(a){window.console.log("TODO: log fired marker highlite "+a);var b=this.lastdrawn.markerCollection;b.classed("lit",!1);b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in MarkerGroup "+this.id)};
pearson.brix.MarkerGroup.prototype.setLastdrawnScaleFns2ExplicitOrDefault_=function(a){null!==this.explicitScales_.xScale?(this.lastdrawn.xScale=this.explicitScales_.xScale,this.lastdrawn.axisType=this.explicitScales_.xScale.scale):this.lastdrawn.xScale=d3.scale.linear().rangeRound([0,a.width]);this.lastdrawn.yScale=null!==this.explicitScales_.yScale?this.explicitScales_.yScale:d3.scale.linear().rangeRound([a.height,0])};
pearson.brix.MarkerGroup.prototype.setOpacity=function(a,b,c){this.lastdrawn.markerCollection.transition().style("opacity",a).duration(b).delay(c)};pearson.brix.MarkerGroup.prototype.snapTo=function(a,b){return d3.scale.quantize().domain(b).range(a)};/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.ImageViewer=function(a,b){pearson.brix.SvgBric.call(this);var c=this;this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.ImageViewer);this.items=a.items;this.assignMissingItemKeys_();this.carousel=new pearson.brix.Carousel({id:this.id+"_crsl",items:this.items,layout:"horizontal",itemMargin:{top:6,bottom:6,left:6,right:6},presentation:"scaleToFit",scrollMode:"nowrap"},b);this.image=new pearson.brix.CaptionedImage({id:this.id+"_cimg",URI:this.items[0].URI,caption:this.items[0].caption,preserveAspectRatio:this.items[0].preserveAspectRatio,
actualSize:this.items[0].actualSize,captionPosition:"below"});this.eventManager=b;this.selectedEventId=this.carousel.selectedEventId;b.subscribe(this.carousel.selectedEventId,function(a){c.image.changeImage(c.carousel.selectedItem().URI,c.carousel.selectedItem().caption);c.image.redraw()});this.lastdrawn={container:null,size:{height:0,width:0},widgetGroup:null}};goog.inherits(pearson.brix.ImageViewer,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.ImageViewer",pearson.brix.ImageViewer);
pearson.brix.ImageViewer.autoIdPrefix="imgvwr_auto_";
pearson.brix.ImageViewer.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;var c=pearson.brix.utils.attrFnVal,d=a.append("g").attr("class","brixImageViewer").attr("id",this.id);d.append("rect").attr("class","background").attr("width",b.width).attr("height",b.height);var e=this.carousel.calcOptimumHeightForWidth(b.width),f=d.append("g");this.carousel.draw(f,{height:e,width:b.width});c=d.append("g").attr("transform",c("translate",0,e+10));this.image.draw(c,{height:b.height-
e-10,width:b.width});this.lastdrawn.widgetGroup=d;this.selectItemAtIndex(0)};goog.exportProperty(pearson.brix.ImageViewer.prototype,"draw",pearson.brix.ImageViewer.prototype.draw);pearson.brix.ImageViewer.prototype.redraw=function(){};goog.exportProperty(pearson.brix.ImageViewer.prototype,"redraw",pearson.brix.ImageViewer.prototype.redraw);pearson.brix.ImageViewer.prototype.selectedItem=function(){return this.carousel.selectedItem()};
goog.exportProperty(pearson.brix.ImageViewer.prototype,"selectedItem",pearson.brix.ImageViewer.prototype.selectedItem);pearson.brix.ImageViewer.prototype.selectItemAtIndex=function(a){this.carousel.selectItemAtIndex(a)};goog.exportProperty(pearson.brix.ImageViewer.prototype,"selectItemAtIndex",pearson.brix.ImageViewer.prototype.selectItemAtIndex);pearson.brix.ImageViewer.prototype.itemKeyToIndex=function(a){return this.carousel.itemKeyToIndex(a)};
goog.exportProperty(pearson.brix.ImageViewer.prototype,"itemKeyToIndex",pearson.brix.ImageViewer.prototype.itemKeyToIndex);pearson.brix.ImageViewer.prototype.assignMissingItemKeys_=function(){this.items.forEach(function(a,b){a.key||(a.key=b.toString())})};pearson.brix.ImageViewer.prototype.lite=function(a){window.console.log("called ImageViewer.lite( "+a+" )");var b=this.itemKeyToIndex(a);null!==b&&this.selectItemAtIndex(b);this.carousel.lite(a)};
goog.exportProperty(pearson.brix.ImageViewer.prototype,"lite",pearson.brix.ImageViewer.prototype.lite);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.RadioGroup=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.RadioGroup);this.choices=a.choices;this.numberFormat=a.numberFormat||"none";this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_itemSelected";this.lastdrawn={container:null,widgetGroup:null,choiceSelected:null}};goog.inherits(pearson.brix.RadioGroup,pearson.brix.HtmlBric);
goog.exportSymbol("pearson.brix.RadioGroup",pearson.brix.RadioGroup);pearson.brix.RadioGroup.autoIdPrefix="rg_auto_";
pearson.brix.RadioGroup.prototype.draw=function(a){this.lastdrawn.container=a;var b=this;a=a.append("div").attr("class","widgetRadioGroup").attr("id",this.id);var c=a.append("table").attr("class","questionTable").append("tbody").selectAll("tr").data(this.choices);c.enter().append("tr");var d=function(a,c){return b.id+"_btn"+c},e=c.append("td");if("none"!==this.numberFormat){var f=this.getChoiceNumberToDisplayFn_();e.text(function(a,b){return f(b)+") "})}e.append("input").attr("id",d).attr("type",
"radio").attr("name",this.id).attr("value",function(a){return a.answerKey});c.append("td").append("label").attr("for",d).text(function(a){return a.content});a.selectAll("div.widgetRadioGroup input[name='"+this.id+"']").on("change",function(a){b.eventManager.publish(b.selectedEventId,{selectKey:a.answerKey})});this.lastdrawn.widgetGroup=a};goog.exportProperty(pearson.brix.RadioGroup.prototype,"draw",pearson.brix.RadioGroup.prototype.draw);
pearson.brix.RadioGroup.prototype.selectedItem=function(){var a=this.lastdrawn.widgetGroup.select("div.widgetRadioGroup input[name='"+this.id+"']:checked");return a.empty()?null:a.datum()};goog.exportProperty(pearson.brix.RadioGroup.prototype,"selectedItem",pearson.brix.RadioGroup.prototype.selectedItem);
pearson.brix.RadioGroup.prototype.selectItemAtIndex=function(a){a=this.lastdrawn.widgetGroup.selectAll("div.widgetRadioGroup input")[0][a];a.checked||(a.checked=!0,a=d3.select(a).datum(),this.eventManager.publish(this.selectedEventId,{selectKey:a.answerKey}))};goog.exportProperty(pearson.brix.RadioGroup.prototype,"selectItemAtIndex",pearson.brix.RadioGroup.prototype.selectItemAtIndex);
pearson.brix.RadioGroup.prototype.getChoiceNumberToDisplayFn_=function(){var a={none:function(a){return""},"latin-upper":function(a){return String.fromCharCode(65+a)},"latin-lower":function(a){return String.fromCharCode(97+a)},number:function(a){return(a+1).toString()}};return this.numberFormat in a?a[this.numberFormat]:a.none};/*
 (c) 2013 Pearson, All rights reserved.

*/
pearson.brix.legend={};(function(){});pearson.brix.Legend=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.Legend);this.labels=a.labels;this.type=a.type;this.xPos=a.xPos;this.yPos=a.yPos;this.key=a.key;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_legendSelected";this.lastdrawn={container:null,size:{height:0,width:0},legendId:"legend",legendRows:null}};
goog.inherits(pearson.brix.Legend,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.Legend",pearson.brix.Legend);pearson.brix.Legend.autoIdPrefix="lgnd_auto_";
pearson.brix.Legend.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.lastdrawn.legendId=this.id+"_legend";var c=21*this.labels.length,d=this.labels.reduce(function(a,b){return a.content.length>b.content.length?a:b}).content,e=a.append("g");e.append("text").text(d);this.boxWid=e.node().getBBox().width+5+15+10;e.remove();d="left"==this.xPos?10:b.width-this.boxWid-10;e="bottom"==this.yPos?b.height-c-10:10;this.legendBox=a.append("g").attr("class","widgetLegend").attr("id",
this.id).attr("transform","translate("+d+","+e+")");this.legendBox.append("rect").attr("x",-5).attr("y",-5).attr("width",this.boxWid).attr("height",c).attr("class","legendBox");this.drawData_()};goog.exportProperty(pearson.brix.Legend.prototype,"draw",pearson.brix.Legend.prototype.draw);pearson.brix.Legend.prototype.redraw=function(){this.drawData_()};goog.exportProperty(pearson.brix.Legend.prototype,"redraw",pearson.brix.Legend.prototype.redraw);
pearson.brix.Legend.prototype.drawData_=function(){var a=this,b=this.labels.length,c="box"==this.type?"rect":"line",d=this.legendBox.selectAll("g.legend").data(this.labels);d.exit().remove();var e=d.enter().append("g").attr("class","legend");e.append(c);e.append("text");e.on("click",function(b,c){a.eventManager.publish(a.selectedEventId,{selectKey:b.key})});d.each(function(a,b){a.key="key"in a?a.key:b.toString()});d.attr("transform",function(a,c){return"translate(0,"+19*(b-c-1)+")"});"box"==this.type?
d.select("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("class",function(a,b){return"fill"+b}):d.select("line").attr("class",function(a,b){return"traces stroke"+b}).attr("x1",0).attr("x2",15).attr("y1",7.5).attr("y2",7.5);d.select("text").attr("text-anchor","start").attr("class","legendLabel").attr("dx",19).attr("dy",7.5).attr("alignment-baseline","central").text(function(a,b){return a.content});this.lastdrawn.legendRows=this.legendBox.selectAll("g.legend")};
pearson.brix.Legend.prototype.setScale=function(a,b){};pearson.brix.Legend.prototype.lite=function(a){window.console.log("TODO: log fired Legend highlite "+a);var b=this.lastdrawn.legendRows;b.classed("lit",!1);b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0);b.empty()&&window.console.log("No key '"+a+"' in legend "+this.id)};/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});pearson.brix.SelectGroup=function(a,b){pearson.brix.HtmlBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.SelectGroup);this.choices=a.choices;this.question=a.question;this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_option";this.lastdrawn={container:null,widgetGroup:null,options:null,choiceSelected:null}};goog.inherits(pearson.brix.SelectGroup,pearson.brix.HtmlBric);
goog.exportSymbol("pearson.brix.SelectGroup",pearson.brix.SelectGroup);pearson.brix.SelectGroup.autoIdPrefix="sg_auto_";
pearson.brix.SelectGroup.prototype.draw=function(a){this.lastdrawn.container=a;var b=this;a=a.append("span").attr("class","widgetSelectGroup").attr("id",this.id);this.lastdrawn.widgetGroup=a;a=a.append("select").attr("name",this.id).style("width","auto");var c=a.selectAll("option").data(this.choices);c.enter().append("option").html(function(a){return a.content});c.each(function(a,b){a.key="key"in a?a.key:b.toString()});c.attr("value",function(a){return a.key});a.on("change",function(){b.eventManager.publish(b.selectedEventId,
{selectKey:c[0][this.selectedIndex].value})});!0==this.question&&(a[0][0].selectedIndex=-1);this.lastdrawn.options=c};pearson.brix.SelectGroup.prototype.lite=function(a){window.console.log("TODO: log fired Select highlite "+a);this.lastdrawn.widgetGroup.select("select")[0][0].focus();var b=this.lastdrawn.options;b.property("selected",!1);b=b.filter(function(b,d){return b.key===a.toString()});b.property("selected",!0);b.empty()&&window.console.log("No key '"+a+"' in select group "+this.id)};
pearson.brix.SelectGroup.prototype.selectedItem=function(){var a=this.lastdrawn.widgetGroup.select("select"),a=a.selectAll(":nth-child("+(a[0][0].selectedIndex+1)+")");return a.empty()?null:a.datum()};pearson.brix.SelectGroup.prototype.selectItemAtIndex=function(a){a=this.lastdrawn.widgetGroup.selectAll("div.widgetSelectGroup select")[0][a];a.selected||(a.selected=!0,a=d3.select(a).datum(),this.eventManager.publish(this.selectedEventId,{selectKey:a.answerKey}))};
goog.exportProperty(pearson.brix.SelectGroup.prototype,"selectItemAtIndex",pearson.brix.SelectGroup.prototype.selectItemAtIndex);/*
 (c) 2013 Pearson, All rights reserved.

*/
(function(){});
pearson.brix.LabelGroup=function(a,b){pearson.brix.SvgBric.call(this);this.id=pearson.brix.utils.getIdFromConfigOrAuto(a,pearson.brix.LabelGroup);this.labels=a.question?a.choices:a.labels;this.type=a.type||"none";this.eventManager=b||pearson.utils.IEventManager.dummyEventManager;this.selectedEventId=this.id+"_labelSelected";this.explicitScales_={xScale:null,yScale:null};this.lastdrawn={container:null,size:{height:0,width:0},labelsId:this.id+"Labels",widgetGroup:null,xScale:null,yScale:null,labelCollection:null}};
goog.inherits(pearson.brix.LabelGroup,pearson.brix.SvgBric);goog.exportSymbol("pearson.brix.LabelGroup",pearson.brix.LabelGroup);pearson.brix.LabelGroup.autoIdPrefix="lblg_auto_";
pearson.brix.LabelGroup.prototype.draw=function(a,b){this.lastdrawn.container=a;this.lastdrawn.size=b;this.setLastdrawnScaleFns2ExplicitOrDefault_(b);var c=pearson.brix.utils.attrFnVal,d=this,e=a.append("g").attr("class","widgetLabelGroup").attr("id",this.id);this.lastdrawn.widgetGroup=e;var f=e.selectAll("g.widgetLabel").data(this.labels);f.enter().append("g").attr("class","widgetLabel");f.exit().remove();f.each(function(a,b){a.key="key"in a?a.key:b.toString()});f.attr("transform",function(a,b){return c("translate",
d.lastdrawn.xScale(a.xyPos[0]),d.lastdrawn.yScale(a.xyPos[1]))});f.append("foreignObject").attr("x",0).attr("y",0).attr("width",function(a){return a.width}).attr("height",200).append("xhtml:body").style("margin","0px").append("div").attr("class","descLabel").classed("bullets","none"!=this.type?!0:!1).html(function(a){return a.content});"none"!=this.type&&f.append("rect").attr("height",26).attr("width",26).attr("x",4).attr("y",4);if("none"!==this.type){var g=this.getChoiceNumberToDisplayFn_();f.append("text").attr("x",
17).attr("y",18).attr("text-anchor","middle").attr("alignment-baseline","middle").text(function(a,b){return g(b)})}f.on("click",function(a,b){d.eventManager.publish(d.selectedEventId,{index:b,selectKey:a.key});d.lite(a.key)});this.lastdrawn.labelCollection=e.selectAll("g.widgetLabel")};goog.exportProperty(pearson.brix.LabelGroup.prototype,"draw",pearson.brix.LabelGroup.prototype.draw);pearson.brix.LabelGroup.prototype.redraw=function(){};
pearson.brix.LabelGroup.prototype.setScale=function(a,b){this.explicitScales_.xScale=a;this.explicitScales_.yScale=b};pearson.brix.LabelGroup.prototype.lite=function(a){window.console.log("TODO: log fired Label highlite "+a);var b=this.lastdrawn.labelCollection;b.classed("lit",!1).style("display","block");b=b.filter(function(b,d){return b.key===a});b.classed("lit",!0).style("display","inline");b.empty()&&window.console.log("No key '"+a+"' in Labels group "+this.id)};
goog.exportProperty(pearson.brix.LabelGroup.prototype,"lite",pearson.brix.LabelGroup.prototype.lite);pearson.brix.LabelGroup.prototype.selectedItem=function(){var a=this.lastdrawn.widgetGroup.selectAll(".lit");return a.empty()?null:a.datum()};goog.exportProperty(pearson.brix.LabelGroup.prototype,"selectedItem",pearson.brix.LabelGroup.prototype.selectedItem);
pearson.brix.LabelGroup.prototype.setLastdrawnScaleFns2ExplicitOrDefault_=function(a){this.lastdrawn.xScale=null!==this.explicitScales_.xScale?this.explicitScales_.xScale:d3.scale.linear().rangeRound([0,a.width]);this.lastdrawn.yScale=null!==this.explicitScales_.yScale?this.explicitScales_.yScale:d3.scale.linear().rangeRound([a.height,0])};pearson.brix.LabelGroup.prototype.setOpacity=function(a,b,c){this.lastdrawn.labelCollection.transition().style("opacity",a).duration(b).delay(c)};
goog.exportProperty(pearson.brix.LabelGroup.prototype,"setOpacity",pearson.brix.LabelGroup.prototype.setOpacity);pearson.brix.LabelGroup.prototype.getChoiceNumberToDisplayFn_=function(){var a={none:function(a){return""},"latin-upper":function(a){return String.fromCharCode(65+a)},"latin-lower":function(a){return String.fromCharCode(97+a)},numbered:function(a){return(a+1).toString()}};return this.type in a?a[this.type]:a.none};
