<!DOCTYPE html>
<html>
    <head>
    <title class="setTitle"></title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="Book Author, Book Title" name="description">
	
    <!-- Bootstrap -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">
	<link href="css/graphics_and_svg.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/module-opener.css" rel="stylesheet">
	<link href="css/toc.css" rel="stylesheet">
	<link href="css/grey-thing.css" rel="stylesheet">
	<link href="css/widgets.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
	
	<style>
	
		div.test
		{
			min-height: 200px;
		}
	
	</style>

    </head>
<body onload="test1();">

	<!-- Body Content -->
	<div class="container-fluid">
		<div class="row-fluid">
            
			<div class="span6 leftCol">
				
				<div class="test">
					<p>Test 0: Draw shapes</p>
					<div id="test0"></div>
				</div>
				
				<div class="test">
					<p>Test 1: Repeating animation (Only plays once upon loading the page)</p>
					<div id="test1"></div>
				</div>
				
				<div class="test">
					<p>Test 2: Button-controlled animation</p>
					<span id="button2"></span>
					<div id="test2"></div>
				</div>
				
				<div class="test">
					<p>Test 3: Slider-controlled animation</p>
					<span id="slider3"></span>
					<div id="test3"></div>
				</div>
				
				<div class="test">
					<p>Test 4: Multi-shape animation</p>
					<span id="button4"></span>
					<div id="test4"></div>
				</div>
				
			</div>
			<div class="span6 rightCol">
				
				<div class="test">
					<p>Test 5: Multi-sketch animation</p>
					<span id="button5"></span>
					<div id="test5"></div>
				</div>
				
				<div class="test">
					<p>Test 6: Moving arrow</p>
					<span id="button6"></span>
					<div id="test6"></div>
				</div>
				
				<div class="test">
					<p>Test 7: Reflection</p>
					<span id="button7_1"></span><span id="button7_2"></span>
					<div id="test7"></div>
				</div>
				
				<div class="test">
					<p>Test 8: Fake-3d Reflection</p>
					<span id="button8"></span>
					<div id="test8"></div>
				</div>
				
			</div>
		</div>
    </div>

    <script src="js/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<!--script src="js/jquery.touchSwipe.min.js"></script-->
	<script src="js/jquery-ui-1.10.2.custom.js"></script>
    <script src="js/toc-structure.js"></script>    
    <script src="js/eCourse-master.js"></script>    
    <script src="js/d3.v3.min.js"></script>

    <script src="js/eventmanager.js"></script>

	<script src="js/widget-base.js"></script>
	<script src="js/widget-button.js"></script>
	<script src="js/widget-slider.js"></script>
	<script src="js/widget-sketch.js"></script>
	<script src="js/widget-numeric.js"></script>

<script>

	// create event manager
	var eventManager = new EventManager();
	
	////////////////////////////////////////
	
	// Test 0: Draw shapes
	var test0Box = new SVGContainer({
			node: d3.select("#test0"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch0 = new Sketch({
			id: "sketch0",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .9], radius: .05 }]},
				{ shape: "rectangle", data: [{ xyPos: [.2, .925], width: .1, height: .05 }]},
				{ shape: "line", data: [{ xyPos: [.35, .9], length: .2, angle: 0 }]},
				{ shape: "hexagon", data: [{ xyPos: [.65, .9], side: .05 }]},
				{ shape: "triangle", data: [{ xyPos: [.8, .9], side: .1 }]},
			],
		});
		
	test0Box.append(sketch0, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	////////////////////////////////////////
	
	// Test 1: Repeating animation
	var test1Box = new SVGContainer({
			node: d3.select("#test1"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch1 = new Sketch({
			id: "sketch1",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .9], radius: .05 }]},
			],
		});
		
	test1Box.append(sketch1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	//window.setInterval(function() {test1();}, 8000);
	/*	
		TODO: Repeating animations are costly. We might want to store polygon
		points as arrays instead of recalculating them each time they move.
	*/
	
	function test1()
	{
		sketch1.move(0, 0, 500, 0);
		sketch1.move(.8, 0, 1500, 500);
		sketch1.move(0, 0, 500, 2000)
		sketch1.move(-.8, 0, 1500, 2500);
	}
	
	//////////////////////////////////////
	
	// Test 2: Button-controlled animation
	var test2Box = new SVGContainer({
			node: d3.select("#test2"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch2 = new Sketch({
			id: "sketch2",
			drawShape: 	
			[	
				{ shape: "hexagon",	data: [{ xyPos: [.5, .9], side: .05 }]},
			],
		});
		
	test2Box.append(sketch2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button2 = new Button ({
			id: "b2",
			text: "Click"
		}, eventManager);

	$('#button2').append(button2.getRootEl());

	eventManager.subscribe(button2.pressedEventId, handleClick2);

	function handleClick2()
	{
		sketch2.move(.4, -.4, 1000, 0);
		sketch2.move(-.4, -.4, 1000, 1000);
		sketch2.move(-.4, .4, 1000, 2000);
		sketch2.move(.4, .4, 1000, 3000);
	}
	
	/////////////////////////////////////
	
	// Test 3: Slider-controlled animation
	var test3Box = new SVGContainer({
			node: d3.select("#test3"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch3 = new Sketch({
			id: "sketch3",
			drawShape: 	
			[	
				{ shape: "rectangle", data: [{ xyPos: [.5, .9], width: .1, height: .05 }]},
			],
		});
		
	test3Box.append(sketch3, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var slider3 = new Slider ({
			id: "val3",
			startVal: 0.5,
			minVal: 0.2,
			maxVal: 0.8,
			stepVal: 0.01,
			label: "Test 3 slider",
			format: d3.format('5.2f'),
		}, eventManager);

	slider3.draw(d3.select("#slider3"));

	eventManager.subscribe(slider3.changedValueEventId, handleChangedValue3);

	function handleChangedValue3(newValue)
	{
		sketch3.drawShape = 
			[
				{shape: "rectangle", data: [{ xyPos: [slider3.getValue(), .9], width: .1, height: .05 }]},
			];
			
		sketch3.redraw();
	}
	
	/////////////////////////////////////
	
	// Test 4: Multi-shape animation
	var test4Box = new SVGContainer({
			node: d3.select("#test4"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch4 = new Sketch({
			id: "sketch4",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.5, .772], radius: .056 }]},
				{ shape: "line", data: [{ xyPos: [.5, .71], length: .17, angle: Math.PI/2 }]},
				{ shape: "triangle", data: [{ xyPos: [.5, .8], side: .2 }]},
			],
		});
		
	test4Box.append(sketch4, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button4 = new Button ({
			id: "b4",
			text: "Click"
		}, eventManager);

	$('#button4').append(button4.getRootEl());

	eventManager.subscribe(button4.pressedEventId, handleClick4);

	function handleClick4()
	{
		sketch4.move(.4, -.4, 1000, 0);
		sketch4.move(-.4, -.4, 1000, 1000);
		sketch4.move(-.4, .4, 1000, 2000);
		sketch4.move(.4, .4, 1000, 3000);
	}
	
	////////////////////////////////
	
	// Test 5: Multi-sketch animation
	var test5Box = new SVGContainer({
			node: d3.select("#test5"),
			maxWid: 400,
			maxHt: 400
		});
		
	var sketch5_1 = new Sketch({
			id: "sketch5_1",
			drawShape: 	
			[	
				{ shape: "line", data: [{ xyPos: [.45, .4], length: .4, angle: Math.PI/2 }]},
				{ shape: "line", data: [{ xyPos: [.45, .8], length: .14, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.55, .9], length: .4, angle: -Math.PI/2 }]},
				{ shape: "line", data: [{ xyPos: [.55, .5], length: .14, angle: 5/4*Math.PI }]},
				{ shape: "line", data: [{ xyPos: [.45, .6], length: .14, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.5, .85], length: .4, angle: -Math.PI/2 }]},
			],
		});
		
	var sketch5_2 = new Sketch({
			id: "sketch5_2",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .55], radius: .05 }]},
			],
		});
		
	var sketch5_3 = new Sketch({
			id: "sketch5_3",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.9, .75], radius: .05 }]},
			],
		});
		
	test5Box.append(sketch5_1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	test5Box.append(sketch5_2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	test5Box.append(sketch5_3, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button5 = new Button ({
			id: "b5",
			text: "Click"
		}, eventManager);

	$('#button5').append(button5.getRootEl());

	eventManager.subscribe(button5.pressedEventId, handleClick5);

	function handleClick5()
	{
		sketch5_2.move(.8, 0, 1000, 0);
		sketch5_3.move(-.8, 0, 1000, 0);
		sketch5_2.move(0, 0, 500, 1000);
		sketch5_3.move(0, 0, 500, 1000);
		sketch5_2.move(-.8, 0, 1000, 1200);
		sketch5_3.move(.8, 0, 1000, 1200);
	}
	
	////////////////////////////////////////////
	
	// Test 6: Moving arrow
	var test6Box = new SVGContainer({
			node: d3.select("#test6"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch6 = new Sketch({
			id: "sketch6",
			drawShape: 	
			[	
				{ shape: "line",	data: [{ xyPos: [.1, .9], length: .2, angle: 0, type: "vector" }]},
			],
		});
		
	test6Box.append(sketch6, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button6 = new Button ({
			id: "b6",
			text: "Click"
		}, eventManager);

	$('#button6').append(button6.getRootEl());

	eventManager.subscribe(button6.pressedEventId, handleClick6);

	function handleClick6()
	{
		sketch6.move(.6, 0, 1000, 0);
		sketch6.move(-.6, 0, 1000, 1000);
	}
	
	///////////////////////////////////////////
	
	// Test 7: Reflection
	var test7Box = new SVGContainer({
			node: d3.select("#test7"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch7_1 = new Sketch({
			id: "sketch7_1",
			drawShape: 	
			[	
				{ shape: "rectangle",	data: [{ xyPos: [.1, .8], width: .1, height: .05 }]},
				{ shape: "circle",	data: [{ xyPos: [.3, .8], radius: .05 }]},
				{ shape: "hexagon",	data: [{ xyPos: [.2, .7], side: .02}]},
				{ shape: "triangle",	data: [{ xyPos: [.25, .73], side: .05}]},
				{ shape: "line", data: [{ xyPos: [.3, .7], length: .1, angle: -Math.PI/3 }]},
				{ shape: "textBit", data: [{ xyPos: [.32, .72], text: "H2O" }]}
			],
		});
		
	var sketch7_2 = new Sketch({
			id: "sketch7_2",
			drawShape:
			[
				{ shape: "line",	data: [{ xyPos: [.5, .1], length: .8, angle: Math.PI/2 }]},
				{ shape: "line",	data: [{ xyPos: [.1, .5], length: .8, angle: 0 }]},
			],
		});
		
	test7Box.append(sketch7_1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	test7Box.append(sketch7_2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button7_1 = new Button ({
			id: "b7_1",
			text: "Reflect over vertical"
		}, eventManager);
	var button7_2 = new Button ({
			id: "b7_2",
			text: "Reflect over horizontal"
		}, eventManager);

	$('#button7_1').append(button7_1.getRootEl());
	$('#button7_2').append(button7_2.getRootEl());

	eventManager.subscribe(button7_1.pressedEventId, handleClick7_1);
	eventManager.subscribe(button7_2.pressedEventId, handleClick7_2);

	function handleClick7_1()
	{
		sketch7_1.reflect(.5, null, 0);
	}
	
	function handleClick7_2()
	{
		sketch7_1.reflect(null, .5, 0);
	}
	
	///////////////////////////////////////////
	
	// Test 8: Fake-3d Reflection
	var test8Box = new SVGContainer({
			node: d3.select("#test8"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch8 = new Sketch({
			id: "sketch8",
			drawShape: 	
			[	
				{ shape: "line", data: [{ xyPos: [.1, .6], length: .2, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.24, .74], length: .2, angle: 0 }]},
				{ shape: "line", data: [{ xyPos: [.44, .74], length: .2, angle: 5/4*Math.PI }]},
				{ shape: "line", data: [{ xyPos: [.3, .6], length: .2, angle: Math.PI }]},
			],
		});
		
	test8Box.append(sketch8, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button8 = new Button ({
			id: "b8",
			text: "Click"
		}, eventManager);

	$('#button8').append(button8.getRootEl());

	eventManager.subscribe(button8.pressedEventId, handleClick8);

	function handleClick8()
	{
		sketch8.move(.25, 0, 1000, 0)
		sketch8.reflect(.5, null, 1000);
		sketch8.move(.25, 0, 1000, 0);
	}
	
	
	
</script>
</body>
</html>
