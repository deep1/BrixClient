<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="Author" content="Leslie Bondaryk" />
    <meta name="Owner" content="Pearson" />
    <meta name="Copyright" content="Copyright (c) 2013 Pearson. All rights reserved." />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Carmen Santiago, Demo Book" name="description" />
    <title class="setTitle"></title>

    <!-- bootstrap_plus.css contains styling for the dropdown menu and other common core styles -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">

    <!-- widgets.css contains styling for the interactive brix -->
    <link href="css/widgets.css" rel="stylesheet">

    <!-- eCourse-master.css contains styling for all the navigation -->
    <link href="css/eCourse-master.css" rel="stylesheet" media="screen">

    <!-- content_styles.css contains styling for the narrative layout and responsive design -->
    <link href="css/content_styles.css" rel="stylesheet" media="screen">

</head>

<body>
<div class="container">
        <div class="span12 lc_ec_page">
            <section class="lc_ec_majorMinor lc_ec_pageInner">
                <div class="lc_ec_content">
                    <h2 class="lc_ec_bHead"><span class='number setId'></span>
                                            <span class="setTitle"></span>
                    </h2>
                    <div class="lc_ec_leading">
                        <p>Nuclear reactors use heat from fission reactions to turn water into steam, which spins turbines connected to generators that produce electricity. The figure shows a common design known as a pressurized water reactor.</p>
                        <div id="imgReactor"></div>
                    </div>
                    <div id="steps" class"lc_ec_trailing"></div>
            </div>
        </section>
    </div>
</div>

    <script src="js/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- <script src="js/jquery.touchSwipe.min.js"></script> -->
    <script src="js/jquery-ui-1.10.2.custom.js"></script>
    <script src="js/toc-structure.js"></script>
    <script src="js/eCourse-master.js"></script>
    <script src="js/d3.v3.min.js"></script>

    <script src="js/brixlib-compiled.js"></script>
    <!--
    <script src="../closure/closure-library/closure/goog/base.js"></script>
    <script src="../closure/closure-library/closure/goog/deps.js"></script>

    <script src="js/eventmanager.js"></script>
    <script src="js/fakeactivitydb.js"></script>
    <script src="js/answerman.js"></script>
    <script src="js/submitmanager.js"></script>
    <script src="js/mortar-base.js"></script>
    <script src="js/widget-base.js"></script>
    <script src="js/bricworks.js"></script>
    <script src="js/widget-numeric.js"></script>
    <script src="js/widget-legend.js"></script>
    <script src="js/widget-callouts.js"></script>
    <script src="js/widget-button.js"></script>
    <script src="js/widget-sketch.js"></script>
    <script src="js/widget-prototype-axes.js"></script>
    <script src="js/widget-linegraph.js"></script>
    <script src="js/widget-barchart.js"></script>
    <script src="js/widget-piechart.js"></script>
    <script src="js/widget-image.js"></script>
    <script src="js/widget-carousel.js"></script>
    <script src="js/widget-imageviewer.js"></script>
    <script src="js/widget-labelgroup.js"></script>
    <script src="js/widget-markergroup.js"></script>
    <script src="js/widget-radiogroup.js"></script>
    <script src="js/widget-checkgroup.js"></script>
    <script src="js/widget-selectgroup.js"></script>
    <script src="js/widget-multiplechoicequestion.js"></script>
    <script src="js/widget-multiselectquestion.js"></script>
    <script src="js/widget-numericquestion.js"></script>
    <script src="js/widget-slider.js"></script>
    <script src="js/mortar-hilite.js"></script>
    <script src="js/briclayer.js"></script>
    -->

    <script>

    // Create an object that will contain the objects needed for the activities
    // on this page.
    pearson.brix.activity = {};
    var a = pearson.brix.activity;

    // The activity config that defines the brix and mortar for this page
    a.config =
        {
            "description": "The Neff Reactor activity, w/ labels on an image, along w/ an associated label table",
            "sequenceNodeKey": "39b0706e-8587-447e-a598-ecc5e9a1b883",
            "containerConfig":
                [
                    {
                        "description": "This 'imgReactor' container contains the image and overlaying labelgroup",
                        "containerId": "imgReactor",
                        "brixConfig":
                            [
                                {
                                    "bricId": "cimage1",
                                    "bricType": "CaptionedImage",
                                    "config":
                                        {
                                            "id": "cimg0n",
                                            "URI": "img/reactor.jpg",
                                            "caption": "Nuclear Reactor Schematic Diagram",
                                            "actualSize": {"height": 310, "width": 680},
											"displayWidth": 757,
                                            "captionPosition": "below"
                                        },
                                },
                                {
                                    "bricId": "cntr1",
                                    "bricType": "SvgContainer",
                                    "config":
                                        {
                                            //"node": d3.select("#imgReactor"),
                                            //"maxSize": pearson.utils.Size.matchRatioWithHeight(310 + 40, {"height": 310, "width": 680}/*"cimage1"."config"."actualSize"*/),
                                        },
                                    "configFixup":
                                        [
                                            {
                                                "type": "set-property",
                                                "name": "node",
                                                "value":
                                                    {
                                                        "type": "d3select",
                                                        "selector": "#imgReactor"
                                                    }
                                            },
                                            {
                                                "type": "set-property",
                                                "name": "maxSize",
                                                "value":
                                                    {
                                                        "type": "property-of-ref",
                                                        "domain": "brix",
                                                        "refId": "cimage1",
                                                        "accessor": "getSizeAt100Pct"
                                                    }
                                            }
                                        ]
                                },
                                {
                                    "bricId": "labels1",
                                    "bricType": "LabelGroup",
                                    "config":
                                        {
                                            "id": "reactorNum",
                                            "type": "numbered",
                                            "labels":
                                                [
                                                    {"content": "1", "xyPos": [0, 0.22], "width": 0},
                                                    {"content": "2", "xyPos": [0.05, 0.43], "width": 0},
                                                    {"content": "3", "xyPos": [0.3, 0.7], "width": 0},
                                                    {"content": "4", "xyPos": [0.62, 0.65], "width": 0},
                                                    {"content": "5", "xyPos": [0.66, 0.15], "width": 0}
                                                ]
                                        }
                                }
                            ],
                        "mortarConfig":
                            [
                                {
                                    "mortarId": "hilite1",
                                    "mortarType": "Hilite",
                                    "config":
                                        {
                                            "eventDetailsProperty": "selectKey"
                                        },
                                    "configFixup":
                                        [
                                            {
                                                "type": "set-property",
                                                "name": "topic",
                                                // This value type will have to change to lookup a bric type's particular event id
                                                // for now I've hardcoded that event id (topic).
                                                // this is the lbltbl1's selectedEventId
                                                "value":
                                                    {
                                                        "type": "brix-topic",
                                                        "bricType": "Callouts",
                                                        "instanceId": "callme",
                                                        "eventName": "selected"
                                                    }
                                            },
                                            {
                                                "type": "set-property",
                                                "name": "targetBric",
                                                "value": { "type": "ref", "domain": "brix", "refId": "labels1" }
                                            }
                                        ]
                                }
                            ],
                        "hookupActions":
                            [
                                {
                                    "description": "Append the captioned image to the svg container",
                                    "type": "method-call",
                                    "instance": {"type": "ref", "domain": "brix", "refId": "cntr1"},
                                    "methodName": "append",
                                    "args":
                                        [
                                            { "type": "ref", "domain": "brix", "refId": "cimage1" },
                                            { "type": "constant", "value": {"topPercentOffset": 0, "leftPercentOffset": 0, "heightPercent": 1, "widthPercent": 1} }
                                        ]
                                },
                                {
                                    "description": "Append the labels to the captioned image",
                                    "type": "method-call",
                                    "instance": {"type": "ref", "domain": "brix", "refId": "cimage1"},
                                    "methodName": "append",
                                    "args":
                                        [
                                            { "type": "ref", "domain": "brix", "refId": "labels1" }
                                        ]
                                },
                                {
                                    "description": "Initial condition: select 1st label (note that we may want to use the state field to do this later)",
                                    "type": "method-call",
                                    "instance": {"type": "ref", "domain": "brix", "refId": "labels1"},
                                    "methodName": "lite",
                                    "args":
                                        [
                                            { "type": "constant", "value": "0" }
                                        ]
                                }

                            ]
                    },
                    {
                        "description": "The 'steps' container contains the label table",
                        "containerId": "steps",
                        "brixConfig":
                            [
                                {
                                    "bricId": "lbltbl1",
                                    "bricType": "Callouts",
                                    "config":
                                        {
                                            "id": "callme",
                                            "show": "all",
                                            "type": "numbered",
                                            "headers": ["Nuclear Reactor function"],
                                            "textBits":
                                                [
                                                    {"cols": ["In a closed circuit, (green) water is pumped at high pressure to the reactor core."]},
                                                    {"cols": ["Heat is generated by fission in the fuel rods in the reactor core, which heats the circulating water. Thick layers of concrete and steel or lead contain the reactor core’s radioactivity."]},
                                                    {"cols": [ "In the steam generator, the energy from the heated water is used to boil water from a separate supply. The resulting steam moves through a pipe to a turbine."]},
                                                    {"cols": ["The steam turns the turbine, which is connected to an electricity generator. Power lines distribute the electricity. A typical reactor produces as much as a coal-fired power plant."]},
                                                    {"cols": ["A third supply of water is used to cool the steam so it condenses into water, which is pumped back to the steam generator."]}
                                                ]
                                        }
                                }
                            ],
                        "mortarConfig":
                            [
                                {
                                    "mortarId": "hilite2",
                                    "mortarType": "Hilite",
                                    "config":
                                        {
                                            "eventDetailsProperty": "selectKey"
                                        },
                                    "configFixup":
                                        [
                                            {
                                                "type": "set-property",
                                                "name": "topic",
                                                // This value type will have to change to lookup a bric type's particular event id
                                                // for now I've hardcoded that event id (topic).
                                                // this is the labels1's selectedEventId
                                                "value":
                                                    {
                                                        "type": "brix-topic",
                                                        "bricType": "LabelGroup",
                                                        "instanceId": "reactorNum",
                                                        "eventName": "selected"
                                                    }
                                            },
                                            {
                                                "type": "set-property",
                                                "name": "targetBric",
                                                "value": { "type": "ref", "domain": "brix", "refId": "lbltbl1" }
                                            }
                                        ]
                                }
                            ],
                        "hookupActions":
                            [
                                {
                                    "description": "draw the label table",
                                    "type": "method-call",
                                    "instance": {"type": "ref", "domain": "brix", "refId": "lbltbl1"},
                                    "methodName": "draw",
                                    "args":
                                        [
                                            { "type": "d3select", "selector": "#steps" }
                                        ]
                                },
                                {
                                    "description": "Initial condition: select 1st table row (note that we may want to use the state field to do this later)",
                                    "type": "method-call",
                                    "instance": {"type": "ref", "domain": "brix", "refId": "lbltbl1"},
                                    "methodName": "lite",
                                    "args":
                                        [
                                            { "type": "constant", "value": "0" }
                                        ]
                                }

                            ]
                    }
                ]
        };

    // create the eventmanager to be used by the created brix, and the
    // bricLayer which will create them, and then tell the bricLayer to build.
    a.eventManager = new pearson.utils.EventManager();
    a.bricLayer = new pearson.brix.BricLayer(null, a.eventManager);

    a.building = a.bricLayer.build(a.config);
/*
    // shorter names
    a.cimage1 = a.building.brix.cimage1;
    a.cntr1 = a.building.brix.cntr1;
    a.labels1 = a.building.brix.labels1;
    a.lbltbl1 = a.building.brix.lbltbl1;
    // code that will be replaced by mortar defined in container "imgReactor"
    var hilite1Config =
        {
            "topic": "callme_Callout",
            "eventDetailsProperty": "selectKey",
            "targetBric": a.building.brix["labels1"]
        };
    a.building.mortar.hilite1 = new pearson.brix.mortar.Hilite(hilite1Config, a.eventManager);

    // code that will be replaced by mortar defined in container "steps"
    var hilite2Config =
        {
            "topic": "reactorNum_labelSelected",
            "eventDetailsProperty": "selectKey",
            "targetBric": a.building.brix["lbltbl1"]
        };
    a.building.mortar.hilite2 = new pearson.brix.mortar.Hilite(hilite2Config, a.eventManager);
*/
    </script>
</body>
</html>
