<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="Author" content="Leslie Bondaryk" />
	<meta name="Owner" content="Pearson" />
	<meta name="Copyright" content="Copyright (c) 2013 Pearson. All rights reserved." />
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="Carmen Santiago, Demo Book" name="description" />
	<title class="setTitle"></title>

    <!-- bootstrap_plus.css contains styling for the dropdown menu and other common core styles -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">
  	
  	<!-- widgets.css contains styling for the interactive brix -->
	<link href="css/widgets.css" rel="stylesheet">

	<!-- eCourse-master.css contains styling for all the navigation -->
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">

	<!-- content_styles.css contains styling for the narrative layout and responsive design -->
	<link href="css/content_styles.css" rel="stylesheet" media="screen">

	<style>
	
		div.test
		{
			min-height: 200px;
		}
	
	</style>
</head>
<body onload="test1();">
	<div class="container">
		<div class="span12 lc_ec_page">
			<section class="lc_ec_fiftyFifty lc_ec_pageInner">
       	 		<div class="lc_ec_content">
       	 			<h2 class="lc_ec_bHead"><span class='number setId'></span> 
											<span class="setTitle"></span>
					</h2>
		 			<div class="lc_ec_leading">
				
				<div class="test">
					<p>Test 0: Draw shapes</p>
					<div id="test0"></div>
				</div>
				
				<div class="test">
					<p>Test 1: Repeating animation (Only plays once upon loading the page)</p>
					<div id="test1"></div>
				</div>
				
				<div class="test">
					<p>Test 2: Button-controlled animation</p>
					<span id="button2"></span>
					<div id="test2"></div>
				</div>
				
				<div class="test">
					<p>Test 3: Slider-controlled animation</p>
					<span id="slider3"></span>
					<div id="test3"></div>
				</div>
				
				<div class="test">
					<p>Test 4: Multi-shape animation</p>
					<span id="button4"></span>
					<div id="test4"></div>
				</div>
				
				<div class="test">
					<p>Test 5: Multi-sketch animation</p>
					<span id="button5"></span>
					<div id="test5"></div>
				</div>
				
				<div class="test">
					<p>Test 6: Moving arrow</p>
					<span id="button6"></span>
					<div id="test6"></div>
				</div>
				
			</div>
			<div class="lc_ec_trailing">
				
				<div class="test">
					<p>Test 7: Reflection</p>
					<span id="button7_1"></span><span id="button7_2"></span>
					<div id="test7"></div>
				</div>
				
				<div class="test">
					<p>Test 8: Fake-3d Reflection</p>
					<span id="button8"></span>
					<div id="test8"></div>
				</div>
				
				<div class="test">
					<p>Test 9: Opacity</p>
					<span id="button9"></span>
					<div id="test9"></div>
				</div>
				
				<div class="test">
					<p>Test 10: Color</p>
					<span id="button10"></span>
					<div id="test10"></div>
				</div>
				
				<div class="test">
					<p>Test 11: Click the sketch</p>
					<div id="test11"></div>
				</div>
				
				<div class="test">
					<p>Test 12: Hashes</p>
					<span id="button12"></span>
					<div id="test12"></div>
				</div>
			</div>
		</div>
	</section>
</div>
</div>
    
    <script src="js/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- <script src="js/jquery.touchSwipe.min.js"></script> -->
    <script src="js/jquery-ui-1.10.2.custom.js"></script>
    <script src="js/toc-structure.js"></script>    
    <script src="js/eCourse-master.js"></script>    
    <script src="js/d3.v3.min.js"></script>
<!--
    <script src="js/brixlib-compiled.js"></script>
-->
    <script src="js/closure-library/closure/goog/base.js"></script>
    <script src="js/brixlib-deps.js"></script>
    <script>
    // requiring the briclayer will pull in all brix and mortar and the eventmanager
	    goog.require('pearson.brix.BricLayer');
    </script>

<script>
// local aliases for convenience
	var EventManager = pearson.utils.EventManager;
	var Rect = pearson.utils.Rect;
	var Size = pearson.utils.Size;
	var SVGContainer = pearson.brix.SVGContainer;
	var Image = pearson.brix.Image;
	var CaptionedImage = pearson.brix.CaptionedImage;
	var Carousel = pearson.brix.Carousel;
	var ImageViewer = pearson.brix.ImageViewer;
	var Callouts = pearson.brix.Callouts;
	var LabelGroup = pearson.brix.LabelGroup;
	var MarkerGroup = pearson.brix.MarkerGroup;
	var BarChart = pearson.brix.BarChart;
	var LineGraph = pearson.brix.LineGraph;
	var PieChart = pearson.brix.PieChart;
	var Legend = pearson.brix.Legend;
	var Sketch = pearson.brix.Sketch;
	var Button = pearson.brix.Button;
	var Slider = pearson.brix.Slider;

	// create event manager
	var eventManager = new EventManager();
	
	////////////////////////////////////////
	
	// Test 0: Draw shapes
	var test0Box = new SVGContainer({
			node: d3.select("#test0"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch0 = new Sketch({
			id: "sketch0",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .9], radius: .05 }]},
				{ shape: "rectangle", data: [{ xyPos: [.2, .925], width: .1, height: .05 }]},
				{ shape: "line", data: [{ xyPos: [.35, .9], length: .2, angle: 0 }]},
				{ shape: "hexagon", data: [{ xyPos: [.65, .9], side: .05 }]},
				{ shape: "triangle", data: [{ xyPos: [.8, .9], side: .1 }]},
				{ shape: "wedge", data: [{ xyPos: [.1, .8], length: .15, width: .025, angle: 0 }]},
			],
		});
		
	test0Box.append(sketch0, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	////////////////////////////////////////
	
	// Test 1: Repeating animation
	var test1Box = new SVGContainer({
			node: d3.select("#test1"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch1 = new Sketch({
			id: "sketch1",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .9], radius: .05 }]},
			],
		});
		
	test1Box.append(sketch1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	//window.setInterval(function() {test1();}, 8000);
	/*	
		TODO: Repeating animations are costly. We might want to store polygon
		points as arrays instead of recalculating them each time they move.
	*/
	
	function test1()
	{
		sketch1.move(0, 0, 500, 0);
		sketch1.move(.8, 0, 1500, 500);
		sketch1.move(0, 0, 500, 2000);
		sketch1.move(-.8, 0, 1500, 2500);
	}
	
	//////////////////////////////////////
	
	// Test 2: Button-controlled animation
	var test2Box = new SVGContainer({
			node: d3.select("#test2"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch2 = new Sketch({
			id: "sketch2",
			drawShape: 	
			[	
				{ shape: "hexagon",	data: [{ xyPos: [.5, .9], side: .05 }]},
			],
		});
		
	test2Box.append(sketch2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button2 = new Button ({
			id: "b2",
			text: "Click"
		}, eventManager);

	button2.draw(d3.select('#button2'));

	eventManager.subscribe(button2.pressedEventId, handleClick2);

	function handleClick2()
	{
		sketch2.move(.4, -.4, 1000, 0);
		sketch2.move(-.4, -.4, 1000, 1000);
		sketch2.move(-.4, .4, 1000, 2000);
		sketch2.move(.4, .4, 1000, 3000);
	}
	
	/////////////////////////////////////
	
	// Test 3: Slider-controlled animation
	var test3Box = new SVGContainer({
			node: d3.select("#test3"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch3 = new Sketch({
			id: "sketch3",
			drawShape: 	
			[	
				{ shape: "rectangle", data: [{ xyPos: [.5, .9], width: .1, height: .05 }]},
			],
		});
		
	test3Box.append(sketch3, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var slider3 = new Slider ({
			id: "val3",
			startVal: 0.5,
			minVal: 0.2,
			maxVal: 0.8,
			stepVal: 0.01,
			label: "Test 3 slider",
			format: '5.2f',
		}, eventManager);

	slider3.draw(d3.select("#slider3"));

	eventManager.subscribe(slider3.changedValueEventId, handleChangedValue3);

	function handleChangedValue3(newValue)
	{
		sketch3.drawShape = 
			[
				{shape: "rectangle", data: [{ xyPos: [slider3.getValue(), .9], width: .1, height: .05 }]},
			];
			
		sketch3.redraw();
	}
	
	/////////////////////////////////////
	
	// Test 4: Multi-shape animation
	var test4Box = new SVGContainer({
			node: d3.select("#test4"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch4 = new Sketch({
			id: "sketch4",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.5, .772], radius: .056 }]},
				{ shape: "line", data: [{ xyPos: [.5, .71], length: .17, angle: Math.PI/2 }]},
				{ shape: "triangle", data: [{ xyPos: [.5, .8], side: .2 }]},
			],
		});
		
	test4Box.append(sketch4, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button4 = new Button ({
			id: "b4",
			text: "Click"
		}, eventManager);

	button4.draw(d3.select('#button4'));

	eventManager.subscribe(button4.pressedEventId, handleClick4);

	function handleClick4()
	{
		sketch4.move(.4, -.4, 1000, 0);
		sketch4.move(-.4, -.4, 1000, 1000);
		sketch4.move(-.4, .4, 1000, 2000);
		sketch4.move(.4, .4, 1000, 3000);
	}
	
	////////////////////////////////
	
	// Test 5: Multi-sketch animation
	var test5Box = new SVGContainer({
			node: d3.select("#test5"),
			maxWid: 400,
			maxHt: 400
		});
		
	var sketch5_1 = new Sketch({
			id: "sketch5_1",
			drawShape: 	
			[	
				{ shape: "line", data: [{ xyPos: [.45, .4], length: .4, angle: Math.PI/2 }]},
				{ shape: "line", data: [{ xyPos: [.45, .8], length: .14, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.55, .9], length: .4, angle: -Math.PI/2 }]},
				{ shape: "line", data: [{ xyPos: [.55, .5], length: .14, angle: 5/4*Math.PI }]},
				{ shape: "line", data: [{ xyPos: [.45, .6], length: .14, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.5, .85], length: .4, angle: -Math.PI/2 }]},
			],
		});
		
	var sketch5_2 = new Sketch({
			id: "sketch5_2",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.1, .55], radius: .05 }]},
			],
		});
		
	var sketch5_3 = new Sketch({
			id: "sketch5_3",
			drawShape: 	
			[	
				{ shape: "circle",	data: [{ xyPos: [.9, .75], radius: .05 }]},
			],
		});
		
	test5Box.append(sketch5_1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	test5Box.append(sketch5_2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	test5Box.append(sketch5_3, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button5 = new Button ({
			id: "b5",
			text: "Click"
		}, eventManager);

	button5.draw(d3.select('#button5'));

	eventManager.subscribe(button5.pressedEventId, handleClick5);

	function handleClick5()
	{
		sketch5_2.move(.8, 0, 1000, 0);
		sketch5_3.move(-.8, 0, 1000, 0);
		sketch5_2.move(0, 0, 500, 1000);
		sketch5_3.move(0, 0, 500, 1000);
		sketch5_2.move(-.8, 0, 1000, 1200);
		sketch5_3.move(.8, 0, 1000, 1200);
	}
	
	////////////////////////////////////////////
	
	// Test 6: Moving arrow
	var test6Box = new SVGContainer({
			node: d3.select("#test6"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch6 = new Sketch({
			id: "sketch6",
			drawShape: 	
			[	
				{ shape: "line",	data: [{ xyPos: [.1, .9], length: .3, angle: 0, type: "vector" }]},
				{ shape: "wedge", data: [{ xyPos: [.2, .9], length: .1, width: .025, angle: Math.PI }]}
			],
		});
		
	test6Box.append(sketch6, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button6 = new Button ({
			id: "b6",
			text: "Click"
		}, eventManager);

	button6.draw(d3.select('#button6'));

	eventManager.subscribe(button6.pressedEventId, handleClick6);

	function handleClick6()
	{
		sketch6.move(.5, 0, 1000, 0);
		sketch6.move(-.5, 0, 1000, 1000);
	}
	
	///////////////////////////////////////////
	
	// Test 7: Reflection
	var test7Box = new SVGContainer({
			node: d3.select("#test7"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch7_1 = new Sketch({
			id: "sketch7_1",
			drawShape: 	
			[	
				{ shape: "rectangle",	data: [{ xyPos: [.1, .8], width: .1, height: .05 }]},
				{ shape: "circle",	data: [{ xyPos: [.3, .8], radius: .05 }]},
				{ shape: "hexagon",	data: [{ xyPos: [.2, .7], side: .02}]},
				{ shape: "triangle",	data: [{ xyPos: [.25, .73], side: .05}]},
				{ shape: "line", data: [{ xyPos: [.3, .7], length: .1, angle: -Math.PI/3 }]},
				{ shape: "textBit", data: [{ xyPos: [.38, .7], text: "H2O" }]},
				{ shape: "wedge", data: [{ xyPos: [.27, .68], length: .08, width: .02, angle: 5/4*Math.PI }]},
				{ shape: "wedge", data: [{ xyPos: [.29, .65], length: .08, width: .02, angle: -Math.PI/2, type: "hash" }]}
			],
		});
		
	var sketch7_2 = new Sketch({
			id: "sketch7_2",
			drawShape:
			[
				{ shape: "line",	data: [{ xyPos: [.5, .1], length: .8, angle: Math.PI/2 }]},
				{ shape: "line",	data: [{ xyPos: [.1, .5], length: .8, angle: 0 }]},
			],
		});
		
	test7Box.append(sketch7_1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	test7Box.append(sketch7_2, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button7_1 = new Button ({
			id: "b7_1",
			text: "Reflect over vertical"
		}, eventManager);
	var button7_2 = new Button ({
			id: "b7_2",
			text: "Reflect over horizontal"
		}, eventManager);

	button7_1.draw(d3.select('#button7_1'));
	button7_2.draw(d3.select('#button7_2'));

	eventManager.subscribe(button7_1.pressedEventId, handleClick7_1);
	eventManager.subscribe(button7_2.pressedEventId, handleClick7_2);

	function handleClick7_1()
	{
		sketch7_1.reflect(.5, null, 500, 0);
	}
	
	function handleClick7_2()
	{
		sketch7_1.reflect(null, .5, 500, 0);
	}
	
	///////////////////////////////////////////
	
	// Test 8: Fake-3d Reflection
	var test8Box = new SVGContainer({
			node: d3.select("#test8"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch8 = new Sketch({
			id: "sketch8",
			drawShape: 	
			[	
				// left fin
				{ shape: "line", data: [{ xyPos: [.1, .6], length: .2, angle: Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.44, .74], length: .2, angle: 5/4*Math.PI }]},
				{ shape: "line", data: [{ xyPos: [.3, .6], length: .2, angle: Math.PI }]},
				
				// right fin
				{ shape: "line", data: [{ xyPos: [.9, .6], length: .2, angle: Math.PI*3/4 }]},
				{ shape: "line", data: [{ xyPos: [.56, .74], length: .2, angle: -Math.PI/4 }]},
				{ shape: "line", data: [{ xyPos: [.7, .6], length: .2, angle: 0 }]},
				
				// top
				{ shape: "line", data: [{ xyPos: [.24, .74], length: .52, angle: 0 }]},
				
				// pivot
				{ shape: "line", data: [{ xyPos: [.5, .74], length: .14, angle: -Math.PI/2 }]}
			],
		});
		
	test8Box.append(sketch8, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button8 = new Button ({
			id: "b8",
			text: "Click"
		}, eventManager);

	button8.draw(d3.select('#button8'));

	eventManager.subscribe(button8.pressedEventId, handleClick8);

	function handleClick8()
	{
		sketch8.reflect(.5, null, 1000, 0);
		sketch8.reflect(.5, null, 1000, 900);
	}
	
	///////////////////////////////////////////
	
	// Test 9: Opacity
	var test9Box = new SVGContainer({
			node: d3.select("#test9"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch9 = new Sketch({
			id: "sketch9",
			drawShape: 	
			[	
				{ shape: "circle", data: [{ xyPos: [.5, .85], radius: .1 }]}
			],
		});
		
	test9Box.append(sketch9, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button9 = new Button ({
			id: "b9",
			text: "Opacify!"
		}, eventManager);

	button9.draw(d3.select('#button9'));

	eventManager.subscribe(button9.pressedEventId, handleClick9);
	
	var opaque = true;

	function handleClick9()
	{
		if (opaque)
		{
			sketch9.setOpacity(0, 500, 0);
			opaque = false;
		}
		else
		{
			sketch9.setOpacity(1, 500, 0);
			opaque = true;
		}
	}
	
	//////////////////////////////////////
	
	// Test 10: Color
	var test10Box = new SVGContainer({
			node: d3.select("#test10"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch10 = new Sketch({
			id: "sketch10",
			drawShape: 	
			[	
				{ shape: "circle", data: [{ xyPos: [.5, .85], radius: .1 }]},
				{ shape: "wedge", data: [{ xyPos: [.5, .75], length: .1, width: .05, angle: -Math.PI/2 }]}
			],
		});
		
	test10Box.append(sketch10, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	var button10 = new Button ({
			id: "b10",
			text: "Click"
		}, eventManager);

	button10.draw(d3.select('#button10'));

	eventManager.subscribe(button10.pressedEventId, handleClick10);
	
	var changed = false;

	function handleClick10()
	{
		if (!changed)
		{
			sketch10.setColor("red", 500, 0);
			changed = true;
		}
		else
		{
			sketch10.setColor("grey", 500, 0);
			changed = false;
		}
	}
	
	//////////////////////////////////////
	
	// Test 11: On click
	var test11Box = new SVGContainer({
			node: d3.select("#test11"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch11 = new Sketch({
			id: "sketch11",
			drawShape: 	
			[	
				{ shape: "circle", data: [{ xyPos: [.5, .85], radius: .1 }]},
				{ shape: "rectangle", data: [{ xyPos: [.4, .75], width: .2, height: .1 }]},
				{ shape: "textBit", data: [{ xyPos: [.5, .7], text: "blah" }]}
			],
		}, eventManager);
		
	test11Box.append(sketch11, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	eventManager.subscribe(sketch11.selectedEventId, handleClick11);
	
	function handleClick11 ()
	{
		sketch11.setColor("red", 400, 0);
		sketch11.setColor("grey", 400, 400);
	}
	
	////////////////////////////////////////
	
	// Test 12: Hashes
	var test12Box = new SVGContainer({
			node: d3.select("#test12"),
			maxWid: 200,
			maxHt: 200
		});
		
	var sketch12 = new Sketch({
			id: "sketch12",
			drawShape: 	
			[	
				{ shape: "wedge", data: [{ xyPos: [.2, .7], length: .2, width: .1, angle: Math.PI/4, type: "hash" }]}
			],
		});
		
	var button12 = new Button ({
			id: "b12",
			text: "Click"
		}, eventManager);

	button12.draw(d3.select('#button12'));
		
	test12Box.append(sketch12, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	
	eventManager.subscribe(button12.pressedEventId, handleClick12);
	
	function handleClick12 ()
	{
		sketch12.move(.5, 0, 1000, 0);
		sketch12.move(-.5, 0, 1000, 1000);
	}
	
</script>
</body>
</html>
