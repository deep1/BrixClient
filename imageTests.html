<!DOCTYPE html>
<html>
    <head>
 	<title class="setTitle"></title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="eCourses Author, Title" name="description">
    <!-- Bootstrap -->
    <link href="css/bootstrap_plus.css" rel="stylesheet" media="screen">
	<link href="css/widgets.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
 	<link href="css/widgets.css" rel="stylesheet">

    </head>
	<body>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span6 leftCol">
                <h2 class="setTitle"></h2>
				<div id="widgetTarget0n"><p>0n. Single image</p></div>
				<div id="widgetTarget0"><p>0. Single image</p></div>
				<div id="widgetTarget1n"><p>1n. Multiple images in 2 Carousels the top one gets lite events, the bottom doesn't</p></div>
				<div id="widgetTarget1an"><p>1an. Multiple image carousel selection shown larger.</p></div>
				<div id="widgetTarget1bn"><p>1bn. Test of the ImageViewer widget.</p></div>
				<div id="widgetTarget1"><p>1. Multiple images with autoCarousel (events)</p></div>
				<div id="widgetTarget2"><p>2. Image with graph overlay on local coordinate system (set by data in graph)</p></div>
				
			</div>
			<div class="span6 rightCol">
				<div id="widgetTarget50"><p>3. Three scaled images in grid</p></div>
				<div id="widgetTarget80"><p>6. Image with Legend</p></div>
			</div>
		</div>
	</div>
    <script src="js/jquery-latest.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<!-- <script src="js/jquery.touchSwipe.min.js"></script> -->
	<script src="js/jquery-ui-1.10.2.custom.js"></script>
	<script src="js/toc-structure.js"></script>    
	<script src="js/eCourse-master.js"></script>    
	<script src="js/d3.v3.min.js"></script>

	<script src="js/widgets.js"></script>

	<script src="js/eventmanager.js"></script>
	<script src="js/widget-base.js"></script>
	<script src="js/widget-linegraph.js"></script>
	<script src="js/widget-labelgroup.js"></script>
    <script src="js/widget-callouts.js"></script>
    <script src="js/widget-image.js"></script>
    <script src="js/widget-carousel.js"></script>
    <script src="js/widget-imageviewer.js"></script>

<script>
	var eventManager = new EventManager();

	var lineData = [
		{	x: 0,	y: -3.1},
		{	x: 2,	y: -2.02},
		{	x: 12,	y: -1.2},
		{	x: 19.1, y: -0.36},
		{	x: 26.0,	y: -0.34	},
		{	x: 29,	y: 0.425},
		{	x: 45.7,	y: 0.545},
		{	x: 55,	y: 0.61},
		{	x: 66.6,	y: 0.7},
		{	x: 73,	y: 0.9},
		{	x: 89.1,	y: 1.128},
		{	x: 90.1,	y: 1.55	},
		{	x: 91.0,	y: 1.75},
		{	x: 92.9,	y: 1.86}
		]; // array of line data
		
	
	//<div id="widgetTarget0"><p>0. Single bar graph</p></div>

	var imgConfig0 =
		{
			id: "img0n",
			URI: 'img/ch4_1.jpg',
			caption: "The Whitewater-Baldy Complex wildfire.",
			actualSize: {height: 960, width: 1280}
		};

	var cimgConfig0 =
		{
			id: "cimg0n",
			image: new Image(imgConfig0),
//			captionPosition: "below"
		};
		
	var cntrSize = Size.matchRatioWithHeight(450 - 40, cimgConfig0.image.actualSize);
	var cntrConfig0 = 
		{
			node: d3.select("#widgetTarget0n"),
			maxSize: Size.matchRatioWithHeight(450 - 40, imgConfig0.actualSize),
			maxWid: cntrSize.width, //550,
			maxHt: 450
		};
		
	var cntr0 = new SVGContainer(cntrConfig0);
	var cimg0 = new CaptionedImage(cimgConfig0);
	
	cntr0.append(cimg0, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});

// Old widgets code test for widget 0
	
	var svg0 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget0"),
		maxWid: 550,
		maxHt: 450
		}
	);
	
	svg0.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		xaxisType: "linear",
		//xTicks: 4,
		xOrient: "bottom",
		xLabel: "caption",
		yaxisType: "linear",
		yOrient: "left",
	});
	
	svg0.ScalableImage(
		{images: [	
				{URI:'img/ch4_1.jpg', caption: "The Whitewater-Baldy Complex wildfire."}
			]
		}
	);

	
//	<div id="widgetTarget1"><p>1. Multiple images with autoCarousel</p></div>
	var imgConfig1 =
		[
			{
				URI: 'img/ch4_0_1.png',
				caption: "Earth's atmosphere. &copy;NASA http://www.nasa.gov/multimedia/imagegallery/ image_feature_1529.html",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 710, width: 946}
			},
			{
				URI: 'img/ch4_03.jpg',
				caption: "The seasons",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 366, width: 443}
			},
			{
				URI: 'img/ch4_0_2.jpg',
				caption: "Heat transfer mechanisms",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 443, width: 160},
				key: 'foo'
			},
			{
				URI: 'img/ch4_1.jpg',
				caption: "The Whitewater-Baldy Complex wildfire.",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 960, width: 1280}
			},
			{
				URI: 'img/ch4_2.jpg',
				caption: "Aerial image near downtown West Liberty, Kentucky.",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 550, width: 550},
				key: 'foo'
			},
			{
				URI: 'img/ch4_4.jpg',
				caption: "Seaside Heights, NJ after Hurricane Sandy.",
				preserveAspectRatio: "xMidYMid",
				actualSize: {height: 550, width: 550}
			},
		];

	var crslConfig1 =
		{
			items:
				[
					new Image(imgConfig1[0]),
					new Image(imgConfig1[1]),
					new Image(imgConfig1[2]),
					new Image(imgConfig1[3]),
					new Image(imgConfig1[4]),
					new Image(imgConfig1[5])
				],
			layout: "horizontal",
			itemMargin: {top: 4, bottom: 4, left: 2, right: 2},
			presentation: "scaleToFit", // or "scroll"
			scrollMode: "nowrap"
		};
		
	var crslConfig2 =
		{
			items:
				[
					new Image(imgConfig1[5]),
					new Image(imgConfig1[4]),
					new Image(imgConfig1[3]),
					new Image(imgConfig1[2]),
					new Image(imgConfig1[1]),
					new Image(imgConfig1[0])
				],
			layout: "horizontal",
			itemMargin: {top: 4, bottom: 4, left: 2, right: 2},
			presentation: "scaleToFit", // or "scroll"
			scrollMode: "nowrap"
		};
		
	var cntrConfig1 = 
		{
			node: d3.select("#widgetTarget1n"),
			maxWid: 400,
			maxHt: 160
		};

	var cntr1 = new SVGContainer(cntrConfig1);
	var crsl1 = new Carousel(crslConfig1, eventManager);
	var crsl2 = new Carousel(crslConfig2, eventManager);
	
	cntr1.append(crsl1, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 0.45, widthPercent: 1});
	cntr1.append(crsl2, {topPercentOffset: 0.55, leftPercentOffset: 0, heightPercent: 0.45, widthPercent: 1});

	eventManager.subscribe(crsl1.selectedEventId, function (eventDetails) {crsl1.lite(eventDetails.selectKey);});

// widget test 1a using new widgets - ad hoc image viewer (carousel selection changes attached image)
	var crslConfig3 =
		{
			items:
				[
					new Image(imgConfig1[0]),
					new Image(imgConfig1[1]),
					new Image(imgConfig1[2]),
					new Image(imgConfig1[3]),
					new Image(imgConfig1[4]),
					new Image(imgConfig1[5])
				],
			layout: "horizontal",
			itemMargin: {top: 4, bottom: 4, left: 2, right: 2},
			presentation: "scaleToFit", // or "scroll"
			scrollMode: "nowrap"
		};

	var cimgConfig3 =
		{
			image: new Image(imgConfig1[0])
		};

	var cntrConfig3 = 
		{
			node: d3.select("#widgetTarget1an"),
			maxWid: 400,
			maxHt: 400
		};

	var cntr3 = new SVGContainer(cntrConfig3);
	var crsl3 = new Carousel(crslConfig3, eventManager);
	var cimg3 = new CaptionedImage(cimgConfig3, eventManager);
	
	cntr3.append(crsl3, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 0.20, widthPercent: 1});
	cntr3.append(cimg3, {topPercentOffset: 0.20, leftPercentOffset: 0, heightPercent: 0.75, widthPercent: 1});
	 
	var handleImageView = function (eventDetails)
	{
		cimg3.changeImage(crsl3.selectedItem().URI, crsl3.selectedItem().caption);
		cimg3.redraw();
	};

	eventManager.subscribe(crsl3.selectedEventId, handleImageView);

// widget test 1b using new widgets - using image viewer widget
	var imgvwrConfig4 =
		{
			items:
				[
					new Image(imgConfig1[0]),
					new Image(imgConfig1[1]),
					new Image(imgConfig1[2]),
					new Image(imgConfig1[3]),
					new Image(imgConfig1[4]),
					new Image(imgConfig1[5])
				],
		};

	var cntrConfig4 = 
		{
			node: d3.select("#widgetTarget1bn"),
			maxWid: 400,
			maxHt: 400
		};

	var cntr4 = new SVGContainer(cntrConfig4);
	var imgvwr4 = new ImageViewer(imgvwrConfig4, eventManager);
	
	cntr4.append(imgvwr4, {topPercentOffset: 0, leftPercentOffset: 0, heightPercent: 1, widthPercent: 1});
	 
// Old widgets code test for widget 1
	var svg1 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget1"),
		maxWid: 400,
		maxHt: 300
		}
	);
	svg1.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		xaxisType: "linear",
		xOrient: "bottom",
		xLabel: "counts",
		yaxisType: "linear",
		yOrient: "left",
	});
	
	svg1.ScalableImage(
		{images: [
			{URI:'img/ch4_0_1.png', caption: "Earth's atmosphere. &copy;NASA http://www.nasa.gov/multimedia/imagegallery/ image_feature_1529.html"},
			{URI:'img/ch4_03.jpg', caption: "The seasons"},
			{URI:'img/ch4_0_2.jpg', caption: "Heat transfer mechanisms"},	
				{URI:'img/ch4_1.jpg', caption: "The Whitewater-Baldy Complex wildfire."},
				{URI:'img/ch4_2.jpg', caption: "Aerial image near downtown West Liberty, Kentucky."},
				{URI:'img/ch4_4.jpg', caption: "Seaside Heights, NJ after Hurricane Sandy."}
			]
		}
	);

	//	<div id="widgetTarget2"><p>Grouped bars (separate series with same label shown in group)</p></div>
	
	var svg2 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget2"),
		maxWid: 500,
		maxHt: 400
		}
	);
	svg2.Axes({
		id: 2,
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		Data: [lineData],
		xaxisType: "linear",
		xTicks: 5,
		xOrient: "bottom",
		xLabel: "distance",
		yaxisType: "linear",
		yTicks: 5,
		yOrient: "left",
		yLabel: "Strata dividing line"
	});
	
	svg2.ScalableImage(
		{images: [
			{URI:'img/strata.jpg', caption: "Earth's strata"}
			]
		}
	);
	svg2.LineGraph({
		Data: [lineData],
		type: "lines"
	});
	
	


	//	<div id="widgetTarget70"><p>Images in grid</p></div>


	var svg70 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget50"),
		maxWid: 800,
		maxHt: 300
		}
	);
	svg70.Axes({
		xPosPerc: 0, yPosPerc:0,
		xPerc: .33, yPerc: 1,//full height and half width
		xaxisType: "linear", yaxisType: "ordinal",
		xOrient: "bottom",
		yOrient: "left",
		xLabel: "population"
	});

	svg70.ScalableImage(
		{images: [
				{URI:'img/ch4_2.jpg', caption: "Aerial image near downtown West Liberty, Kentucky."}]
		});
		
	svg70.Axes({
		xPosPerc: .33, yPosPerc:0,
		xPerc: .33, yPerc: 1,//full height 
		xaxisType: "linear", yaxisType: "linear",
		xOrient: "bottom",
		yOrient: "left",
		xLabel: "population"
	});
	svg70.ScalableImage( 
		{images: [
				{URI:'img/ch4_3.jpg', caption: "Withering Iowa corn."}]
		});
	
	svg70.Axes({
			xPosPerc: .66, yPosPerc:0,
			xPerc: .33, yPerc: 1,//full height 
			xaxisType: "linear", yaxisType: "linear",
			xOrient: "bottom",
			yOrient: "left",
			xLabel: "population"
		});
	svg70.ScalableImage( 
			{images: [
					{URI:'img/ch4_4.jpg', caption: "Seaside, NJ, after Hurricane Sandy."}]
			});
	//	<div id="widgetTarget80"><p>5. Carousel with Legend</p></div>
	var svg5 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget80"),
		maxWid: 600,
		maxHt:500
		}
	);
	svg5.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		xaxisType: "linear",
		xOrient: "bottom",
		xLabel: "caption",
		yaxisType: "linear",
		yOrient: "left",
	});
	
	svg5.ScalableImage( 
		{images: [
				{URI:'img/ch4_1.jpg', caption: "The Whitewater-Baldy Complex wildfire."},
				{URI:'img/ch4_2.jpg', caption: "Aerial image near downtown West Liberty, Kentucky."},
				{URI:'img/ch4_4.jpg', caption: "Seaside Heights, NJ after Hurricane Sandy."}
			],
		liteKey: [0,1,2]
		}
	);
	
	svg5.Legend({
		xPos: "right", yPos: "top",
		labels: ["wildfire", "tornado", "hurricane"],
		type: "box",
		liteKey: [0,1,2]
	});

	var IDList = [images1, images5, axes5];
	console.log(images1,images5,axes5);
	var startState = 0, start2 = 51;
	
	images1.setState(startState);
	images5.setState(startState);
	axes5.setState(startState);
	
images5.setState(startState);
//	legend5.setState(start2);
		
	 d3.selectAll('.liteable')
	 	.on("click", function(d,i){ 
		console.log("TODO: Log click and time on ", this.id);
		return stateCycle(this,IDList);});
	
</script>
</body>
</html>
